(KEYWORD import)
(ID "binascii")
(NEWLINE)
(KEYWORD import)
(ID "email")
(PUNCT ".")
(ID "charset")
(NEWLINE)
(KEYWORD import)
(ID "email")
(PUNCT ".")
(ID "message")
(NEWLINE)
(KEYWORD import)
(ID "email")
(PUNCT ".")
(ID "errors")
(NEWLINE)
(KEYWORD from)
(ID "email")
(KEYWORD import)
(ID "quoprimime")
(NEWLINE)
(KEYWORD class)
(ID "ContentManager")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD def)
(ID "__init__")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "get_handlers")
(PUNCT "=")
(PUNCT "{")
(PUNCT "}")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "set_handlers")
(PUNCT "=")
(PUNCT "{")
(PUNCT "}")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "add_get_handler")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "key")
(PUNCT ",")
(ID "handler")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "get_handlers")
(PUNCT "[")
(ID "key")
(PUNCT "]")
(PUNCT "=")
(ID "handler")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "get_content")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "msg")
(PUNCT ",")
(PUNCT "*")
(ID "args")
(PUNCT ",")
(PUNCT "**")
(ID "kw")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "content_type")
(PUNCT "=")
(ID "msg")
(PUNCT ".")
(ID "get_content_type")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "content_type")
(KEYWORD in)
(ID "self")
(PUNCT ".")
(ID "get_handlers")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "self")
(PUNCT ".")
(ID "get_handlers")
(PUNCT "[")
(ID "content_type")
(PUNCT "]")
(PUNCT "(")
(ID "msg")
(PUNCT ",")
(PUNCT "*")
(ID "args")
(PUNCT ",")
(PUNCT "**")
(ID "kw")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "maintype")
(PUNCT "=")
(ID "msg")
(PUNCT ".")
(ID "get_content_maintype")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "maintype")
(KEYWORD in)
(ID "self")
(PUNCT ".")
(ID "get_handlers")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "self")
(PUNCT ".")
(ID "get_handlers")
(PUNCT "[")
(ID "maintype")
(PUNCT "]")
(PUNCT "(")
(ID "msg")
(PUNCT ",")
(PUNCT "*")
(ID "args")
(PUNCT ",")
(PUNCT "**")
(ID "kw")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD if)
(LIT "")
(KEYWORD in)
(ID "self")
(PUNCT ".")
(ID "get_handlers")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "self")
(PUNCT ".")
(ID "get_handlers")
(PUNCT "[")
(LIT "")
(PUNCT "]")
(PUNCT "(")
(ID "msg")
(PUNCT ",")
(PUNCT "*")
(ID "args")
(PUNCT ",")
(PUNCT "**")
(ID "kw")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD raise)
(ID "KeyError")
(PUNCT "(")
(ID "content_type")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "add_set_handler")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "typekey")
(PUNCT ",")
(ID "handler")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "set_handlers")
(PUNCT "[")
(ID "typekey")
(PUNCT "]")
(PUNCT "=")
(ID "handler")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "set_content")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "msg")
(PUNCT ",")
(ID "obj")
(PUNCT ",")
(PUNCT "*")
(ID "args")
(PUNCT ",")
(PUNCT "**")
(ID "kw")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD if)
(ID "msg")
(PUNCT ".")
(ID "get_content_maintype")
(PUNCT "(")
(PUNCT ")")
(PUNCT "==")
(LIT "multipart")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD raise)
(ID "TypeError")
(PUNCT "(")
(LIT "set_content not valid on multipart")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "handler")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "_find_set_handler")
(PUNCT "(")
(ID "msg")
(PUNCT ",")
(ID "obj")
(PUNCT ")")
(NEWLINE)
(ID "msg")
(PUNCT ".")
(ID "clear_content")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(ID "handler")
(PUNCT "(")
(ID "msg")
(PUNCT ",")
(ID "obj")
(PUNCT ",")
(PUNCT "*")
(ID "args")
(PUNCT ",")
(PUNCT "**")
(ID "kw")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "_find_set_handler")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "msg")
(PUNCT ",")
(ID "obj")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "full_path_for_error")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(KEYWORD for)
(ID "typ")
(KEYWORD in)
(ID "type")
(PUNCT "(")
(ID "obj")
(PUNCT ")")
(PUNCT ".")
(ID "__mro__")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD if)
(ID "typ")
(KEYWORD in)
(ID "self")
(PUNCT ".")
(ID "set_handlers")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "self")
(PUNCT ".")
(ID "set_handlers")
(PUNCT "[")
(ID "typ")
(PUNCT "]")
(NEWLINE)
(DEDENT)
(ID "qname")
(PUNCT "=")
(ID "typ")
(PUNCT ".")
(ID "__qualname__")
(NEWLINE)
(ID "modname")
(PUNCT "=")
(ID "getattr")
(PUNCT "(")
(ID "typ")
(PUNCT ",")
(LIT "__module__")
(PUNCT ",")
(LIT "")
(PUNCT ")")
(NEWLINE)
(ID "full_path")
(PUNCT "=")
(LIT ".")
(PUNCT ".")
(ID "join")
(PUNCT "(")
(PUNCT "(")
(ID "modname")
(PUNCT ",")
(ID "qname")
(PUNCT ")")
(PUNCT ")")
(KEYWORD if)
(ID "modname")
(KEYWORD else)
(ID "qname")
(NEWLINE)
(KEYWORD if)
(ID "full_path_for_error")
(KEYWORD is)
(KEYWORD None)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "full_path_for_error")
(PUNCT "=")
(ID "full_path")
(NEWLINE)
(DEDENT)
(KEYWORD if)
(ID "full_path")
(KEYWORD in)
(ID "self")
(PUNCT ".")
(ID "set_handlers")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "self")
(PUNCT ".")
(ID "set_handlers")
(PUNCT "[")
(ID "full_path")
(PUNCT "]")
(NEWLINE)
(DEDENT)
(KEYWORD if)
(ID "qname")
(KEYWORD in)
(ID "self")
(PUNCT ".")
(ID "set_handlers")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "self")
(PUNCT ".")
(ID "set_handlers")
(PUNCT "[")
(ID "qname")
(PUNCT "]")
(NEWLINE)
(DEDENT)
(ID "name")
(PUNCT "=")
(ID "typ")
(PUNCT ".")
(ID "__name__")
(NEWLINE)
(KEYWORD if)
(ID "name")
(KEYWORD in)
(ID "self")
(PUNCT ".")
(ID "set_handlers")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "self")
(PUNCT ".")
(ID "set_handlers")
(PUNCT "[")
(ID "name")
(PUNCT "]")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD if)
(KEYWORD None)
(KEYWORD in)
(ID "self")
(PUNCT ".")
(ID "set_handlers")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "self")
(PUNCT ".")
(ID "set_handlers")
(PUNCT "[")
(KEYWORD None)
(PUNCT "]")
(NEWLINE)
(DEDENT)
(KEYWORD raise)
(ID "KeyError")
(PUNCT "(")
(ID "full_path_for_error")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(ID "raw_data_manager")
(PUNCT "=")
(ID "ContentManager")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(KEYWORD def)
(ID "get_text_content")
(PUNCT "(")
(ID "msg")
(PUNCT ",")
(ID "errors")
(PUNCT "=")
(LIT "replace")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "content")
(PUNCT "=")
(ID "msg")
(PUNCT ".")
(ID "get_payload")
(PUNCT "(")
(ID "decode")
(PUNCT "=")
(KEYWORD True)
(PUNCT ")")
(NEWLINE)
(ID "charset")
(PUNCT "=")
(ID "msg")
(PUNCT ".")
(ID "get_param")
(PUNCT "(")
(LIT "charset")
(PUNCT ",")
(LIT "ASCII")
(PUNCT ")")
(NEWLINE)
(KEYWORD return)
(ID "content")
(PUNCT ".")
(ID "decode")
(PUNCT "(")
(ID "charset")
(PUNCT ",")
(ID "errors")
(PUNCT "=")
(ID "errors")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "raw_data_manager")
(PUNCT ".")
(ID "add_get_handler")
(PUNCT "(")
(LIT "text")
(PUNCT ",")
(ID "get_text_content")
(PUNCT ")")
(NEWLINE)
(KEYWORD def)
(ID "get_non_text_content")
(PUNCT "(")
(ID "msg")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "msg")
(PUNCT ".")
(ID "get_payload")
(PUNCT "(")
(ID "decode")
(PUNCT "=")
(KEYWORD True)
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD for)
(ID "maintype")
(KEYWORD in)
(LIT "audio image video application")
(PUNCT ".")
(ID "split")
(PUNCT "(")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "raw_data_manager")
(PUNCT ".")
(ID "add_get_handler")
(PUNCT "(")
(ID "maintype")
(PUNCT ",")
(ID "get_non_text_content")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "get_message_content")
(PUNCT "(")
(ID "msg")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "msg")
(PUNCT ".")
(ID "get_payload")
(PUNCT "(")
(LIT 0)
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD for)
(ID "subtype")
(KEYWORD in)
(LIT "rfc822 external-body")
(PUNCT ".")
(ID "split")
(PUNCT "(")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "raw_data_manager")
(PUNCT ".")
(ID "add_get_handler")
(PUNCT "(")
(LIT "message/")
(PUNCT "+")
(ID "subtype")
(PUNCT ",")
(ID "get_message_content")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "get_and_fixup_unknown_message_content")
(PUNCT "(")
(ID "msg")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "bytes")
(PUNCT "(")
(ID "msg")
(PUNCT ".")
(ID "get_payload")
(PUNCT "(")
(LIT 0)
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "raw_data_manager")
(PUNCT ".")
(ID "add_get_handler")
(PUNCT "(")
(LIT "message")
(PUNCT ",")
(ID "get_and_fixup_unknown_message_content")
(PUNCT ")")
(NEWLINE)
(KEYWORD def)
(ID "_prepare_set")
(PUNCT "(")
(ID "msg")
(PUNCT ",")
(ID "maintype")
(PUNCT ",")
(ID "subtype")
(PUNCT ",")
(ID "headers")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "msg")
(PUNCT "[")
(LIT "Content-Type")
(PUNCT "]")
(PUNCT "=")
(LIT "/")
(PUNCT ".")
(ID "join")
(PUNCT "(")
(PUNCT "(")
(ID "maintype")
(PUNCT ",")
(ID "subtype")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "headers")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD if)
(KEYWORD not)
(ID "hasattr")
(PUNCT "(")
(ID "headers")
(PUNCT "[")
(LIT 0)
(PUNCT "]")
(PUNCT ",")
(LIT "name")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "mp")
(PUNCT "=")
(ID "msg")
(PUNCT ".")
(ID "policy")
(NEWLINE)
(ID "headers")
(PUNCT "=")
(PUNCT "[")
(ID "mp")
(PUNCT ".")
(ID "header_factory")
(PUNCT "(")
(PUNCT "*")
(ID "mp")
(PUNCT ".")
(ID "header_source_parse")
(PUNCT "(")
(PUNCT "[")
(ID "header")
(PUNCT "]")
(PUNCT ")")
(PUNCT ")")
(KEYWORD for)
(ID "header")
(KEYWORD in)
(ID "headers")
(PUNCT "]")
(NEWLINE)
(DEDENT)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD for)
(ID "header")
(KEYWORD in)
(ID "headers")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD if)
(ID "header")
(PUNCT ".")
(ID "defects")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD raise)
(ID "header")
(PUNCT ".")
(ID "defects")
(PUNCT "[")
(LIT 0)
(PUNCT "]")
(NEWLINE)
(DEDENT)
(ID "msg")
(PUNCT "[")
(ID "header")
(PUNCT ".")
(ID "name")
(PUNCT "]")
(PUNCT "=")
(ID "header")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD except)
(ID "email")
(PUNCT ".")
(ID "errors")
(PUNCT ".")
(ID "HeaderDefect")
(KEYWORD as)
(ID "exc")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD raise)
(ID "ValueError")
(PUNCT "(")
(LIT "Invalid header: {}")
(PUNCT ".")
(ID "format")
(PUNCT "(")
(ID "header")
(PUNCT ".")
(ID "fold")
(PUNCT "(")
(ID "policy")
(PUNCT "=")
(ID "msg")
(PUNCT ".")
(ID "policy")
(PUNCT ")")
(PUNCT ")")
(PUNCT ")")
(KEYWORD from)
(ID "exc")
(NEWLINE)
(DEDENT)
(DEDENT)
(DEDENT)
(KEYWORD def)
(ID "_finalize_set")
(PUNCT "(")
(ID "msg")
(PUNCT ",")
(ID "disposition")
(PUNCT ",")
(ID "filename")
(PUNCT ",")
(ID "cid")
(PUNCT ",")
(ID "params")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD if)
(ID "disposition")
(KEYWORD is)
(KEYWORD None)
(KEYWORD and)
(ID "filename")
(KEYWORD is)
(KEYWORD not)
(KEYWORD None)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "disposition")
(PUNCT "=")
(LIT "attachment")
(NEWLINE)
(DEDENT)
(KEYWORD if)
(ID "disposition")
(KEYWORD is)
(KEYWORD not)
(KEYWORD None)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "msg")
(PUNCT "[")
(LIT "Content-Disposition")
(PUNCT "]")
(PUNCT "=")
(ID "disposition")
(NEWLINE)
(DEDENT)
(KEYWORD if)
(ID "filename")
(KEYWORD is)
(KEYWORD not)
(KEYWORD None)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "msg")
(PUNCT ".")
(ID "set_param")
(PUNCT "(")
(LIT "filename")
(PUNCT ",")
(ID "filename")
(PUNCT ",")
(ID "header")
(PUNCT "=")
(LIT "Content-Disposition")
(PUNCT ",")
(ID "replace")
(PUNCT "=")
(KEYWORD True)
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD if)
(ID "cid")
(KEYWORD is)
(KEYWORD not)
(KEYWORD None)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "msg")
(PUNCT "[")
(LIT "Content-ID")
(PUNCT "]")
(PUNCT "=")
(ID "cid")
(NEWLINE)
(DEDENT)
(KEYWORD if)
(ID "params")
(KEYWORD is)
(KEYWORD not)
(KEYWORD None)
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD for)
(ID "key")
(PUNCT ",")
(ID "value")
(KEYWORD in)
(ID "params")
(PUNCT ".")
(ID "items")
(PUNCT "(")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "msg")
(PUNCT ".")
(ID "set_param")
(PUNCT "(")
(ID "key")
(PUNCT ",")
(ID "value")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(DEDENT)
(KEYWORD def)
(ID "_encode_base64")
(PUNCT "(")
(ID "data")
(PUNCT ",")
(ID "max_line_length")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "encoded_lines")
(PUNCT "=")
(PUNCT "[")
(PUNCT "]")
(NEWLINE)
(ID "unencoded_bytes_per_line")
(PUNCT "=")
(ID "max_line_length")
(PUNCT "*")
(LIT 3)
(PUNCT "//")
(LIT 4)
(NEWLINE)
(KEYWORD for)
(ID "i")
(KEYWORD in)
(ID "range")
(PUNCT "(")
(LIT 0)
(PUNCT ",")
(ID "len")
(PUNCT "(")
(ID "data")
(PUNCT ")")
(PUNCT ",")
(ID "unencoded_bytes_per_line")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "thisline")
(PUNCT "=")
(ID "data")
(PUNCT "[")
(ID "i")
(PUNCT ":")
(ID "i")
(PUNCT "+")
(ID "unencoded_bytes_per_line")
(PUNCT "]")
(NEWLINE)
(ID "encoded_lines")
(PUNCT ".")
(ID "append")
(PUNCT "(")
(ID "binascii")
(PUNCT ".")
(ID "b2a_base64")
(PUNCT "(")
(ID "thisline")
(PUNCT ")")
(PUNCT ".")
(ID "decode")
(PUNCT "(")
(LIT "ascii")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD return)
(LIT "")
(PUNCT ".")
(ID "join")
(PUNCT "(")
(ID "encoded_lines")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "_encode_text")
(PUNCT "(")
(ID "string")
(PUNCT ",")
(ID "charset")
(PUNCT ",")
(ID "cte")
(PUNCT ",")
(ID "policy")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "lines")
(PUNCT "=")
(ID "string")
(PUNCT ".")
(ID "encode")
(PUNCT "(")
(ID "charset")
(PUNCT ")")
(PUNCT ".")
(ID "splitlines")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(ID "linesep")
(PUNCT "=")
(ID "policy")
(PUNCT ".")
(ID "linesep")
(PUNCT ".")
(ID "encode")
(PUNCT "(")
(LIT "ascii")
(PUNCT ")")
(NEWLINE)
(KEYWORD def)
(ID "embeded_body")
(PUNCT "(")
(ID "lines")
(PUNCT ")")
(PUNCT ":")
(KEYWORD return)
(ID "linesep")
(PUNCT ".")
(ID "join")
(PUNCT "(")
(ID "lines")
(PUNCT ")")
(PUNCT "+")
(ID "linesep")
(NEWLINE)
(KEYWORD def)
(ID "normal_body")
(PUNCT "(")
(ID "lines")
(PUNCT ")")
(PUNCT ":")
(KEYWORD return)
(LIT #"\n")
(PUNCT ".")
(ID "join")
(PUNCT "(")
(ID "lines")
(PUNCT ")")
(PUNCT "+")
(LIT #"\n")
(NEWLINE)
(KEYWORD if)
(ID "cte")
(PUNCT "==")
(KEYWORD None)
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(LIT "7bit")
(PUNCT ",")
(ID "normal_body")
(PUNCT "(")
(ID "lines")
(PUNCT ")")
(PUNCT ".")
(ID "decode")
(PUNCT "(")
(LIT "ascii")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD except)
(ID "UnicodeDecodeError")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD pass)
(NEWLINE)
(DEDENT)
(KEYWORD if)
(PUNCT "(")
(ID "policy")
(PUNCT ".")
(ID "cte_type")
(PUNCT "==")
(LIT "8bit")
(KEYWORD and)
(ID "max")
(PUNCT "(")
(ID "len")
(PUNCT "(")
(ID "x")
(PUNCT ")")
(KEYWORD for)
(ID "x")
(KEYWORD in)
(ID "lines")
(PUNCT ")")
(PUNCT "<=")
(ID "policy")
(PUNCT ".")
(ID "max_line_length")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(LIT "8bit")
(PUNCT ",")
(ID "normal_body")
(PUNCT "(")
(ID "lines")
(PUNCT ")")
(PUNCT ".")
(ID "decode")
(PUNCT "(")
(LIT "ascii")
(PUNCT ",")
(LIT "surrogateescape")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "sniff")
(PUNCT "=")
(ID "embeded_body")
(PUNCT "(")
(ID "lines")
(PUNCT "[")
(PUNCT ":")
(LIT 10)
(PUNCT "]")
(PUNCT ")")
(NEWLINE)
(ID "sniff_qp")
(PUNCT "=")
(ID "quoprimime")
(PUNCT ".")
(ID "body_encode")
(PUNCT "(")
(ID "sniff")
(PUNCT ".")
(ID "decode")
(PUNCT "(")
(LIT "latin-1")
(PUNCT ")")
(PUNCT ",")
(ID "policy")
(PUNCT ".")
(ID "max_line_length")
(PUNCT ")")
(NEWLINE)
(ID "sniff_base64")
(PUNCT "=")
(ID "binascii")
(PUNCT ".")
(ID "b2a_base64")
(PUNCT "(")
(ID "sniff")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "len")
(PUNCT "(")
(ID "sniff_qp")
(PUNCT ")")
(PUNCT ">")
(ID "len")
(PUNCT "(")
(ID "sniff_base64")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "cte")
(PUNCT "=")
(LIT "base64")
(NEWLINE)
(DEDENT)
(KEYWORD else)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "cte")
(PUNCT "=")
(LIT "quoted-printable")
(NEWLINE)
(KEYWORD if)
(ID "len")
(PUNCT "(")
(ID "lines")
(PUNCT ")")
(PUNCT "<=")
(LIT 10)
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "cte")
(PUNCT ",")
(ID "sniff_qp")
(NEWLINE)
(DEDENT)
(DEDENT)
(DEDENT)
(KEYWORD if)
(ID "cte")
(PUNCT "==")
(LIT "7bit")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "data")
(PUNCT "=")
(ID "normal_body")
(PUNCT "(")
(ID "lines")
(PUNCT ")")
(PUNCT ".")
(ID "decode")
(PUNCT "(")
(LIT "ascii")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD elif)
(ID "cte")
(PUNCT "==")
(LIT "8bit")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "data")
(PUNCT "=")
(ID "normal_body")
(PUNCT "(")
(ID "lines")
(PUNCT ")")
(PUNCT ".")
(ID "decode")
(PUNCT "(")
(LIT "ascii")
(PUNCT ",")
(LIT "surrogateescape")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD elif)
(ID "cte")
(PUNCT "==")
(LIT "quoted-printable")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "data")
(PUNCT "=")
(ID "quoprimime")
(PUNCT ".")
(ID "body_encode")
(PUNCT "(")
(ID "normal_body")
(PUNCT "(")
(ID "lines")
(PUNCT ")")
(PUNCT ".")
(ID "decode")
(PUNCT "(")
(LIT "latin-1")
(PUNCT ")")
(PUNCT ",")
(ID "policy")
(PUNCT ".")
(ID "max_line_length")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD elif)
(ID "cte")
(PUNCT "==")
(LIT "base64")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "data")
(PUNCT "=")
(ID "_encode_base64")
(PUNCT "(")
(ID "embeded_body")
(PUNCT "(")
(ID "lines")
(PUNCT ")")
(PUNCT ",")
(ID "policy")
(PUNCT ".")
(ID "max_line_length")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD else)
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD raise)
(ID "ValueError")
(PUNCT "(")
(LIT "Unknown content transfer encoding {}")
(PUNCT ".")
(ID "format")
(PUNCT "(")
(ID "cte")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD return)
(ID "cte")
(PUNCT ",")
(ID "data")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "set_text_content")
(PUNCT "(")
(ID "msg")
(PUNCT ",")
(ID "string")
(PUNCT ",")
(ID "subtype")
(PUNCT "=")
(LIT "plain")
(PUNCT ",")
(ID "charset")
(PUNCT "=")
(LIT "utf-8")
(PUNCT ",")
(ID "cte")
(PUNCT "=")
(KEYWORD None)
(PUNCT ",")
(ID "disposition")
(PUNCT "=")
(KEYWORD None)
(PUNCT ",")
(ID "filename")
(PUNCT "=")
(KEYWORD None)
(PUNCT ",")
(ID "cid")
(PUNCT "=")
(KEYWORD None)
(PUNCT ",")
(ID "params")
(PUNCT "=")
(KEYWORD None)
(PUNCT ",")
(ID "headers")
(PUNCT "=")
(KEYWORD None)
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "_prepare_set")
(PUNCT "(")
(ID "msg")
(PUNCT ",")
(LIT "text")
(PUNCT ",")
(ID "subtype")
(PUNCT ",")
(ID "headers")
(PUNCT ")")
(NEWLINE)
(ID "cte")
(PUNCT ",")
(ID "payload")
(PUNCT "=")
(ID "_encode_text")
(PUNCT "(")
(ID "string")
(PUNCT ",")
(ID "charset")
(PUNCT ",")
(ID "cte")
(PUNCT ",")
(ID "msg")
(PUNCT ".")
(ID "policy")
(PUNCT ")")
(NEWLINE)
(ID "msg")
(PUNCT ".")
(ID "set_payload")
(PUNCT "(")
(ID "payload")
(PUNCT ")")
(NEWLINE)
(ID "msg")
(PUNCT ".")
(ID "set_param")
(PUNCT "(")
(LIT "charset")
(PUNCT ",")
(ID "email")
(PUNCT ".")
(ID "charset")
(PUNCT ".")
(ID "ALIASES")
(PUNCT ".")
(ID "get")
(PUNCT "(")
(ID "charset")
(PUNCT ",")
(ID "charset")
(PUNCT ")")
(PUNCT ",")
(ID "replace")
(PUNCT "=")
(KEYWORD True)
(PUNCT ")")
(NEWLINE)
(ID "msg")
(PUNCT "[")
(LIT "Content-Transfer-Encoding")
(PUNCT "]")
(PUNCT "=")
(ID "cte")
(NEWLINE)
(ID "_finalize_set")
(PUNCT "(")
(ID "msg")
(PUNCT ",")
(ID "disposition")
(PUNCT ",")
(ID "filename")
(PUNCT ",")
(ID "cid")
(PUNCT ",")
(ID "params")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "raw_data_manager")
(PUNCT ".")
(ID "add_set_handler")
(PUNCT "(")
(ID "str")
(PUNCT ",")
(ID "set_text_content")
(PUNCT ")")
(NEWLINE)
(KEYWORD def)
(ID "set_message_content")
(PUNCT "(")
(ID "msg")
(PUNCT ",")
(ID "message")
(PUNCT ",")
(ID "subtype")
(PUNCT "=")
(LIT "rfc822")
(PUNCT ",")
(ID "cte")
(PUNCT "=")
(KEYWORD None)
(PUNCT ",")
(ID "disposition")
(PUNCT "=")
(KEYWORD None)
(PUNCT ",")
(ID "filename")
(PUNCT "=")
(KEYWORD None)
(PUNCT ",")
(ID "cid")
(PUNCT "=")
(KEYWORD None)
(PUNCT ",")
(ID "params")
(PUNCT "=")
(KEYWORD None)
(PUNCT ",")
(ID "headers")
(PUNCT "=")
(KEYWORD None)
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD if)
(ID "subtype")
(PUNCT "==")
(LIT "partial")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD raise)
(ID "ValueError")
(PUNCT "(")
(LIT "message/partial is not supported for Message objects")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD if)
(ID "subtype")
(PUNCT "==")
(LIT "rfc822")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD if)
(ID "cte")
(KEYWORD not)
(KEYWORD in)
(PUNCT "(")
(KEYWORD None)
(PUNCT ",")
(LIT "7bit")
(PUNCT ",")
(LIT "8bit")
(PUNCT ",")
(LIT "binary")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD raise)
(ID "ValueError")
(PUNCT "(")
(LIT "message/rfc822 parts do not support cte={}")
(PUNCT ".")
(ID "format")
(PUNCT "(")
(ID "cte")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "cte")
(PUNCT "=")
(LIT "8bit")
(KEYWORD if)
(ID "cte")
(KEYWORD is)
(KEYWORD None)
(KEYWORD else)
(ID "cte")
(NEWLINE)
(DEDENT)
(KEYWORD elif)
(ID "subtype")
(PUNCT "==")
(LIT "external-body")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD if)
(ID "cte")
(KEYWORD not)
(KEYWORD in)
(PUNCT "(")
(KEYWORD None)
(PUNCT ",")
(LIT "7bit")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD raise)
(ID "ValueError")
(PUNCT "(")
(LIT "message/external-body parts do not support cte={}")
(PUNCT ".")
(ID "format")
(PUNCT "(")
(ID "cte")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "cte")
(PUNCT "=")
(LIT "7bit")
(NEWLINE)
(DEDENT)
(KEYWORD elif)
(ID "cte")
(KEYWORD is)
(KEYWORD None)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "cte")
(PUNCT "=")
(LIT "7bit")
(NEWLINE)
(DEDENT)
(ID "_prepare_set")
(PUNCT "(")
(ID "msg")
(PUNCT ",")
(LIT "message")
(PUNCT ",")
(ID "subtype")
(PUNCT ",")
(ID "headers")
(PUNCT ")")
(NEWLINE)
(ID "msg")
(PUNCT ".")
(ID "set_payload")
(PUNCT "(")
(PUNCT "[")
(ID "message")
(PUNCT "]")
(PUNCT ")")
(NEWLINE)
(ID "msg")
(PUNCT "[")
(LIT "Content-Transfer-Encoding")
(PUNCT "]")
(PUNCT "=")
(ID "cte")
(NEWLINE)
(ID "_finalize_set")
(PUNCT "(")
(ID "msg")
(PUNCT ",")
(ID "disposition")
(PUNCT ",")
(ID "filename")
(PUNCT ",")
(ID "cid")
(PUNCT ",")
(ID "params")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "raw_data_manager")
(PUNCT ".")
(ID "add_set_handler")
(PUNCT "(")
(ID "email")
(PUNCT ".")
(ID "message")
(PUNCT ".")
(ID "Message")
(PUNCT ",")
(ID "set_message_content")
(PUNCT ")")
(NEWLINE)
(KEYWORD def)
(ID "set_bytes_content")
(PUNCT "(")
(ID "msg")
(PUNCT ",")
(ID "data")
(PUNCT ",")
(ID "maintype")
(PUNCT ",")
(ID "subtype")
(PUNCT ",")
(ID "cte")
(PUNCT "=")
(LIT "base64")
(PUNCT ",")
(ID "disposition")
(PUNCT "=")
(KEYWORD None)
(PUNCT ",")
(ID "filename")
(PUNCT "=")
(KEYWORD None)
(PUNCT ",")
(ID "cid")
(PUNCT "=")
(KEYWORD None)
(PUNCT ",")
(ID "params")
(PUNCT "=")
(KEYWORD None)
(PUNCT ",")
(ID "headers")
(PUNCT "=")
(KEYWORD None)
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "_prepare_set")
(PUNCT "(")
(ID "msg")
(PUNCT ",")
(ID "maintype")
(PUNCT ",")
(ID "subtype")
(PUNCT ",")
(ID "headers")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "cte")
(PUNCT "==")
(LIT "base64")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "data")
(PUNCT "=")
(ID "_encode_base64")
(PUNCT "(")
(ID "data")
(PUNCT ",")
(ID "max_line_length")
(PUNCT "=")
(ID "msg")
(PUNCT ".")
(ID "policy")
(PUNCT ".")
(ID "max_line_length")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD elif)
(ID "cte")
(PUNCT "==")
(LIT "quoted-printable")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "data")
(PUNCT "=")
(ID "binascii")
(PUNCT ".")
(ID "b2a_qp")
(PUNCT "(")
(ID "data")
(PUNCT ",")
(ID "istext")
(PUNCT "=")
(KEYWORD False)
(PUNCT ",")
(ID "header")
(PUNCT "=")
(KEYWORD False)
(PUNCT ",")
(ID "quotetabs")
(PUNCT "=")
(KEYWORD True)
(PUNCT ")")
(NEWLINE)
(ID "data")
(PUNCT "=")
(ID "data")
(PUNCT ".")
(ID "decode")
(PUNCT "(")
(LIT "ascii")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD elif)
(ID "cte")
(PUNCT "==")
(LIT "7bit")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "data")
(PUNCT ".")
(ID "encode")
(PUNCT "(")
(LIT "ascii")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD elif)
(ID "cte")
(KEYWORD in)
(PUNCT "(")
(LIT "8bit")
(PUNCT ",")
(LIT "binary")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "data")
(PUNCT "=")
(ID "data")
(PUNCT ".")
(ID "decode")
(PUNCT "(")
(LIT "ascii")
(PUNCT ",")
(LIT "surrogateescape")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "msg")
(PUNCT ".")
(ID "set_payload")
(PUNCT "(")
(ID "data")
(PUNCT ")")
(NEWLINE)
(ID "msg")
(PUNCT "[")
(LIT "Content-Transfer-Encoding")
(PUNCT "]")
(PUNCT "=")
(ID "cte")
(NEWLINE)
(ID "_finalize_set")
(PUNCT "(")
(ID "msg")
(PUNCT ",")
(ID "disposition")
(PUNCT ",")
(ID "filename")
(PUNCT ",")
(ID "cid")
(PUNCT ",")
(ID "params")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD for)
(ID "typ")
(KEYWORD in)
(PUNCT "(")
(ID "bytes")
(PUNCT ",")
(ID "bytearray")
(PUNCT ",")
(ID "memoryview")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "raw_data_manager")
(PUNCT ".")
(ID "add_set_handler")
(PUNCT "(")
(ID "typ")
(PUNCT ",")
(ID "set_bytes_content")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ENDMARKER)
