(LIT "Various types of useful iterators and generators.")
(NEWLINE)
(ID "__all__")
(PUNCT "=")
(PUNCT "[")
(LIT "body_line_iterator")
(PUNCT ",")
(LIT "typed_subpart_iterator")
(PUNCT ",")
(LIT "walk")
(PUNCT ",")
(PUNCT "]")
(NEWLINE)
(KEYWORD import)
(ID "sys")
(NEWLINE)
(KEYWORD from)
(ID "io")
(KEYWORD import)
(ID "StringIO")
(NEWLINE)
(KEYWORD def)
(ID "walk")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(LIT "Walk over the message tree, yielding each subpart.\n\n    The walk is performed in depth-first order.  This method is a\n    generator.\n    ")
(NEWLINE)
(KEYWORD yield)
(ID "self")
(NEWLINE)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "is_multipart")
(PUNCT "(")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD for)
(ID "subpart")
(KEYWORD in)
(ID "self")
(PUNCT ".")
(ID "get_payload")
(PUNCT "(")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD yield)
(KEYWORD from)
(ID "subpart")
(PUNCT ".")
(ID "walk")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(DEDENT)
(KEYWORD def)
(ID "body_line_iterator")
(PUNCT "(")
(ID "msg")
(PUNCT ",")
(ID "decode")
(PUNCT "=")
(KEYWORD False)
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(LIT "Iterate over the parts, returning string payloads line-by-line.\n\n    Optional decode (default False) is passed through to .get_payload().\n    ")
(NEWLINE)
(KEYWORD for)
(ID "subpart")
(KEYWORD in)
(ID "msg")
(PUNCT ".")
(ID "walk")
(PUNCT "(")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "payload")
(PUNCT "=")
(ID "subpart")
(PUNCT ".")
(ID "get_payload")
(PUNCT "(")
(ID "decode")
(PUNCT "=")
(ID "decode")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "isinstance")
(PUNCT "(")
(ID "payload")
(PUNCT ",")
(ID "str")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD yield)
(KEYWORD from)
(ID "StringIO")
(PUNCT "(")
(ID "payload")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(DEDENT)
(KEYWORD def)
(ID "typed_subpart_iterator")
(PUNCT "(")
(ID "msg")
(PUNCT ",")
(ID "maintype")
(PUNCT "=")
(LIT "text")
(PUNCT ",")
(ID "subtype")
(PUNCT "=")
(KEYWORD None)
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(LIT "Iterate over the subparts with a given MIME type.\n\n    Use `maintype' as the main MIME type to match against; this defaults to\n    \"text\".  Optional `subtype' is the MIME subtype to match against; if\n    omitted, only the main type is matched.\n    ")
(NEWLINE)
(KEYWORD for)
(ID "subpart")
(KEYWORD in)
(ID "msg")
(PUNCT ".")
(ID "walk")
(PUNCT "(")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD if)
(ID "subpart")
(PUNCT ".")
(ID "get_content_maintype")
(PUNCT "(")
(PUNCT ")")
(PUNCT "==")
(ID "maintype")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD if)
(ID "subtype")
(KEYWORD is)
(KEYWORD None)
(KEYWORD or)
(ID "subpart")
(PUNCT ".")
(ID "get_content_subtype")
(PUNCT "(")
(PUNCT ")")
(PUNCT "==")
(ID "subtype")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD yield)
(ID "subpart")
(NEWLINE)
(DEDENT)
(DEDENT)
(DEDENT)
(DEDENT)
(KEYWORD def)
(ID "_structure")
(PUNCT "(")
(ID "msg")
(PUNCT ",")
(ID "fp")
(PUNCT "=")
(KEYWORD None)
(PUNCT ",")
(ID "level")
(PUNCT "=")
(LIT 0)
(PUNCT ",")
(ID "include_default")
(PUNCT "=")
(KEYWORD False)
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(LIT "A handy debugging aid")
(NEWLINE)
(KEYWORD if)
(ID "fp")
(KEYWORD is)
(KEYWORD None)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "fp")
(PUNCT "=")
(ID "sys")
(PUNCT ".")
(ID "stdout")
(NEWLINE)
(DEDENT)
(ID "tab")
(PUNCT "=")
(LIT " ")
(PUNCT "*")
(PUNCT "(")
(ID "level")
(PUNCT "*")
(LIT 4)
(PUNCT ")")
(NEWLINE)
(ID "print")
(PUNCT "(")
(ID "tab")
(PUNCT "+")
(ID "msg")
(PUNCT ".")
(ID "get_content_type")
(PUNCT "(")
(PUNCT ")")
(PUNCT ",")
(ID "end")
(PUNCT "=")
(LIT "")
(PUNCT ",")
(ID "file")
(PUNCT "=")
(ID "fp")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "include_default")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "print")
(PUNCT "(")
(LIT " [%s]")
(PUNCT "%")
(ID "msg")
(PUNCT ".")
(ID "get_default_type")
(PUNCT "(")
(PUNCT ")")
(PUNCT ",")
(ID "file")
(PUNCT "=")
(ID "fp")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD else)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "print")
(PUNCT "(")
(ID "file")
(PUNCT "=")
(ID "fp")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD if)
(ID "msg")
(PUNCT ".")
(ID "is_multipart")
(PUNCT "(")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD for)
(ID "subpart")
(KEYWORD in)
(ID "msg")
(PUNCT ".")
(ID "get_payload")
(PUNCT "(")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "_structure")
(PUNCT "(")
(ID "subpart")
(PUNCT ",")
(ID "fp")
(PUNCT ",")
(ID "level")
(PUNCT "+")
(LIT 1)
(PUNCT ",")
(ID "include_default")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(DEDENT)
(ENDMARKER)
