(LIT "distutils.command.install_egg_info\n\nImplements the Distutils 'install_egg_info' command, for installing\na package's PKG-INFO metadata.")
(NEWLINE)
(KEYWORD from)
(ID "distutils")
(PUNCT ".")
(ID "cmd")
(KEYWORD import)
(ID "Command")
(NEWLINE)
(KEYWORD from)
(ID "distutils")
(KEYWORD import)
(ID "log")
(PUNCT ",")
(ID "dir_util")
(NEWLINE)
(KEYWORD import)
(ID "os")
(PUNCT ",")
(ID "sys")
(PUNCT ",")
(ID "re")
(NEWLINE)
(KEYWORD class)
(ID "install_egg_info")
(PUNCT "(")
(ID "Command")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(LIT "Install an .egg-info file for the package")
(NEWLINE)
(ID "description")
(PUNCT "=")
(LIT "Install package's PKG-INFO metadata as an .egg-info file")
(NEWLINE)
(ID "user_options")
(PUNCT "=")
(PUNCT "[")
(PUNCT "(")
(LIT "install-dir=")
(PUNCT ",")
(LIT "d")
(PUNCT ",")
(LIT "directory to install to")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "install-layout")
(PUNCT ",")
(KEYWORD None)
(PUNCT ",")
(LIT "custom installation layout")
(PUNCT ")")
(PUNCT ",")
(PUNCT "]")
(NEWLINE)
(KEYWORD def)
(ID "initialize_options")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "install_dir")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "install_layout")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "prefix_option")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "finalize_options")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "set_undefined_options")
(PUNCT "(")
(LIT "install_lib")
(PUNCT ",")
(PUNCT "(")
(LIT "install_dir")
(PUNCT ",")
(LIT "install_dir")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "set_undefined_options")
(PUNCT "(")
(LIT "install")
(PUNCT ",")
(PUNCT "(")
(LIT "install_layout")
(PUNCT ",")
(LIT "install_layout")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "set_undefined_options")
(PUNCT "(")
(LIT "install")
(PUNCT ",")
(PUNCT "(")
(LIT "prefix_option")
(PUNCT ",")
(LIT "prefix_option")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "install_layout")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD if)
(KEYWORD not)
(ID "self")
(PUNCT ".")
(ID "install_layout")
(PUNCT ".")
(ID "lower")
(PUNCT "(")
(PUNCT ")")
(KEYWORD in)
(PUNCT "[")
(LIT "deb")
(PUNCT ",")
(LIT "unix")
(PUNCT "]")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD raise)
(ID "DistutilsOptionError")
(PUNCT "(")
(LIT "unknown value for --install-layout")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "no_pyver")
(PUNCT "=")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "install_layout")
(PUNCT ".")
(ID "lower")
(PUNCT "(")
(PUNCT ")")
(PUNCT "==")
(LIT "deb")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD elif)
(ID "self")
(PUNCT ".")
(ID "prefix_option")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "no_pyver")
(PUNCT "=")
(KEYWORD False)
(NEWLINE)
(DEDENT)
(KEYWORD else)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "no_pyver")
(PUNCT "=")
(KEYWORD True)
(NEWLINE)
(DEDENT)
(KEYWORD if)
(ID "no_pyver")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "basename")
(PUNCT "=")
(LIT "%s-%s.egg-info")
(PUNCT "%")
(PUNCT "(")
(ID "to_filename")
(PUNCT "(")
(ID "safe_name")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "distribution")
(PUNCT ".")
(ID "get_name")
(PUNCT "(")
(PUNCT ")")
(PUNCT ")")
(PUNCT ")")
(PUNCT ",")
(ID "to_filename")
(PUNCT "(")
(ID "safe_version")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "distribution")
(PUNCT ".")
(ID "get_version")
(PUNCT "(")
(PUNCT ")")
(PUNCT ")")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD else)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "basename")
(PUNCT "=")
(LIT "%s-%s-py%s.egg-info")
(PUNCT "%")
(PUNCT "(")
(ID "to_filename")
(PUNCT "(")
(ID "safe_name")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "distribution")
(PUNCT ".")
(ID "get_name")
(PUNCT "(")
(PUNCT ")")
(PUNCT ")")
(PUNCT ")")
(PUNCT ",")
(ID "to_filename")
(PUNCT "(")
(ID "safe_version")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "distribution")
(PUNCT ".")
(ID "get_version")
(PUNCT "(")
(PUNCT ")")
(PUNCT ")")
(PUNCT ")")
(PUNCT ",")
(ID "sys")
(PUNCT ".")
(ID "version")
(PUNCT "[")
(PUNCT ":")
(LIT 3)
(PUNCT "]")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "self")
(PUNCT ".")
(ID "target")
(PUNCT "=")
(ID "os")
(PUNCT ".")
(ID "path")
(PUNCT ".")
(ID "join")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "install_dir")
(PUNCT ",")
(ID "basename")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "outputs")
(PUNCT "=")
(PUNCT "[")
(ID "self")
(PUNCT ".")
(ID "target")
(PUNCT "]")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "run")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "target")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "target")
(NEWLINE)
(KEYWORD if)
(ID "os")
(PUNCT ".")
(ID "path")
(PUNCT ".")
(ID "isdir")
(PUNCT "(")
(ID "target")
(PUNCT ")")
(KEYWORD and)
(KEYWORD not)
(ID "os")
(PUNCT ".")
(ID "path")
(PUNCT ".")
(ID "islink")
(PUNCT "(")
(ID "target")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "dir_util")
(PUNCT ".")
(ID "remove_tree")
(PUNCT "(")
(ID "target")
(PUNCT ",")
(ID "dry_run")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "dry_run")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD elif)
(ID "os")
(PUNCT ".")
(ID "path")
(PUNCT ".")
(ID "exists")
(PUNCT "(")
(ID "target")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "execute")
(PUNCT "(")
(ID "os")
(PUNCT ".")
(ID "unlink")
(PUNCT ",")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "target")
(PUNCT ",")
(PUNCT ")")
(PUNCT ",")
(LIT "Removing ")
(PUNCT "+")
(ID "target")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD elif)
(KEYWORD not)
(ID "os")
(PUNCT ".")
(ID "path")
(PUNCT ".")
(ID "isdir")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "install_dir")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "execute")
(PUNCT "(")
(ID "os")
(PUNCT ".")
(ID "makedirs")
(PUNCT ",")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "install_dir")
(PUNCT ",")
(PUNCT ")")
(PUNCT ",")
(LIT "Creating ")
(PUNCT "+")
(ID "self")
(PUNCT ".")
(ID "install_dir")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "log")
(PUNCT ".")
(ID "info")
(PUNCT "(")
(LIT "Writing %s")
(PUNCT ",")
(ID "target")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(KEYWORD not)
(ID "self")
(PUNCT ".")
(ID "dry_run")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD with)
(ID "open")
(PUNCT "(")
(ID "target")
(PUNCT ",")
(LIT "w")
(PUNCT ",")
(ID "encoding")
(PUNCT "=")
(LIT "UTF-8")
(PUNCT ")")
(KEYWORD as)
(ID "f")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "distribution")
(PUNCT ".")
(ID "metadata")
(PUNCT ".")
(ID "write_pkg_file")
(PUNCT "(")
(ID "f")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(DEDENT)
(KEYWORD def)
(ID "get_outputs")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "self")
(PUNCT ".")
(ID "outputs")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD def)
(ID "safe_name")
(PUNCT "(")
(ID "name")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(LIT "Convert an arbitrary string to a standard distribution name\n\n    Any runs of non-alphanumeric/. characters are replaced with a single '-'.\n    ")
(NEWLINE)
(KEYWORD return)
(ID "re")
(PUNCT ".")
(ID "sub")
(PUNCT "(")
(LIT "[^A-Za-z0-9.]+")
(PUNCT ",")
(LIT "-")
(PUNCT ",")
(ID "name")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "safe_version")
(PUNCT "(")
(ID "version")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(LIT "Convert an arbitrary string to a standard version string\n\n    Spaces become dots, and all other non-alphanumeric characters become\n    dashes, with runs of multiple dashes condensed to a single dash.\n    ")
(NEWLINE)
(ID "version")
(PUNCT "=")
(ID "version")
(PUNCT ".")
(ID "replace")
(PUNCT "(")
(LIT " ")
(PUNCT ",")
(LIT ".")
(PUNCT ")")
(NEWLINE)
(KEYWORD return)
(ID "re")
(PUNCT ".")
(ID "sub")
(PUNCT "(")
(LIT "[^A-Za-z0-9.]+")
(PUNCT ",")
(LIT "-")
(PUNCT ",")
(ID "version")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "to_filename")
(PUNCT "(")
(ID "name")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(LIT "Convert a project or version name to its filename-escaped form\n\n    Any '-' characters are currently replaced with '_'.\n    ")
(NEWLINE)
(KEYWORD return)
(ID "name")
(PUNCT ".")
(ID "replace")
(PUNCT "(")
(LIT "-")
(PUNCT ",")
(LIT "_")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ENDMARKER)
