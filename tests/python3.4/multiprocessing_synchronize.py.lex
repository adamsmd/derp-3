(ID "__all__")
(PUNCT "=")
(PUNCT "[")
(LIT "Lock")
(PUNCT ",")
(LIT "RLock")
(PUNCT ",")
(LIT "Semaphore")
(PUNCT ",")
(LIT "BoundedSemaphore")
(PUNCT ",")
(LIT "Condition")
(PUNCT ",")
(LIT "Event")
(PUNCT "]")
(NEWLINE)
(KEYWORD import)
(ID "threading")
(NEWLINE)
(KEYWORD import)
(ID "sys")
(NEWLINE)
(KEYWORD import)
(ID "tempfile")
(NEWLINE)
(KEYWORD import)
(ID "_multiprocessing")
(NEWLINE)
(KEYWORD from)
(ID "time")
(KEYWORD import)
(ID "time")
(KEYWORD as)
(ID "_time")
(NEWLINE)
(KEYWORD from)
(PUNCT ".")
(KEYWORD import)
(ID "context")
(NEWLINE)
(KEYWORD from)
(PUNCT ".")
(KEYWORD import)
(ID "process")
(NEWLINE)
(KEYWORD from)
(PUNCT ".")
(KEYWORD import)
(ID "util")
(NEWLINE)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD from)
(ID "_multiprocessing")
(KEYWORD import)
(ID "SemLock")
(PUNCT ",")
(ID "sem_unlink")
(NEWLINE)
(DEDENT)
(KEYWORD except)
(PUNCT "(")
(ID "ImportError")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD raise)
(ID "ImportError")
(PUNCT "(")
(LIT "This platform lacks a functioning sem_open")
(PUNCT "+")
(LIT " implementation, therefore, the required")
(PUNCT "+")
(LIT " synchronization primitives needed will not")
(PUNCT "+")
(LIT " function, see issue 3770.")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "RECURSIVE_MUTEX")
(PUNCT ",")
(ID "SEMAPHORE")
(PUNCT "=")
(ID "list")
(PUNCT "(")
(ID "range")
(PUNCT "(")
(LIT 2)
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(ID "SEM_VALUE_MAX")
(PUNCT "=")
(ID "_multiprocessing")
(PUNCT ".")
(ID "SemLock")
(PUNCT ".")
(ID "SEM_VALUE_MAX")
(NEWLINE)
(KEYWORD class)
(ID "SemLock")
(PUNCT "(")
(ID "object")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "_rand")
(PUNCT "=")
(ID "tempfile")
(PUNCT ".")
(ID "_RandomNameSequence")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(KEYWORD def)
(ID "__init__")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "kind")
(PUNCT ",")
(ID "value")
(PUNCT ",")
(ID "maxvalue")
(PUNCT ",")
(PUNCT "*")
(PUNCT ",")
(ID "ctx")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD if)
(ID "ctx")
(KEYWORD is)
(KEYWORD None)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "ctx")
(PUNCT "=")
(ID "context")
(PUNCT ".")
(ID "_default_context")
(PUNCT ".")
(ID "get_context")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "name")
(PUNCT "=")
(ID "ctx")
(PUNCT ".")
(ID "get_start_method")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(ID "unlink_now")
(PUNCT "=")
(ID "sys")
(PUNCT ".")
(ID "platform")
(PUNCT "==")
(LIT "win32")
(KEYWORD or)
(ID "name")
(PUNCT "==")
(LIT "fork")
(NEWLINE)
(KEYWORD for)
(ID "i")
(KEYWORD in)
(ID "range")
(PUNCT "(")
(LIT 100)
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "sl")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "_semlock")
(PUNCT "=")
(ID "_multiprocessing")
(PUNCT ".")
(ID "SemLock")
(PUNCT "(")
(ID "kind")
(PUNCT ",")
(ID "value")
(PUNCT ",")
(ID "maxvalue")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_make_name")
(PUNCT "(")
(PUNCT ")")
(PUNCT ",")
(ID "unlink_now")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD except)
(ID "FileExistsError")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD pass)
(NEWLINE)
(DEDENT)
(KEYWORD else)
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD break)
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD else)
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD raise)
(ID "FileExistsError")
(PUNCT "(")
(LIT "cannot find name for semaphore")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "util")
(PUNCT ".")
(ID "debug")
(PUNCT "(")
(LIT "created semlock with handle %s")
(PUNCT "%")
(ID "sl")
(PUNCT ".")
(ID "handle")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_make_methods")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "sys")
(PUNCT ".")
(ID "platform")
(PUNCT "!=")
(LIT "win32")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD def)
(ID "_after_fork")
(PUNCT "(")
(ID "obj")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "obj")
(PUNCT ".")
(ID "_semlock")
(PUNCT ".")
(ID "_after_fork")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "util")
(PUNCT ".")
(ID "register_after_fork")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "_after_fork")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "_semlock")
(PUNCT ".")
(ID "name")
(KEYWORD is)
(KEYWORD not)
(KEYWORD None)
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD from)
(PUNCT ".")
(ID "semaphore_tracker")
(KEYWORD import)
(ID "register")
(NEWLINE)
(ID "register")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "_semlock")
(PUNCT ".")
(ID "name")
(PUNCT ")")
(NEWLINE)
(ID "util")
(PUNCT ".")
(ID "Finalize")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "SemLock")
(PUNCT ".")
(ID "_cleanup")
(PUNCT ",")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "_semlock")
(PUNCT ".")
(ID "name")
(PUNCT ",")
(PUNCT ")")
(PUNCT ",")
(ID "exitpriority")
(PUNCT "=")
(LIT 0)
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(PUNCT "@")
(ID "staticmethod")
(NEWLINE)
(KEYWORD def)
(ID "_cleanup")
(PUNCT "(")
(ID "name")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD from)
(PUNCT ".")
(ID "semaphore_tracker")
(KEYWORD import)
(ID "unregister")
(NEWLINE)
(ID "sem_unlink")
(PUNCT "(")
(ID "name")
(PUNCT ")")
(NEWLINE)
(ID "unregister")
(PUNCT "(")
(ID "name")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "_make_methods")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "acquire")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "_semlock")
(PUNCT ".")
(ID "acquire")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "release")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "_semlock")
(PUNCT ".")
(ID "release")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "__enter__")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "self")
(PUNCT ".")
(ID "_semlock")
(PUNCT ".")
(ID "__enter__")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "__exit__")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(PUNCT "*")
(ID "args")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "self")
(PUNCT ".")
(ID "_semlock")
(PUNCT ".")
(ID "__exit__")
(PUNCT "(")
(PUNCT "*")
(ID "args")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "__getstate__")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "context")
(PUNCT ".")
(ID "assert_spawning")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(NEWLINE)
(ID "sl")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "_semlock")
(NEWLINE)
(KEYWORD if)
(ID "sys")
(PUNCT ".")
(ID "platform")
(PUNCT "==")
(LIT "win32")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "h")
(PUNCT "=")
(ID "context")
(PUNCT ".")
(ID "get_spawning_popen")
(PUNCT "(")
(PUNCT ")")
(PUNCT ".")
(ID "duplicate_for_child")
(PUNCT "(")
(ID "sl")
(PUNCT ".")
(ID "handle")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD else)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "h")
(PUNCT "=")
(ID "sl")
(PUNCT ".")
(ID "handle")
(NEWLINE)
(DEDENT)
(KEYWORD return)
(PUNCT "(")
(ID "h")
(PUNCT ",")
(ID "sl")
(PUNCT ".")
(ID "kind")
(PUNCT ",")
(ID "sl")
(PUNCT ".")
(ID "maxvalue")
(PUNCT ",")
(ID "sl")
(PUNCT ".")
(ID "name")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "__setstate__")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "state")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_semlock")
(PUNCT "=")
(ID "_multiprocessing")
(PUNCT ".")
(ID "SemLock")
(PUNCT ".")
(ID "_rebuild")
(PUNCT "(")
(PUNCT "*")
(ID "state")
(PUNCT ")")
(NEWLINE)
(ID "util")
(PUNCT ".")
(ID "debug")
(PUNCT "(")
(LIT "recreated blocker with handle %r")
(PUNCT "%")
(ID "state")
(PUNCT "[")
(LIT 0)
(PUNCT "]")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_make_methods")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(PUNCT "@")
(ID "staticmethod")
(NEWLINE)
(KEYWORD def)
(ID "_make_name")
(PUNCT "(")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(LIT "%s-%s")
(PUNCT "%")
(PUNCT "(")
(ID "process")
(PUNCT ".")
(ID "current_process")
(PUNCT "(")
(PUNCT ")")
(PUNCT ".")
(ID "_config")
(PUNCT "[")
(LIT "semprefix")
(PUNCT "]")
(PUNCT ",")
(ID "next")
(PUNCT "(")
(ID "SemLock")
(PUNCT ".")
(ID "_rand")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD class)
(ID "Semaphore")
(PUNCT "(")
(ID "SemLock")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD def)
(ID "__init__")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "value")
(PUNCT "=")
(LIT 1)
(PUNCT ",")
(PUNCT "*")
(PUNCT ",")
(ID "ctx")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "SemLock")
(PUNCT ".")
(ID "__init__")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "SEMAPHORE")
(PUNCT ",")
(ID "value")
(PUNCT ",")
(ID "SEM_VALUE_MAX")
(PUNCT ",")
(ID "ctx")
(PUNCT "=")
(ID "ctx")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "get_value")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "self")
(PUNCT ".")
(ID "_semlock")
(PUNCT ".")
(ID "_get_value")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "__repr__")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "value")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "_semlock")
(PUNCT ".")
(ID "_get_value")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD except)
(ID "Exception")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "value")
(PUNCT "=")
(LIT "unknown")
(NEWLINE)
(DEDENT)
(KEYWORD return)
(LIT "<Semaphore(value=%s)>")
(PUNCT "%")
(ID "value")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD class)
(ID "BoundedSemaphore")
(PUNCT "(")
(ID "Semaphore")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD def)
(ID "__init__")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "value")
(PUNCT "=")
(LIT 1)
(PUNCT ",")
(PUNCT "*")
(PUNCT ",")
(ID "ctx")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "SemLock")
(PUNCT ".")
(ID "__init__")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "SEMAPHORE")
(PUNCT ",")
(ID "value")
(PUNCT ",")
(ID "value")
(PUNCT ",")
(ID "ctx")
(PUNCT "=")
(ID "ctx")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "__repr__")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "value")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "_semlock")
(PUNCT ".")
(ID "_get_value")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD except)
(ID "Exception")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "value")
(PUNCT "=")
(LIT "unknown")
(NEWLINE)
(DEDENT)
(KEYWORD return)
(LIT "<BoundedSemaphore(value=%s, maxvalue=%s)>")
(PUNCT "%")
(PUNCT "(")
(ID "value")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_semlock")
(PUNCT ".")
(ID "maxvalue")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD class)
(ID "Lock")
(PUNCT "(")
(ID "SemLock")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD def)
(ID "__init__")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(PUNCT "*")
(PUNCT ",")
(ID "ctx")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "SemLock")
(PUNCT ".")
(ID "__init__")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "SEMAPHORE")
(PUNCT ",")
(LIT 1)
(PUNCT ",")
(LIT 1)
(PUNCT ",")
(ID "ctx")
(PUNCT "=")
(ID "ctx")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "__repr__")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "_semlock")
(PUNCT ".")
(ID "_is_mine")
(PUNCT "(")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "name")
(PUNCT "=")
(ID "process")
(PUNCT ".")
(ID "current_process")
(PUNCT "(")
(PUNCT ")")
(PUNCT ".")
(ID "name")
(NEWLINE)
(KEYWORD if)
(ID "threading")
(PUNCT ".")
(ID "current_thread")
(PUNCT "(")
(PUNCT ")")
(PUNCT ".")
(ID "name")
(PUNCT "!=")
(LIT "MainThread")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "name")
(PUNCT "+=")
(LIT "|")
(PUNCT "+")
(ID "threading")
(PUNCT ".")
(ID "current_thread")
(PUNCT "(")
(PUNCT ")")
(PUNCT ".")
(ID "name")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD elif)
(ID "self")
(PUNCT ".")
(ID "_semlock")
(PUNCT ".")
(ID "_get_value")
(PUNCT "(")
(PUNCT ")")
(PUNCT "==")
(LIT 1)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "name")
(PUNCT "=")
(LIT "None")
(NEWLINE)
(DEDENT)
(KEYWORD elif)
(ID "self")
(PUNCT ".")
(ID "_semlock")
(PUNCT ".")
(ID "_count")
(PUNCT "(")
(PUNCT ")")
(PUNCT ">")
(LIT 0)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "name")
(PUNCT "=")
(LIT "SomeOtherThread")
(NEWLINE)
(DEDENT)
(KEYWORD else)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "name")
(PUNCT "=")
(LIT "SomeOtherProcess")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD except)
(ID "Exception")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "name")
(PUNCT "=")
(LIT "unknown")
(NEWLINE)
(DEDENT)
(KEYWORD return)
(LIT "<Lock(owner=%s)>")
(PUNCT "%")
(ID "name")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD class)
(ID "RLock")
(PUNCT "(")
(ID "SemLock")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD def)
(ID "__init__")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(PUNCT "*")
(PUNCT ",")
(ID "ctx")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "SemLock")
(PUNCT ".")
(ID "__init__")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "RECURSIVE_MUTEX")
(PUNCT ",")
(LIT 1)
(PUNCT ",")
(LIT 1)
(PUNCT ",")
(ID "ctx")
(PUNCT "=")
(ID "ctx")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "__repr__")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "_semlock")
(PUNCT ".")
(ID "_is_mine")
(PUNCT "(")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "name")
(PUNCT "=")
(ID "process")
(PUNCT ".")
(ID "current_process")
(PUNCT "(")
(PUNCT ")")
(PUNCT ".")
(ID "name")
(NEWLINE)
(KEYWORD if)
(ID "threading")
(PUNCT ".")
(ID "current_thread")
(PUNCT "(")
(PUNCT ")")
(PUNCT ".")
(ID "name")
(PUNCT "!=")
(LIT "MainThread")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "name")
(PUNCT "+=")
(LIT "|")
(PUNCT "+")
(ID "threading")
(PUNCT ".")
(ID "current_thread")
(PUNCT "(")
(PUNCT ")")
(PUNCT ".")
(ID "name")
(NEWLINE)
(DEDENT)
(ID "count")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "_semlock")
(PUNCT ".")
(ID "_count")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD elif)
(ID "self")
(PUNCT ".")
(ID "_semlock")
(PUNCT ".")
(ID "_get_value")
(PUNCT "(")
(PUNCT ")")
(PUNCT "==")
(LIT 1)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "name")
(PUNCT ",")
(ID "count")
(PUNCT "=")
(LIT "None")
(PUNCT ",")
(LIT 0)
(NEWLINE)
(DEDENT)
(KEYWORD elif)
(ID "self")
(PUNCT ".")
(ID "_semlock")
(PUNCT ".")
(ID "_count")
(PUNCT "(")
(PUNCT ")")
(PUNCT ">")
(LIT 0)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "name")
(PUNCT ",")
(ID "count")
(PUNCT "=")
(LIT "SomeOtherThread")
(PUNCT ",")
(LIT "nonzero")
(NEWLINE)
(DEDENT)
(KEYWORD else)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "name")
(PUNCT ",")
(ID "count")
(PUNCT "=")
(LIT "SomeOtherProcess")
(PUNCT ",")
(LIT "nonzero")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD except)
(ID "Exception")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "name")
(PUNCT ",")
(ID "count")
(PUNCT "=")
(LIT "unknown")
(PUNCT ",")
(LIT "unknown")
(NEWLINE)
(DEDENT)
(KEYWORD return)
(LIT "<RLock(%s, %s)>")
(PUNCT "%")
(PUNCT "(")
(ID "name")
(PUNCT ",")
(ID "count")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD class)
(ID "Condition")
(PUNCT "(")
(ID "object")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD def)
(ID "__init__")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "lock")
(PUNCT "=")
(KEYWORD None)
(PUNCT ",")
(PUNCT "*")
(PUNCT ",")
(ID "ctx")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_lock")
(PUNCT "=")
(ID "lock")
(KEYWORD or)
(ID "ctx")
(PUNCT ".")
(ID "RLock")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_sleeping_count")
(PUNCT "=")
(ID "ctx")
(PUNCT ".")
(ID "Semaphore")
(PUNCT "(")
(LIT 0)
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_woken_count")
(PUNCT "=")
(ID "ctx")
(PUNCT ".")
(ID "Semaphore")
(PUNCT "(")
(LIT 0)
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_wait_semaphore")
(PUNCT "=")
(ID "ctx")
(PUNCT ".")
(ID "Semaphore")
(PUNCT "(")
(LIT 0)
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_make_methods")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "__getstate__")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "context")
(PUNCT ".")
(ID "assert_spawning")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(NEWLINE)
(KEYWORD return)
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "_lock")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_sleeping_count")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_woken_count")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_wait_semaphore")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "__setstate__")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "state")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "_lock")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_sleeping_count")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_woken_count")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_wait_semaphore")
(PUNCT ")")
(PUNCT "=")
(ID "state")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_make_methods")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "__enter__")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "self")
(PUNCT ".")
(ID "_lock")
(PUNCT ".")
(ID "__enter__")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "__exit__")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(PUNCT "*")
(ID "args")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "self")
(PUNCT ".")
(ID "_lock")
(PUNCT ".")
(ID "__exit__")
(PUNCT "(")
(PUNCT "*")
(ID "args")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "_make_methods")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "acquire")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "_lock")
(PUNCT ".")
(ID "acquire")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "release")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "_lock")
(PUNCT ".")
(ID "release")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "__repr__")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "num_waiters")
(PUNCT "=")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "_sleeping_count")
(PUNCT ".")
(ID "_semlock")
(PUNCT ".")
(ID "_get_value")
(PUNCT "(")
(PUNCT ")")
(PUNCT "-")
(ID "self")
(PUNCT ".")
(ID "_woken_count")
(PUNCT ".")
(ID "_semlock")
(PUNCT ".")
(ID "_get_value")
(PUNCT "(")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD except)
(ID "Exception")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "num_waiters")
(PUNCT "=")
(LIT "unknown")
(NEWLINE)
(DEDENT)
(KEYWORD return)
(LIT "<Condition(%s, %s)>")
(PUNCT "%")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "_lock")
(PUNCT ",")
(ID "num_waiters")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "wait")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "timeout")
(PUNCT "=")
(KEYWORD None)
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD assert)
(ID "self")
(PUNCT ".")
(ID "_lock")
(PUNCT ".")
(ID "_semlock")
(PUNCT ".")
(ID "_is_mine")
(PUNCT "(")
(PUNCT ")")
(PUNCT ",")
(LIT "must acquire() condition before using wait()")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_sleeping_count")
(PUNCT ".")
(ID "release")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(ID "count")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "_lock")
(PUNCT ".")
(ID "_semlock")
(PUNCT ".")
(ID "_count")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(KEYWORD for)
(ID "i")
(KEYWORD in)
(ID "range")
(PUNCT "(")
(ID "count")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_lock")
(PUNCT ".")
(ID "release")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "self")
(PUNCT ".")
(ID "_wait_semaphore")
(PUNCT ".")
(ID "acquire")
(PUNCT "(")
(KEYWORD True)
(PUNCT ",")
(ID "timeout")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD finally)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_woken_count")
(PUNCT ".")
(ID "release")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(KEYWORD for)
(ID "i")
(KEYWORD in)
(ID "range")
(PUNCT "(")
(ID "count")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_lock")
(PUNCT ".")
(ID "acquire")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(DEDENT)
(KEYWORD def)
(ID "notify")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD assert)
(ID "self")
(PUNCT ".")
(ID "_lock")
(PUNCT ".")
(ID "_semlock")
(PUNCT ".")
(ID "_is_mine")
(PUNCT "(")
(PUNCT ")")
(PUNCT ",")
(LIT "lock is not owned")
(NEWLINE)
(KEYWORD assert)
(KEYWORD not)
(ID "self")
(PUNCT ".")
(ID "_wait_semaphore")
(PUNCT ".")
(ID "acquire")
(PUNCT "(")
(KEYWORD False)
(PUNCT ")")
(NEWLINE)
(KEYWORD while)
(ID "self")
(PUNCT ".")
(ID "_woken_count")
(PUNCT ".")
(ID "acquire")
(PUNCT "(")
(KEYWORD False)
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "res")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "_sleeping_count")
(PUNCT ".")
(ID "acquire")
(PUNCT "(")
(KEYWORD False)
(PUNCT ")")
(NEWLINE)
(KEYWORD assert)
(ID "res")
(NEWLINE)
(DEDENT)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "_sleeping_count")
(PUNCT ".")
(ID "acquire")
(PUNCT "(")
(KEYWORD False)
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_wait_semaphore")
(PUNCT ".")
(ID "release")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_woken_count")
(PUNCT ".")
(ID "acquire")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_wait_semaphore")
(PUNCT ".")
(ID "acquire")
(PUNCT "(")
(KEYWORD False)
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD def)
(ID "notify_all")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD assert)
(ID "self")
(PUNCT ".")
(ID "_lock")
(PUNCT ".")
(ID "_semlock")
(PUNCT ".")
(ID "_is_mine")
(PUNCT "(")
(PUNCT ")")
(PUNCT ",")
(LIT "lock is not owned")
(NEWLINE)
(KEYWORD assert)
(KEYWORD not)
(ID "self")
(PUNCT ".")
(ID "_wait_semaphore")
(PUNCT ".")
(ID "acquire")
(PUNCT "(")
(KEYWORD False)
(PUNCT ")")
(NEWLINE)
(KEYWORD while)
(ID "self")
(PUNCT ".")
(ID "_woken_count")
(PUNCT ".")
(ID "acquire")
(PUNCT "(")
(KEYWORD False)
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "res")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "_sleeping_count")
(PUNCT ".")
(ID "acquire")
(PUNCT "(")
(KEYWORD False)
(PUNCT ")")
(NEWLINE)
(KEYWORD assert)
(ID "res")
(NEWLINE)
(DEDENT)
(ID "sleepers")
(PUNCT "=")
(LIT 0)
(NEWLINE)
(KEYWORD while)
(ID "self")
(PUNCT ".")
(ID "_sleeping_count")
(PUNCT ".")
(ID "acquire")
(PUNCT "(")
(KEYWORD False)
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_wait_semaphore")
(PUNCT ".")
(ID "release")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(ID "sleepers")
(PUNCT "+=")
(LIT 1)
(NEWLINE)
(DEDENT)
(KEYWORD if)
(ID "sleepers")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD for)
(ID "i")
(KEYWORD in)
(ID "range")
(PUNCT "(")
(ID "sleepers")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_woken_count")
(PUNCT ".")
(ID "acquire")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD while)
(ID "self")
(PUNCT ".")
(ID "_wait_semaphore")
(PUNCT ".")
(ID "acquire")
(PUNCT "(")
(KEYWORD False)
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD pass)
(NEWLINE)
(DEDENT)
(DEDENT)
(DEDENT)
(KEYWORD def)
(ID "wait_for")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "predicate")
(PUNCT ",")
(ID "timeout")
(PUNCT "=")
(KEYWORD None)
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "result")
(PUNCT "=")
(ID "predicate")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "result")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "result")
(NEWLINE)
(DEDENT)
(KEYWORD if)
(ID "timeout")
(KEYWORD is)
(KEYWORD not)
(KEYWORD None)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "endtime")
(PUNCT "=")
(ID "_time")
(PUNCT "(")
(PUNCT ")")
(PUNCT "+")
(ID "timeout")
(NEWLINE)
(DEDENT)
(KEYWORD else)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "endtime")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(ID "waittime")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(DEDENT)
(KEYWORD while)
(KEYWORD not)
(ID "result")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD if)
(ID "endtime")
(KEYWORD is)
(KEYWORD not)
(KEYWORD None)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "waittime")
(PUNCT "=")
(ID "endtime")
(PUNCT "-")
(ID "_time")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "waittime")
(PUNCT "<=")
(LIT 0)
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD break)
(NEWLINE)
(DEDENT)
(DEDENT)
(ID "self")
(PUNCT ".")
(ID "wait")
(PUNCT "(")
(ID "waittime")
(PUNCT ")")
(NEWLINE)
(ID "result")
(PUNCT "=")
(ID "predicate")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD return)
(ID "result")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD class)
(ID "Event")
(PUNCT "(")
(ID "object")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD def)
(ID "__init__")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(PUNCT "*")
(PUNCT ",")
(ID "ctx")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_cond")
(PUNCT "=")
(ID "ctx")
(PUNCT ".")
(ID "Condition")
(PUNCT "(")
(ID "ctx")
(PUNCT ".")
(ID "Lock")
(PUNCT "(")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_flag")
(PUNCT "=")
(ID "ctx")
(PUNCT ".")
(ID "Semaphore")
(PUNCT "(")
(LIT 0)
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "is_set")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_cond")
(PUNCT ".")
(ID "acquire")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "_flag")
(PUNCT ".")
(ID "acquire")
(PUNCT "(")
(KEYWORD False)
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_flag")
(PUNCT ".")
(ID "release")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(KEYWORD return)
(KEYWORD True)
(NEWLINE)
(DEDENT)
(KEYWORD return)
(KEYWORD False)
(NEWLINE)
(DEDENT)
(KEYWORD finally)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_cond")
(PUNCT ".")
(ID "release")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD def)
(ID "set")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_cond")
(PUNCT ".")
(ID "acquire")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_flag")
(PUNCT ".")
(ID "acquire")
(PUNCT "(")
(KEYWORD False)
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_flag")
(PUNCT ".")
(ID "release")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_cond")
(PUNCT ".")
(ID "notify_all")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD finally)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_cond")
(PUNCT ".")
(ID "release")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD def)
(ID "clear")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_cond")
(PUNCT ".")
(ID "acquire")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_flag")
(PUNCT ".")
(ID "acquire")
(PUNCT "(")
(KEYWORD False)
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD finally)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_cond")
(PUNCT ".")
(ID "release")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD def)
(ID "wait")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "timeout")
(PUNCT "=")
(KEYWORD None)
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_cond")
(PUNCT ".")
(ID "acquire")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "_flag")
(PUNCT ".")
(ID "acquire")
(PUNCT "(")
(KEYWORD False)
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_flag")
(PUNCT ".")
(ID "release")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD else)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_cond")
(PUNCT ".")
(ID "wait")
(PUNCT "(")
(ID "timeout")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "_flag")
(PUNCT ".")
(ID "acquire")
(PUNCT "(")
(KEYWORD False)
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_flag")
(PUNCT ".")
(ID "release")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(KEYWORD return)
(KEYWORD True)
(NEWLINE)
(DEDENT)
(KEYWORD return)
(KEYWORD False)
(NEWLINE)
(DEDENT)
(KEYWORD finally)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_cond")
(PUNCT ".")
(ID "release")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(DEDENT)
(KEYWORD class)
(ID "Barrier")
(PUNCT "(")
(ID "threading")
(PUNCT ".")
(ID "Barrier")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD def)
(ID "__init__")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "parties")
(PUNCT ",")
(ID "action")
(PUNCT "=")
(KEYWORD None)
(PUNCT ",")
(ID "timeout")
(PUNCT "=")
(KEYWORD None)
(PUNCT ",")
(PUNCT "*")
(PUNCT ",")
(ID "ctx")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD import)
(ID "struct")
(NEWLINE)
(KEYWORD from)
(PUNCT ".")
(ID "heap")
(KEYWORD import)
(ID "BufferWrapper")
(NEWLINE)
(ID "wrapper")
(PUNCT "=")
(ID "BufferWrapper")
(PUNCT "(")
(ID "struct")
(PUNCT ".")
(ID "calcsize")
(PUNCT "(")
(LIT "i")
(PUNCT ")")
(PUNCT "*")
(LIT 2)
(PUNCT ")")
(NEWLINE)
(ID "cond")
(PUNCT "=")
(ID "ctx")
(PUNCT ".")
(ID "Condition")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "__setstate__")
(PUNCT "(")
(PUNCT "(")
(ID "parties")
(PUNCT ",")
(ID "action")
(PUNCT ",")
(ID "timeout")
(PUNCT ",")
(ID "cond")
(PUNCT ",")
(ID "wrapper")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_state")
(PUNCT "=")
(LIT 0)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_count")
(PUNCT "=")
(LIT 0)
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "__setstate__")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "state")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "_parties")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_action")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_timeout")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_cond")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_wrapper")
(PUNCT ")")
(PUNCT "=")
(ID "state")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_array")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "_wrapper")
(PUNCT ".")
(ID "create_memoryview")
(PUNCT "(")
(PUNCT ")")
(PUNCT ".")
(ID "cast")
(PUNCT "(")
(LIT "i")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "__getstate__")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "_parties")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_action")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_timeout")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_cond")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_wrapper")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(PUNCT "@")
(ID "property")
(NEWLINE)
(KEYWORD def)
(ID "_state")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "self")
(PUNCT ".")
(ID "_array")
(PUNCT "[")
(LIT 0)
(PUNCT "]")
(NEWLINE)
(DEDENT)
(PUNCT "@")
(ID "_state")
(PUNCT ".")
(ID "setter")
(NEWLINE)
(KEYWORD def)
(ID "_state")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "value")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_array")
(PUNCT "[")
(LIT 0)
(PUNCT "]")
(PUNCT "=")
(ID "value")
(NEWLINE)
(DEDENT)
(PUNCT "@")
(ID "property")
(NEWLINE)
(KEYWORD def)
(ID "_count")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "self")
(PUNCT ".")
(ID "_array")
(PUNCT "[")
(LIT 1)
(PUNCT "]")
(NEWLINE)
(DEDENT)
(PUNCT "@")
(ID "_count")
(PUNCT ".")
(ID "setter")
(NEWLINE)
(KEYWORD def)
(ID "_count")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "value")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_array")
(PUNCT "[")
(LIT 1)
(PUNCT "]")
(PUNCT "=")
(ID "value")
(NEWLINE)
(DEDENT)
(DEDENT)
(ENDMARKER)
