(ID "__all__")
(PUNCT "=")
(PUNCT "[")
(LIT "BaseManager")
(PUNCT ",")
(LIT "SyncManager")
(PUNCT ",")
(LIT "BaseProxy")
(PUNCT ",")
(LIT "Token")
(PUNCT "]")
(NEWLINE)
(KEYWORD import)
(ID "sys")
(NEWLINE)
(KEYWORD import)
(ID "threading")
(NEWLINE)
(KEYWORD import)
(ID "array")
(NEWLINE)
(KEYWORD import)
(ID "queue")
(NEWLINE)
(KEYWORD from)
(ID "time")
(KEYWORD import)
(ID "time")
(KEYWORD as)
(ID "_time")
(NEWLINE)
(KEYWORD from)
(ID "traceback")
(KEYWORD import)
(ID "format_exc")
(NEWLINE)
(KEYWORD from)
(PUNCT ".")
(KEYWORD import)
(ID "connection")
(NEWLINE)
(KEYWORD from)
(PUNCT ".")
(KEYWORD import)
(ID "context")
(NEWLINE)
(KEYWORD from)
(PUNCT ".")
(KEYWORD import)
(ID "pool")
(NEWLINE)
(KEYWORD from)
(PUNCT ".")
(KEYWORD import)
(ID "process")
(NEWLINE)
(KEYWORD from)
(PUNCT ".")
(KEYWORD import)
(ID "reduction")
(NEWLINE)
(KEYWORD from)
(PUNCT ".")
(KEYWORD import)
(ID "util")
(NEWLINE)
(KEYWORD from)
(PUNCT ".")
(KEYWORD import)
(ID "get_context")
(NEWLINE)
(KEYWORD def)
(ID "reduce_array")
(PUNCT "(")
(ID "a")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "array")
(PUNCT ".")
(ID "array")
(PUNCT ",")
(PUNCT "(")
(ID "a")
(PUNCT ".")
(ID "typecode")
(PUNCT ",")
(ID "a")
(PUNCT ".")
(ID "tobytes")
(PUNCT "(")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "reduction")
(PUNCT ".")
(ID "register")
(PUNCT "(")
(ID "array")
(PUNCT ".")
(ID "array")
(PUNCT ",")
(ID "reduce_array")
(PUNCT ")")
(NEWLINE)
(ID "view_types")
(PUNCT "=")
(PUNCT "[")
(ID "type")
(PUNCT "(")
(ID "getattr")
(PUNCT "(")
(PUNCT "{")
(PUNCT "}")
(PUNCT ",")
(ID "name")
(PUNCT ")")
(PUNCT "(")
(PUNCT ")")
(PUNCT ")")
(KEYWORD for)
(ID "name")
(KEYWORD in)
(PUNCT "(")
(LIT "items")
(PUNCT ",")
(LIT "keys")
(PUNCT ",")
(LIT "values")
(PUNCT ")")
(PUNCT "]")
(NEWLINE)
(KEYWORD if)
(ID "view_types")
(PUNCT "[")
(LIT 0)
(PUNCT "]")
(KEYWORD is)
(KEYWORD not)
(ID "list")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD def)
(ID "rebuild_as_list")
(PUNCT "(")
(ID "obj")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "list")
(PUNCT ",")
(PUNCT "(")
(ID "list")
(PUNCT "(")
(ID "obj")
(PUNCT ")")
(PUNCT ",")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD for)
(ID "view_type")
(KEYWORD in)
(ID "view_types")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "reduction")
(PUNCT ".")
(ID "register")
(PUNCT "(")
(ID "view_type")
(PUNCT ",")
(ID "rebuild_as_list")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD class)
(ID "Token")
(PUNCT "(")
(ID "object")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(LIT "\n    Type to uniquely indentify a shared object\n    ")
(NEWLINE)
(ID "__slots__")
(PUNCT "=")
(PUNCT "(")
(LIT "typeid")
(PUNCT ",")
(LIT "address")
(PUNCT ",")
(LIT "id")
(PUNCT ")")
(NEWLINE)
(KEYWORD def)
(ID "__init__")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "typeid")
(PUNCT ",")
(ID "address")
(PUNCT ",")
(ID "id")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "typeid")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "address")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "id")
(PUNCT ")")
(PUNCT "=")
(PUNCT "(")
(ID "typeid")
(PUNCT ",")
(ID "address")
(PUNCT ",")
(ID "id")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "__getstate__")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "typeid")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "address")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "id")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "__setstate__")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "state")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "typeid")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "address")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "id")
(PUNCT ")")
(PUNCT "=")
(ID "state")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "__repr__")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(LIT "Token(typeid=%r, address=%r, id=%r)")
(PUNCT "%")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "typeid")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "address")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "id")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD def)
(ID "dispatch")
(PUNCT "(")
(ID "c")
(PUNCT ",")
(ID "id")
(PUNCT ",")
(ID "methodname")
(PUNCT ",")
(ID "args")
(PUNCT "=")
(PUNCT "(")
(PUNCT ")")
(PUNCT ",")
(ID "kwds")
(PUNCT "=")
(PUNCT "{")
(PUNCT "}")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(LIT "\n    Send a message to manager using connection `c` and return response\n    ")
(NEWLINE)
(ID "c")
(PUNCT ".")
(ID "send")
(PUNCT "(")
(PUNCT "(")
(ID "id")
(PUNCT ",")
(ID "methodname")
(PUNCT ",")
(ID "args")
(PUNCT ",")
(ID "kwds")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(ID "kind")
(PUNCT ",")
(ID "result")
(PUNCT "=")
(ID "c")
(PUNCT ".")
(ID "recv")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "kind")
(PUNCT "==")
(LIT "#RETURN")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "result")
(NEWLINE)
(DEDENT)
(KEYWORD raise)
(ID "convert_to_error")
(PUNCT "(")
(ID "kind")
(PUNCT ",")
(ID "result")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "convert_to_error")
(PUNCT "(")
(ID "kind")
(PUNCT ",")
(ID "result")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD if)
(ID "kind")
(PUNCT "==")
(LIT "#ERROR")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "result")
(NEWLINE)
(DEDENT)
(KEYWORD elif)
(ID "kind")
(PUNCT "==")
(LIT "#TRACEBACK")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD assert)
(ID "type")
(PUNCT "(")
(ID "result")
(PUNCT ")")
(KEYWORD is)
(ID "str")
(NEWLINE)
(KEYWORD return)
(ID "RemoteError")
(PUNCT "(")
(ID "result")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD elif)
(ID "kind")
(PUNCT "==")
(LIT "#UNSERIALIZABLE")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD assert)
(ID "type")
(PUNCT "(")
(ID "result")
(PUNCT ")")
(KEYWORD is)
(ID "str")
(NEWLINE)
(KEYWORD return)
(ID "RemoteError")
(PUNCT "(")
(LIT "Unserializable message: %s\n")
(PUNCT "%")
(ID "result")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD else)
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "ValueError")
(PUNCT "(")
(LIT "Unrecognized message type")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD class)
(ID "RemoteError")
(PUNCT "(")
(ID "Exception")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD def)
(ID "__str__")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(PUNCT "(")
(LIT "\n")
(PUNCT "+")
(LIT "-")
(PUNCT "*")
(LIT 75)
(PUNCT "+")
(LIT "\n")
(PUNCT "+")
(ID "str")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "args")
(PUNCT "[")
(LIT 0)
(PUNCT "]")
(PUNCT ")")
(PUNCT "+")
(LIT "-")
(PUNCT "*")
(LIT 75)
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD def)
(ID "all_methods")
(PUNCT "(")
(ID "obj")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(LIT "\n    Return a list of names of methods of `obj`\n    ")
(NEWLINE)
(ID "temp")
(PUNCT "=")
(PUNCT "[")
(PUNCT "]")
(NEWLINE)
(KEYWORD for)
(ID "name")
(KEYWORD in)
(ID "dir")
(PUNCT "(")
(ID "obj")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "func")
(PUNCT "=")
(ID "getattr")
(PUNCT "(")
(ID "obj")
(PUNCT ",")
(ID "name")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "callable")
(PUNCT "(")
(ID "func")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "temp")
(PUNCT ".")
(ID "append")
(PUNCT "(")
(ID "name")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD return)
(ID "temp")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "public_methods")
(PUNCT "(")
(ID "obj")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(LIT "\n    Return a list of names of methods of `obj` which do not start with '_'\n    ")
(NEWLINE)
(KEYWORD return)
(PUNCT "[")
(ID "name")
(KEYWORD for)
(ID "name")
(KEYWORD in)
(ID "all_methods")
(PUNCT "(")
(ID "obj")
(PUNCT ")")
(KEYWORD if)
(ID "name")
(PUNCT "[")
(LIT 0)
(PUNCT "]")
(PUNCT "!=")
(LIT "_")
(PUNCT "]")
(NEWLINE)
(DEDENT)
(KEYWORD class)
(ID "Server")
(PUNCT "(")
(ID "object")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(LIT "\n    Server class which runs in a process controlled by a manager object\n    ")
(NEWLINE)
(ID "public")
(PUNCT "=")
(PUNCT "[")
(LIT "shutdown")
(PUNCT ",")
(LIT "create")
(PUNCT ",")
(LIT "accept_connection")
(PUNCT ",")
(LIT "get_methods")
(PUNCT ",")
(LIT "debug_info")
(PUNCT ",")
(LIT "number_of_objects")
(PUNCT ",")
(LIT "dummy")
(PUNCT ",")
(LIT "incref")
(PUNCT ",")
(LIT "decref")
(PUNCT "]")
(NEWLINE)
(KEYWORD def)
(ID "__init__")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "registry")
(PUNCT ",")
(ID "address")
(PUNCT ",")
(ID "authkey")
(PUNCT ",")
(ID "serializer")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD assert)
(ID "isinstance")
(PUNCT "(")
(ID "authkey")
(PUNCT ",")
(ID "bytes")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "registry")
(PUNCT "=")
(ID "registry")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "authkey")
(PUNCT "=")
(ID "process")
(PUNCT ".")
(ID "AuthenticationString")
(PUNCT "(")
(ID "authkey")
(PUNCT ")")
(NEWLINE)
(ID "Listener")
(PUNCT ",")
(ID "Client")
(PUNCT "=")
(ID "listener_client")
(PUNCT "[")
(ID "serializer")
(PUNCT "]")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "listener")
(PUNCT "=")
(ID "Listener")
(PUNCT "(")
(ID "address")
(PUNCT "=")
(ID "address")
(PUNCT ",")
(ID "backlog")
(PUNCT "=")
(LIT 16)
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "address")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "listener")
(PUNCT ".")
(ID "address")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "id_to_obj")
(PUNCT "=")
(PUNCT "{")
(LIT "0")
(PUNCT ":")
(PUNCT "(")
(KEYWORD None)
(PUNCT ",")
(PUNCT "(")
(PUNCT ")")
(PUNCT ")")
(PUNCT "}")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "id_to_refcount")
(PUNCT "=")
(PUNCT "{")
(PUNCT "}")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "mutex")
(PUNCT "=")
(ID "threading")
(PUNCT ".")
(ID "RLock")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "serve_forever")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(LIT "\n        Run the server forever\n        ")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "stop_event")
(PUNCT "=")
(ID "threading")
(PUNCT ".")
(ID "Event")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(ID "process")
(PUNCT ".")
(ID "current_process")
(PUNCT "(")
(PUNCT ")")
(PUNCT ".")
(ID "_manager_server")
(PUNCT "=")
(ID "self")
(NEWLINE)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "accepter")
(PUNCT "=")
(ID "threading")
(PUNCT ".")
(ID "Thread")
(PUNCT "(")
(ID "target")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "accepter")
(PUNCT ")")
(NEWLINE)
(ID "accepter")
(PUNCT ".")
(ID "daemon")
(PUNCT "=")
(KEYWORD True)
(NEWLINE)
(ID "accepter")
(PUNCT ".")
(ID "start")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD while)
(KEYWORD not)
(ID "self")
(PUNCT ".")
(ID "stop_event")
(PUNCT ".")
(ID "is_set")
(PUNCT "(")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "stop_event")
(PUNCT ".")
(ID "wait")
(PUNCT "(")
(LIT 1)
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD except)
(PUNCT "(")
(ID "KeyboardInterrupt")
(PUNCT ",")
(ID "SystemExit")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD pass)
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD finally)
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD if)
(ID "sys")
(PUNCT ".")
(ID "stdout")
(PUNCT "!=")
(ID "sys")
(PUNCT ".")
(ID "__stdout__")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "util")
(PUNCT ".")
(ID "debug")
(PUNCT "(")
(LIT "resetting stdout, stderr")
(PUNCT ")")
(NEWLINE)
(ID "sys")
(PUNCT ".")
(ID "stdout")
(PUNCT "=")
(ID "sys")
(PUNCT ".")
(ID "__stdout__")
(NEWLINE)
(ID "sys")
(PUNCT ".")
(ID "stderr")
(PUNCT "=")
(ID "sys")
(PUNCT ".")
(ID "__stderr__")
(NEWLINE)
(DEDENT)
(ID "sys")
(PUNCT ".")
(ID "exit")
(PUNCT "(")
(LIT 0)
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD def)
(ID "accepter")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD while)
(KEYWORD True)
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "c")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "listener")
(PUNCT ".")
(ID "accept")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD except)
(ID "OSError")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD continue)
(NEWLINE)
(DEDENT)
(ID "t")
(PUNCT "=")
(ID "threading")
(PUNCT ".")
(ID "Thread")
(PUNCT "(")
(ID "target")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "handle_request")
(PUNCT ",")
(ID "args")
(PUNCT "=")
(PUNCT "(")
(ID "c")
(PUNCT ",")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(ID "t")
(PUNCT ".")
(ID "daemon")
(PUNCT "=")
(KEYWORD True)
(NEWLINE)
(ID "t")
(PUNCT ".")
(ID "start")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD def)
(ID "handle_request")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "c")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(LIT "\n        Handle a new connection\n        ")
(NEWLINE)
(ID "funcname")
(PUNCT "=")
(ID "result")
(PUNCT "=")
(ID "request")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "connection")
(PUNCT ".")
(ID "deliver_challenge")
(PUNCT "(")
(ID "c")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "authkey")
(PUNCT ")")
(NEWLINE)
(ID "connection")
(PUNCT ".")
(ID "answer_challenge")
(PUNCT "(")
(ID "c")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "authkey")
(PUNCT ")")
(NEWLINE)
(ID "request")
(PUNCT "=")
(ID "c")
(PUNCT ".")
(ID "recv")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(ID "ignore")
(PUNCT ",")
(ID "funcname")
(PUNCT ",")
(ID "args")
(PUNCT ",")
(ID "kwds")
(PUNCT "=")
(ID "request")
(NEWLINE)
(KEYWORD assert)
(ID "funcname")
(KEYWORD in)
(ID "self")
(PUNCT ".")
(ID "public")
(PUNCT ",")
(LIT "%r unrecognized")
(PUNCT "%")
(ID "funcname")
(NEWLINE)
(ID "func")
(PUNCT "=")
(ID "getattr")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "funcname")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD except)
(ID "Exception")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "msg")
(PUNCT "=")
(PUNCT "(")
(LIT "#TRACEBACK")
(PUNCT ",")
(ID "format_exc")
(PUNCT "(")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD else)
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "result")
(PUNCT "=")
(ID "func")
(PUNCT "(")
(ID "c")
(PUNCT ",")
(PUNCT "*")
(ID "args")
(PUNCT ",")
(PUNCT "**")
(ID "kwds")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD except)
(ID "Exception")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "msg")
(PUNCT "=")
(PUNCT "(")
(LIT "#TRACEBACK")
(PUNCT ",")
(ID "format_exc")
(PUNCT "(")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD else)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "msg")
(PUNCT "=")
(PUNCT "(")
(LIT "#RETURN")
(PUNCT ",")
(ID "result")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "c")
(PUNCT ".")
(ID "send")
(PUNCT "(")
(ID "msg")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD except)
(ID "Exception")
(KEYWORD as)
(ID "e")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "c")
(PUNCT ".")
(ID "send")
(PUNCT "(")
(PUNCT "(")
(LIT "#TRACEBACK")
(PUNCT ",")
(ID "format_exc")
(PUNCT "(")
(PUNCT ")")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD except)
(ID "Exception")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD pass)
(NEWLINE)
(DEDENT)
(ID "util")
(PUNCT ".")
(ID "info")
(PUNCT "(")
(LIT "Failure to send message: %r")
(PUNCT ",")
(ID "msg")
(PUNCT ")")
(NEWLINE)
(ID "util")
(PUNCT ".")
(ID "info")
(PUNCT "(")
(LIT " ... request was %r")
(PUNCT ",")
(ID "request")
(PUNCT ")")
(NEWLINE)
(ID "util")
(PUNCT ".")
(ID "info")
(PUNCT "(")
(LIT " ... exception was %r")
(PUNCT ",")
(ID "e")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "c")
(PUNCT ".")
(ID "close")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "serve_client")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "conn")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(LIT "\n        Handle requests from the proxies in a particular process/thread\n        ")
(NEWLINE)
(ID "util")
(PUNCT ".")
(ID "debug")
(PUNCT "(")
(LIT "starting server thread to service %r")
(PUNCT ",")
(ID "threading")
(PUNCT ".")
(ID "current_thread")
(PUNCT "(")
(PUNCT ")")
(PUNCT ".")
(ID "name")
(PUNCT ")")
(NEWLINE)
(ID "recv")
(PUNCT "=")
(ID "conn")
(PUNCT ".")
(ID "recv")
(NEWLINE)
(ID "send")
(PUNCT "=")
(ID "conn")
(PUNCT ".")
(ID "send")
(NEWLINE)
(ID "id_to_obj")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "id_to_obj")
(NEWLINE)
(KEYWORD while)
(KEYWORD not)
(ID "self")
(PUNCT ".")
(ID "stop_event")
(PUNCT ".")
(ID "is_set")
(PUNCT "(")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "methodname")
(PUNCT "=")
(ID "obj")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(ID "request")
(PUNCT "=")
(ID "recv")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(ID "ident")
(PUNCT ",")
(ID "methodname")
(PUNCT ",")
(ID "args")
(PUNCT ",")
(ID "kwds")
(PUNCT "=")
(ID "request")
(NEWLINE)
(ID "obj")
(PUNCT ",")
(ID "exposed")
(PUNCT ",")
(ID "gettypeid")
(PUNCT "=")
(ID "id_to_obj")
(PUNCT "[")
(ID "ident")
(PUNCT "]")
(NEWLINE)
(KEYWORD if)
(ID "methodname")
(KEYWORD not)
(KEYWORD in)
(ID "exposed")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD raise)
(ID "AttributeError")
(PUNCT "(")
(LIT "method %r of %r object is not in exposed=%r")
(PUNCT "%")
(PUNCT "(")
(ID "methodname")
(PUNCT ",")
(ID "type")
(PUNCT "(")
(ID "obj")
(PUNCT ")")
(PUNCT ",")
(ID "exposed")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "function")
(PUNCT "=")
(ID "getattr")
(PUNCT "(")
(ID "obj")
(PUNCT ",")
(ID "methodname")
(PUNCT ")")
(NEWLINE)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "res")
(PUNCT "=")
(ID "function")
(PUNCT "(")
(PUNCT "*")
(ID "args")
(PUNCT ",")
(PUNCT "**")
(ID "kwds")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD except)
(ID "Exception")
(KEYWORD as)
(ID "e")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "msg")
(PUNCT "=")
(PUNCT "(")
(LIT "#ERROR")
(PUNCT ",")
(ID "e")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD else)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "typeid")
(PUNCT "=")
(ID "gettypeid")
(KEYWORD and)
(ID "gettypeid")
(PUNCT ".")
(ID "get")
(PUNCT "(")
(ID "methodname")
(PUNCT ",")
(KEYWORD None)
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "typeid")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "rident")
(PUNCT ",")
(ID "rexposed")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "create")
(PUNCT "(")
(ID "conn")
(PUNCT ",")
(ID "typeid")
(PUNCT ",")
(ID "res")
(PUNCT ")")
(NEWLINE)
(ID "token")
(PUNCT "=")
(ID "Token")
(PUNCT "(")
(ID "typeid")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "address")
(PUNCT ",")
(ID "rident")
(PUNCT ")")
(NEWLINE)
(ID "msg")
(PUNCT "=")
(PUNCT "(")
(LIT "#PROXY")
(PUNCT ",")
(PUNCT "(")
(ID "rexposed")
(PUNCT ",")
(ID "token")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD else)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "msg")
(PUNCT "=")
(PUNCT "(")
(LIT "#RETURN")
(PUNCT ",")
(ID "res")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(DEDENT)
(KEYWORD except)
(ID "AttributeError")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD if)
(ID "methodname")
(KEYWORD is)
(KEYWORD None)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "msg")
(PUNCT "=")
(PUNCT "(")
(LIT "#TRACEBACK")
(PUNCT ",")
(ID "format_exc")
(PUNCT "(")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD else)
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "fallback_func")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "fallback_mapping")
(PUNCT "[")
(ID "methodname")
(PUNCT "]")
(NEWLINE)
(ID "result")
(PUNCT "=")
(ID "fallback_func")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "conn")
(PUNCT ",")
(ID "ident")
(PUNCT ",")
(ID "obj")
(PUNCT ",")
(PUNCT "*")
(ID "args")
(PUNCT ",")
(PUNCT "**")
(ID "kwds")
(PUNCT ")")
(NEWLINE)
(ID "msg")
(PUNCT "=")
(PUNCT "(")
(LIT "#RETURN")
(PUNCT ",")
(ID "result")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD except)
(ID "Exception")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "msg")
(PUNCT "=")
(PUNCT "(")
(LIT "#TRACEBACK")
(PUNCT ",")
(ID "format_exc")
(PUNCT "(")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(DEDENT)
(KEYWORD except)
(ID "EOFError")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "util")
(PUNCT ".")
(ID "debug")
(PUNCT "(")
(LIT "got EOF -- exiting thread serving %r")
(PUNCT ",")
(ID "threading")
(PUNCT ".")
(ID "current_thread")
(PUNCT "(")
(PUNCT ")")
(PUNCT ".")
(ID "name")
(PUNCT ")")
(NEWLINE)
(ID "sys")
(PUNCT ".")
(ID "exit")
(PUNCT "(")
(LIT 0)
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD except)
(ID "Exception")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "msg")
(PUNCT "=")
(PUNCT "(")
(LIT "#TRACEBACK")
(PUNCT ",")
(ID "format_exc")
(PUNCT "(")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "send")
(PUNCT "(")
(ID "msg")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD except)
(ID "Exception")
(KEYWORD as)
(ID "e")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "send")
(PUNCT "(")
(PUNCT "(")
(LIT "#UNSERIALIZABLE")
(PUNCT ",")
(ID "repr")
(PUNCT "(")
(ID "msg")
(PUNCT ")")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD except)
(ID "Exception")
(KEYWORD as)
(ID "e")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "util")
(PUNCT ".")
(ID "info")
(PUNCT "(")
(LIT "exception in thread serving %r")
(PUNCT ",")
(ID "threading")
(PUNCT ".")
(ID "current_thread")
(PUNCT "(")
(PUNCT ")")
(PUNCT ".")
(ID "name")
(PUNCT ")")
(NEWLINE)
(ID "util")
(PUNCT ".")
(ID "info")
(PUNCT "(")
(LIT " ... message was %r")
(PUNCT ",")
(ID "msg")
(PUNCT ")")
(NEWLINE)
(ID "util")
(PUNCT ".")
(ID "info")
(PUNCT "(")
(LIT " ... exception was %r")
(PUNCT ",")
(ID "e")
(PUNCT ")")
(NEWLINE)
(ID "conn")
(PUNCT ".")
(ID "close")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(ID "sys")
(PUNCT ".")
(ID "exit")
(PUNCT "(")
(LIT 1)
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(DEDENT)
(KEYWORD def)
(ID "fallback_getvalue")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "conn")
(PUNCT ",")
(ID "ident")
(PUNCT ",")
(ID "obj")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "obj")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "fallback_str")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "conn")
(PUNCT ",")
(ID "ident")
(PUNCT ",")
(ID "obj")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "str")
(PUNCT "(")
(ID "obj")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "fallback_repr")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "conn")
(PUNCT ",")
(ID "ident")
(PUNCT ",")
(ID "obj")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "repr")
(PUNCT "(")
(ID "obj")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "fallback_mapping")
(PUNCT "=")
(PUNCT "{")
(LIT "__str__")
(PUNCT ":")
(ID "fallback_str")
(PUNCT ",")
(LIT "__repr__")
(PUNCT ":")
(ID "fallback_repr")
(PUNCT ",")
(LIT "#GETVALUE")
(PUNCT ":")
(ID "fallback_getvalue")
(PUNCT "}")
(NEWLINE)
(KEYWORD def)
(ID "dummy")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "c")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD pass)
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "debug_info")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "c")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(LIT "\n        Return some info --- useful to spot problems with refcounting\n        ")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "mutex")
(PUNCT ".")
(ID "acquire")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "result")
(PUNCT "=")
(PUNCT "[")
(PUNCT "]")
(NEWLINE)
(ID "keys")
(PUNCT "=")
(ID "list")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "id_to_obj")
(PUNCT ".")
(ID "keys")
(PUNCT "(")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(ID "keys")
(PUNCT ".")
(ID "sort")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(KEYWORD for)
(ID "ident")
(KEYWORD in)
(ID "keys")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD if)
(ID "ident")
(PUNCT "!=")
(LIT "0")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "result")
(PUNCT ".")
(ID "append")
(PUNCT "(")
(LIT "  %s:       refcount=%s\n    %s")
(PUNCT "%")
(PUNCT "(")
(ID "ident")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "id_to_refcount")
(PUNCT "[")
(ID "ident")
(PUNCT "]")
(PUNCT ",")
(ID "str")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "id_to_obj")
(PUNCT "[")
(ID "ident")
(PUNCT "]")
(PUNCT "[")
(LIT 0)
(PUNCT "]")
(PUNCT ")")
(PUNCT "[")
(PUNCT ":")
(LIT 75)
(PUNCT "]")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD return)
(LIT "\n")
(PUNCT ".")
(ID "join")
(PUNCT "(")
(ID "result")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD finally)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "mutex")
(PUNCT ".")
(ID "release")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD def)
(ID "number_of_objects")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "c")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(LIT "\n        Number of shared objects\n        ")
(NEWLINE)
(KEYWORD return)
(ID "len")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "id_to_obj")
(PUNCT ")")
(PUNCT "-")
(LIT 1)
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "shutdown")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "c")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(LIT "\n        Shutdown this process\n        ")
(NEWLINE)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "util")
(PUNCT ".")
(ID "debug")
(PUNCT "(")
(LIT "manager received shutdown message")
(PUNCT ")")
(NEWLINE)
(ID "c")
(PUNCT ".")
(ID "send")
(PUNCT "(")
(PUNCT "(")
(LIT "#RETURN")
(PUNCT ",")
(KEYWORD None)
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD except)
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD import)
(ID "traceback")
(NEWLINE)
(ID "traceback")
(PUNCT ".")
(ID "print_exc")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD finally)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "stop_event")
(PUNCT ".")
(ID "set")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD def)
(ID "create")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "c")
(PUNCT ",")
(ID "typeid")
(PUNCT ",")
(PUNCT "*")
(ID "args")
(PUNCT ",")
(PUNCT "**")
(ID "kwds")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(LIT "\n        Create a new shared object and return its id\n        ")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "mutex")
(PUNCT ".")
(ID "acquire")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "callable")
(PUNCT ",")
(ID "exposed")
(PUNCT ",")
(ID "method_to_typeid")
(PUNCT ",")
(ID "proxytype")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "registry")
(PUNCT "[")
(ID "typeid")
(PUNCT "]")
(NEWLINE)
(KEYWORD if)
(ID "callable")
(KEYWORD is)
(KEYWORD None)
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD assert)
(ID "len")
(PUNCT "(")
(ID "args")
(PUNCT ")")
(PUNCT "==")
(LIT 1)
(KEYWORD and)
(KEYWORD not)
(ID "kwds")
(NEWLINE)
(ID "obj")
(PUNCT "=")
(ID "args")
(PUNCT "[")
(LIT 0)
(PUNCT "]")
(NEWLINE)
(DEDENT)
(KEYWORD else)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "obj")
(PUNCT "=")
(ID "callable")
(PUNCT "(")
(PUNCT "*")
(ID "args")
(PUNCT ",")
(PUNCT "**")
(ID "kwds")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD if)
(ID "exposed")
(KEYWORD is)
(KEYWORD None)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "exposed")
(PUNCT "=")
(ID "public_methods")
(PUNCT "(")
(ID "obj")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD if)
(ID "method_to_typeid")
(KEYWORD is)
(KEYWORD not)
(KEYWORD None)
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD assert)
(ID "type")
(PUNCT "(")
(ID "method_to_typeid")
(PUNCT ")")
(KEYWORD is)
(ID "dict")
(NEWLINE)
(ID "exposed")
(PUNCT "=")
(ID "list")
(PUNCT "(")
(ID "exposed")
(PUNCT ")")
(PUNCT "+")
(ID "list")
(PUNCT "(")
(ID "method_to_typeid")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "ident")
(PUNCT "=")
(LIT "%x")
(PUNCT "%")
(ID "id")
(PUNCT "(")
(ID "obj")
(PUNCT ")")
(NEWLINE)
(ID "util")
(PUNCT ".")
(ID "debug")
(PUNCT "(")
(LIT "%r callable returned object with id %r")
(PUNCT ",")
(ID "typeid")
(PUNCT ",")
(ID "ident")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "id_to_obj")
(PUNCT "[")
(ID "ident")
(PUNCT "]")
(PUNCT "=")
(PUNCT "(")
(ID "obj")
(PUNCT ",")
(ID "set")
(PUNCT "(")
(ID "exposed")
(PUNCT ")")
(PUNCT ",")
(ID "method_to_typeid")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "ident")
(KEYWORD not)
(KEYWORD in)
(ID "self")
(PUNCT ".")
(ID "id_to_refcount")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "id_to_refcount")
(PUNCT "[")
(ID "ident")
(PUNCT "]")
(PUNCT "=")
(LIT 0)
(NEWLINE)
(DEDENT)
(ID "self")
(PUNCT ".")
(ID "incref")
(PUNCT "(")
(ID "c")
(PUNCT ",")
(ID "ident")
(PUNCT ")")
(NEWLINE)
(KEYWORD return)
(ID "ident")
(PUNCT ",")
(ID "tuple")
(PUNCT "(")
(ID "exposed")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD finally)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "mutex")
(PUNCT ".")
(ID "release")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD def)
(ID "get_methods")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "c")
(PUNCT ",")
(ID "token")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(LIT "\n        Return the methods of the shared object indicated by token\n        ")
(NEWLINE)
(KEYWORD return)
(ID "tuple")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "id_to_obj")
(PUNCT "[")
(ID "token")
(PUNCT ".")
(ID "id")
(PUNCT "]")
(PUNCT "[")
(LIT 1)
(PUNCT "]")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "accept_connection")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "c")
(PUNCT ",")
(ID "name")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(LIT "\n        Spawn a new thread to serve this connection\n        ")
(NEWLINE)
(ID "threading")
(PUNCT ".")
(ID "current_thread")
(PUNCT "(")
(PUNCT ")")
(PUNCT ".")
(ID "name")
(PUNCT "=")
(ID "name")
(NEWLINE)
(ID "c")
(PUNCT ".")
(ID "send")
(PUNCT "(")
(PUNCT "(")
(LIT "#RETURN")
(PUNCT ",")
(KEYWORD None)
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "serve_client")
(PUNCT "(")
(ID "c")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "incref")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "c")
(PUNCT ",")
(ID "ident")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "mutex")
(PUNCT ".")
(ID "acquire")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "id_to_refcount")
(PUNCT "[")
(ID "ident")
(PUNCT "]")
(PUNCT "+=")
(LIT 1)
(NEWLINE)
(DEDENT)
(KEYWORD finally)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "mutex")
(PUNCT ".")
(ID "release")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD def)
(ID "decref")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "c")
(PUNCT ",")
(ID "ident")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "mutex")
(PUNCT ".")
(ID "acquire")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD assert)
(ID "self")
(PUNCT ".")
(ID "id_to_refcount")
(PUNCT "[")
(ID "ident")
(PUNCT "]")
(PUNCT ">=")
(LIT 1)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "id_to_refcount")
(PUNCT "[")
(ID "ident")
(PUNCT "]")
(PUNCT "-=")
(LIT 1)
(NEWLINE)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "id_to_refcount")
(PUNCT "[")
(ID "ident")
(PUNCT "]")
(PUNCT "==")
(LIT 0)
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD del)
(ID "self")
(PUNCT ".")
(ID "id_to_obj")
(PUNCT "[")
(ID "ident")
(PUNCT "]")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "id_to_refcount")
(PUNCT "[")
(ID "ident")
(PUNCT "]")
(NEWLINE)
(ID "util")
(PUNCT ".")
(ID "debug")
(PUNCT "(")
(LIT "disposing of obj with id %r")
(PUNCT ",")
(ID "ident")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD finally)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "mutex")
(PUNCT ".")
(ID "release")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(DEDENT)
(KEYWORD class)
(ID "State")
(PUNCT "(")
(ID "object")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "__slots__")
(PUNCT "=")
(PUNCT "[")
(LIT "value")
(PUNCT "]")
(NEWLINE)
(ID "INITIAL")
(PUNCT "=")
(LIT 0)
(NEWLINE)
(ID "STARTED")
(PUNCT "=")
(LIT 1)
(NEWLINE)
(ID "SHUTDOWN")
(PUNCT "=")
(LIT 2)
(NEWLINE)
(DEDENT)
(ID "listener_client")
(PUNCT "=")
(PUNCT "{")
(LIT "pickle")
(PUNCT ":")
(PUNCT "(")
(ID "connection")
(PUNCT ".")
(ID "Listener")
(PUNCT ",")
(ID "connection")
(PUNCT ".")
(ID "Client")
(PUNCT ")")
(PUNCT ",")
(LIT "xmlrpclib")
(PUNCT ":")
(PUNCT "(")
(ID "connection")
(PUNCT ".")
(ID "XmlListener")
(PUNCT ",")
(ID "connection")
(PUNCT ".")
(ID "XmlClient")
(PUNCT ")")
(PUNCT "}")
(NEWLINE)
(KEYWORD class)
(ID "BaseManager")
(PUNCT "(")
(ID "object")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(LIT "\n    Base class for managers\n    ")
(NEWLINE)
(ID "_registry")
(PUNCT "=")
(PUNCT "{")
(PUNCT "}")
(NEWLINE)
(ID "_Server")
(PUNCT "=")
(ID "Server")
(NEWLINE)
(KEYWORD def)
(ID "__init__")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "address")
(PUNCT "=")
(KEYWORD None)
(PUNCT ",")
(ID "authkey")
(PUNCT "=")
(KEYWORD None)
(PUNCT ",")
(ID "serializer")
(PUNCT "=")
(LIT "pickle")
(PUNCT ",")
(ID "ctx")
(PUNCT "=")
(KEYWORD None)
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD if)
(ID "authkey")
(KEYWORD is)
(KEYWORD None)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "authkey")
(PUNCT "=")
(ID "process")
(PUNCT ".")
(ID "current_process")
(PUNCT "(")
(PUNCT ")")
(PUNCT ".")
(ID "authkey")
(NEWLINE)
(DEDENT)
(ID "self")
(PUNCT ".")
(ID "_address")
(PUNCT "=")
(ID "address")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_authkey")
(PUNCT "=")
(ID "process")
(PUNCT ".")
(ID "AuthenticationString")
(PUNCT "(")
(ID "authkey")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_state")
(PUNCT "=")
(ID "State")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_state")
(PUNCT ".")
(ID "value")
(PUNCT "=")
(ID "State")
(PUNCT ".")
(ID "INITIAL")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_serializer")
(PUNCT "=")
(ID "serializer")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_Listener")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_Client")
(PUNCT "=")
(ID "listener_client")
(PUNCT "[")
(ID "serializer")
(PUNCT "]")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_ctx")
(PUNCT "=")
(ID "ctx")
(KEYWORD or)
(ID "get_context")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "get_server")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(LIT "\n        Return server object with serve_forever() method and address attribute\n        ")
(NEWLINE)
(KEYWORD assert)
(ID "self")
(PUNCT ".")
(ID "_state")
(PUNCT ".")
(ID "value")
(PUNCT "==")
(ID "State")
(PUNCT ".")
(ID "INITIAL")
(NEWLINE)
(KEYWORD return)
(ID "Server")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "_registry")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_address")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_authkey")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_serializer")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "connect")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(LIT "\n        Connect manager object to the server process\n        ")
(NEWLINE)
(ID "Listener")
(PUNCT ",")
(ID "Client")
(PUNCT "=")
(ID "listener_client")
(PUNCT "[")
(ID "self")
(PUNCT ".")
(ID "_serializer")
(PUNCT "]")
(NEWLINE)
(ID "conn")
(PUNCT "=")
(ID "Client")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "_address")
(PUNCT ",")
(ID "authkey")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "_authkey")
(PUNCT ")")
(NEWLINE)
(ID "dispatch")
(PUNCT "(")
(ID "conn")
(PUNCT ",")
(KEYWORD None)
(PUNCT ",")
(LIT "dummy")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_state")
(PUNCT ".")
(ID "value")
(PUNCT "=")
(ID "State")
(PUNCT ".")
(ID "STARTED")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "start")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "initializer")
(PUNCT "=")
(KEYWORD None)
(PUNCT ",")
(ID "initargs")
(PUNCT "=")
(PUNCT "(")
(PUNCT ")")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(LIT "\n        Spawn a server process for this manager object\n        ")
(NEWLINE)
(KEYWORD assert)
(ID "self")
(PUNCT ".")
(ID "_state")
(PUNCT ".")
(ID "value")
(PUNCT "==")
(ID "State")
(PUNCT ".")
(ID "INITIAL")
(NEWLINE)
(KEYWORD if)
(ID "initializer")
(KEYWORD is)
(KEYWORD not)
(KEYWORD None)
(KEYWORD and)
(KEYWORD not)
(ID "callable")
(PUNCT "(")
(ID "initializer")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD raise)
(ID "TypeError")
(PUNCT "(")
(LIT "initializer must be a callable")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "reader")
(PUNCT ",")
(ID "writer")
(PUNCT "=")
(ID "connection")
(PUNCT ".")
(ID "Pipe")
(PUNCT "(")
(ID "duplex")
(PUNCT "=")
(KEYWORD False)
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_process")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "_ctx")
(PUNCT ".")
(ID "Process")
(PUNCT "(")
(ID "target")
(PUNCT "=")
(ID "type")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ".")
(ID "_run_server")
(PUNCT ",")
(ID "args")
(PUNCT "=")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "_registry")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_address")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_authkey")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_serializer")
(PUNCT ",")
(ID "writer")
(PUNCT ",")
(ID "initializer")
(PUNCT ",")
(ID "initargs")
(PUNCT ")")
(PUNCT ",")
(PUNCT ")")
(NEWLINE)
(ID "ident")
(PUNCT "=")
(LIT ":")
(PUNCT ".")
(ID "join")
(PUNCT "(")
(ID "str")
(PUNCT "(")
(ID "i")
(PUNCT ")")
(KEYWORD for)
(ID "i")
(KEYWORD in)
(ID "self")
(PUNCT ".")
(ID "_process")
(PUNCT ".")
(ID "_identity")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_process")
(PUNCT ".")
(ID "name")
(PUNCT "=")
(ID "type")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ".")
(ID "__name__")
(PUNCT "+")
(LIT "-")
(PUNCT "+")
(ID "ident")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_process")
(PUNCT ".")
(ID "start")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(ID "writer")
(PUNCT ".")
(ID "close")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_address")
(PUNCT "=")
(ID "reader")
(PUNCT ".")
(ID "recv")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(ID "reader")
(PUNCT ".")
(ID "close")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_state")
(PUNCT ".")
(ID "value")
(PUNCT "=")
(ID "State")
(PUNCT ".")
(ID "STARTED")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "shutdown")
(PUNCT "=")
(ID "util")
(PUNCT ".")
(ID "Finalize")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "type")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ".")
(ID "_finalize_manager")
(PUNCT ",")
(ID "args")
(PUNCT "=")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "_process")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_address")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_authkey")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_state")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_Client")
(PUNCT ")")
(PUNCT ",")
(ID "exitpriority")
(PUNCT "=")
(LIT 0)
(PUNCT ")")
(NEWLINE)
(DEDENT)
(PUNCT "@")
(ID "classmethod")
(NEWLINE)
(KEYWORD def)
(ID "_run_server")
(PUNCT "(")
(ID "cls")
(PUNCT ",")
(ID "registry")
(PUNCT ",")
(ID "address")
(PUNCT ",")
(ID "authkey")
(PUNCT ",")
(ID "serializer")
(PUNCT ",")
(ID "writer")
(PUNCT ",")
(ID "initializer")
(PUNCT "=")
(KEYWORD None)
(PUNCT ",")
(ID "initargs")
(PUNCT "=")
(PUNCT "(")
(PUNCT ")")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(LIT "\n        Create a server, report its address and run it\n        ")
(NEWLINE)
(KEYWORD if)
(ID "initializer")
(KEYWORD is)
(KEYWORD not)
(KEYWORD None)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "initializer")
(PUNCT "(")
(PUNCT "*")
(ID "initargs")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "server")
(PUNCT "=")
(ID "cls")
(PUNCT ".")
(ID "_Server")
(PUNCT "(")
(ID "registry")
(PUNCT ",")
(ID "address")
(PUNCT ",")
(ID "authkey")
(PUNCT ",")
(ID "serializer")
(PUNCT ")")
(NEWLINE)
(ID "writer")
(PUNCT ".")
(ID "send")
(PUNCT "(")
(ID "server")
(PUNCT ".")
(ID "address")
(PUNCT ")")
(NEWLINE)
(ID "writer")
(PUNCT ".")
(ID "close")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(ID "util")
(PUNCT ".")
(ID "info")
(PUNCT "(")
(LIT "manager serving at %r")
(PUNCT ",")
(ID "server")
(PUNCT ".")
(ID "address")
(PUNCT ")")
(NEWLINE)
(ID "server")
(PUNCT ".")
(ID "serve_forever")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "_create")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "typeid")
(PUNCT ",")
(PUNCT "*")
(ID "args")
(PUNCT ",")
(PUNCT "**")
(ID "kwds")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(LIT "\n        Create a new shared object; return the token and exposed tuple\n        ")
(NEWLINE)
(KEYWORD assert)
(ID "self")
(PUNCT ".")
(ID "_state")
(PUNCT ".")
(ID "value")
(PUNCT "==")
(ID "State")
(PUNCT ".")
(ID "STARTED")
(PUNCT ",")
(LIT "server not yet started")
(NEWLINE)
(ID "conn")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "_Client")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "_address")
(PUNCT ",")
(ID "authkey")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "_authkey")
(PUNCT ")")
(NEWLINE)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "id")
(PUNCT ",")
(ID "exposed")
(PUNCT "=")
(ID "dispatch")
(PUNCT "(")
(ID "conn")
(PUNCT ",")
(KEYWORD None)
(PUNCT ",")
(LIT "create")
(PUNCT ",")
(PUNCT "(")
(ID "typeid")
(PUNCT ",")
(PUNCT ")")
(PUNCT "+")
(ID "args")
(PUNCT ",")
(ID "kwds")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD finally)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "conn")
(PUNCT ".")
(ID "close")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD return)
(ID "Token")
(PUNCT "(")
(ID "typeid")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_address")
(PUNCT ",")
(ID "id")
(PUNCT ")")
(PUNCT ",")
(ID "exposed")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "join")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "timeout")
(PUNCT "=")
(KEYWORD None)
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(LIT "\n        Join the manager process (if it has been spawned)\n        ")
(NEWLINE)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "_process")
(KEYWORD is)
(KEYWORD not)
(KEYWORD None)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_process")
(PUNCT ".")
(ID "join")
(PUNCT "(")
(ID "timeout")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(KEYWORD not)
(ID "self")
(PUNCT ".")
(ID "_process")
(PUNCT ".")
(ID "is_alive")
(PUNCT "(")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_process")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(DEDENT)
(DEDENT)
(DEDENT)
(KEYWORD def)
(ID "_debug_info")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(LIT "\n        Return some info about the servers shared objects and connections\n        ")
(NEWLINE)
(ID "conn")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "_Client")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "_address")
(PUNCT ",")
(ID "authkey")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "_authkey")
(PUNCT ")")
(NEWLINE)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "dispatch")
(PUNCT "(")
(ID "conn")
(PUNCT ",")
(KEYWORD None)
(PUNCT ",")
(LIT "debug_info")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD finally)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "conn")
(PUNCT ".")
(ID "close")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD def)
(ID "_number_of_objects")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(LIT "\n        Return the number of shared objects\n        ")
(NEWLINE)
(ID "conn")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "_Client")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "_address")
(PUNCT ",")
(ID "authkey")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "_authkey")
(PUNCT ")")
(NEWLINE)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "dispatch")
(PUNCT "(")
(ID "conn")
(PUNCT ",")
(KEYWORD None)
(PUNCT ",")
(LIT "number_of_objects")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD finally)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "conn")
(PUNCT ".")
(ID "close")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD def)
(ID "__enter__")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "_state")
(PUNCT ".")
(ID "value")
(PUNCT "==")
(ID "State")
(PUNCT ".")
(ID "INITIAL")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "start")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD assert)
(ID "self")
(PUNCT ".")
(ID "_state")
(PUNCT ".")
(ID "value")
(PUNCT "==")
(ID "State")
(PUNCT ".")
(ID "STARTED")
(NEWLINE)
(KEYWORD return)
(ID "self")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "__exit__")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "exc_type")
(PUNCT ",")
(ID "exc_val")
(PUNCT ",")
(ID "exc_tb")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "shutdown")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(PUNCT "@")
(ID "staticmethod")
(NEWLINE)
(KEYWORD def)
(ID "_finalize_manager")
(PUNCT "(")
(ID "process")
(PUNCT ",")
(ID "address")
(PUNCT ",")
(ID "authkey")
(PUNCT ",")
(ID "state")
(PUNCT ",")
(ID "_Client")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(LIT "\n        Shutdown the manager process; will be registered as a finalizer\n        ")
(NEWLINE)
(KEYWORD if)
(ID "process")
(PUNCT ".")
(ID "is_alive")
(PUNCT "(")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "util")
(PUNCT ".")
(ID "info")
(PUNCT "(")
(LIT "sending shutdown message to manager")
(PUNCT ")")
(NEWLINE)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "conn")
(PUNCT "=")
(ID "_Client")
(PUNCT "(")
(ID "address")
(PUNCT ",")
(ID "authkey")
(PUNCT "=")
(ID "authkey")
(PUNCT ")")
(NEWLINE)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "dispatch")
(PUNCT "(")
(ID "conn")
(PUNCT ",")
(KEYWORD None)
(PUNCT ",")
(LIT "shutdown")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD finally)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "conn")
(PUNCT ".")
(ID "close")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD except)
(ID "Exception")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD pass)
(NEWLINE)
(DEDENT)
(ID "process")
(PUNCT ".")
(ID "join")
(PUNCT "(")
(ID "timeout")
(PUNCT "=")
(LIT 1.0)
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "process")
(PUNCT ".")
(ID "is_alive")
(PUNCT "(")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "util")
(PUNCT ".")
(ID "info")
(PUNCT "(")
(LIT "manager still alive")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "hasattr")
(PUNCT "(")
(ID "process")
(PUNCT ",")
(LIT "terminate")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "util")
(PUNCT ".")
(ID "info")
(PUNCT "(")
(LIT "trying to `terminate()` manager process")
(PUNCT ")")
(NEWLINE)
(ID "process")
(PUNCT ".")
(ID "terminate")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(ID "process")
(PUNCT ".")
(ID "join")
(PUNCT "(")
(ID "timeout")
(PUNCT "=")
(LIT 0.1)
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "process")
(PUNCT ".")
(ID "is_alive")
(PUNCT "(")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "util")
(PUNCT ".")
(ID "info")
(PUNCT "(")
(LIT "manager still alive after terminate")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(DEDENT)
(DEDENT)
(ID "state")
(PUNCT ".")
(ID "value")
(PUNCT "=")
(ID "State")
(PUNCT ".")
(ID "SHUTDOWN")
(NEWLINE)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD del)
(ID "BaseProxy")
(PUNCT ".")
(ID "_address_to_local")
(PUNCT "[")
(ID "address")
(PUNCT "]")
(NEWLINE)
(DEDENT)
(KEYWORD except)
(ID "KeyError")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD pass)
(NEWLINE)
(DEDENT)
(DEDENT)
(ID "address")
(PUNCT "=")
(ID "property")
(PUNCT "(")
(KEYWORD lambda)
(ID "self")
(PUNCT ":")
(ID "self")
(PUNCT ".")
(ID "_address")
(PUNCT ")")
(NEWLINE)
(PUNCT "@")
(ID "classmethod")
(NEWLINE)
(KEYWORD def)
(ID "register")
(PUNCT "(")
(ID "cls")
(PUNCT ",")
(ID "typeid")
(PUNCT ",")
(ID "callable")
(PUNCT "=")
(KEYWORD None)
(PUNCT ",")
(ID "proxytype")
(PUNCT "=")
(KEYWORD None)
(PUNCT ",")
(ID "exposed")
(PUNCT "=")
(KEYWORD None)
(PUNCT ",")
(ID "method_to_typeid")
(PUNCT "=")
(KEYWORD None)
(PUNCT ",")
(ID "create_method")
(PUNCT "=")
(KEYWORD True)
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(LIT "\n        Register a typeid with the manager type\n        ")
(NEWLINE)
(KEYWORD if)
(LIT "_registry")
(KEYWORD not)
(KEYWORD in)
(ID "cls")
(PUNCT ".")
(ID "__dict__")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "cls")
(PUNCT ".")
(ID "_registry")
(PUNCT "=")
(ID "cls")
(PUNCT ".")
(ID "_registry")
(PUNCT ".")
(ID "copy")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD if)
(ID "proxytype")
(KEYWORD is)
(KEYWORD None)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "proxytype")
(PUNCT "=")
(ID "AutoProxy")
(NEWLINE)
(DEDENT)
(ID "exposed")
(PUNCT "=")
(ID "exposed")
(KEYWORD or)
(ID "getattr")
(PUNCT "(")
(ID "proxytype")
(PUNCT ",")
(LIT "_exposed_")
(PUNCT ",")
(KEYWORD None)
(PUNCT ")")
(NEWLINE)
(ID "method_to_typeid")
(PUNCT "=")
(ID "method_to_typeid")
(KEYWORD or)
(ID "getattr")
(PUNCT "(")
(ID "proxytype")
(PUNCT ",")
(LIT "_method_to_typeid_")
(PUNCT ",")
(KEYWORD None)
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "method_to_typeid")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD for)
(ID "key")
(PUNCT ",")
(ID "value")
(KEYWORD in)
(ID "list")
(PUNCT "(")
(ID "method_to_typeid")
(PUNCT ".")
(ID "items")
(PUNCT "(")
(PUNCT ")")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD assert)
(ID "type")
(PUNCT "(")
(ID "key")
(PUNCT ")")
(KEYWORD is)
(ID "str")
(PUNCT ",")
(LIT "%r is not a string")
(PUNCT "%")
(ID "key")
(NEWLINE)
(KEYWORD assert)
(ID "type")
(PUNCT "(")
(ID "value")
(PUNCT ")")
(KEYWORD is)
(ID "str")
(PUNCT ",")
(LIT "%r is not a string")
(PUNCT "%")
(ID "value")
(NEWLINE)
(DEDENT)
(DEDENT)
(ID "cls")
(PUNCT ".")
(ID "_registry")
(PUNCT "[")
(ID "typeid")
(PUNCT "]")
(PUNCT "=")
(PUNCT "(")
(ID "callable")
(PUNCT ",")
(ID "exposed")
(PUNCT ",")
(ID "method_to_typeid")
(PUNCT ",")
(ID "proxytype")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "create_method")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD def)
(ID "temp")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(PUNCT "*")
(ID "args")
(PUNCT ",")
(PUNCT "**")
(ID "kwds")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "util")
(PUNCT ".")
(ID "debug")
(PUNCT "(")
(LIT "requesting creation of a shared %r object")
(PUNCT ",")
(ID "typeid")
(PUNCT ")")
(NEWLINE)
(ID "token")
(PUNCT ",")
(ID "exp")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "_create")
(PUNCT "(")
(ID "typeid")
(PUNCT ",")
(PUNCT "*")
(ID "args")
(PUNCT ",")
(PUNCT "**")
(ID "kwds")
(PUNCT ")")
(NEWLINE)
(ID "proxy")
(PUNCT "=")
(ID "proxytype")
(PUNCT "(")
(ID "token")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_serializer")
(PUNCT ",")
(ID "manager")
(PUNCT "=")
(ID "self")
(PUNCT ",")
(ID "authkey")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "_authkey")
(PUNCT ",")
(ID "exposed")
(PUNCT "=")
(ID "exp")
(PUNCT ")")
(NEWLINE)
(ID "conn")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "_Client")
(PUNCT "(")
(ID "token")
(PUNCT ".")
(ID "address")
(PUNCT ",")
(ID "authkey")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "_authkey")
(PUNCT ")")
(NEWLINE)
(ID "dispatch")
(PUNCT "(")
(ID "conn")
(PUNCT ",")
(KEYWORD None)
(PUNCT ",")
(LIT "decref")
(PUNCT ",")
(PUNCT "(")
(ID "token")
(PUNCT ".")
(ID "id")
(PUNCT ",")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(KEYWORD return)
(ID "proxy")
(NEWLINE)
(DEDENT)
(ID "temp")
(PUNCT ".")
(ID "__name__")
(PUNCT "=")
(ID "typeid")
(NEWLINE)
(ID "setattr")
(PUNCT "(")
(ID "cls")
(PUNCT ",")
(ID "typeid")
(PUNCT ",")
(ID "temp")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(DEDENT)
(KEYWORD class)
(ID "ProcessLocalSet")
(PUNCT "(")
(ID "set")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD def)
(ID "__init__")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "util")
(PUNCT ".")
(ID "register_after_fork")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(KEYWORD lambda)
(ID "obj")
(PUNCT ":")
(ID "obj")
(PUNCT ".")
(ID "clear")
(PUNCT "(")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "__reduce__")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "type")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD class)
(ID "BaseProxy")
(PUNCT "(")
(ID "object")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(LIT "\n    A base for proxies of shared objects\n    ")
(NEWLINE)
(ID "_address_to_local")
(PUNCT "=")
(PUNCT "{")
(PUNCT "}")
(NEWLINE)
(ID "_mutex")
(PUNCT "=")
(ID "util")
(PUNCT ".")
(ID "ForkAwareThreadLock")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(KEYWORD def)
(ID "__init__")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "token")
(PUNCT ",")
(ID "serializer")
(PUNCT ",")
(ID "manager")
(PUNCT "=")
(KEYWORD None)
(PUNCT ",")
(ID "authkey")
(PUNCT "=")
(KEYWORD None)
(PUNCT ",")
(ID "exposed")
(PUNCT "=")
(KEYWORD None)
(PUNCT ",")
(ID "incref")
(PUNCT "=")
(KEYWORD True)
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "BaseProxy")
(PUNCT ".")
(ID "_mutex")
(PUNCT ".")
(ID "acquire")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "tls_idset")
(PUNCT "=")
(ID "BaseProxy")
(PUNCT ".")
(ID "_address_to_local")
(PUNCT ".")
(ID "get")
(PUNCT "(")
(ID "token")
(PUNCT ".")
(ID "address")
(PUNCT ",")
(KEYWORD None)
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "tls_idset")
(KEYWORD is)
(KEYWORD None)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "tls_idset")
(PUNCT "=")
(ID "util")
(PUNCT ".")
(ID "ForkAwareLocal")
(PUNCT "(")
(PUNCT ")")
(PUNCT ",")
(ID "ProcessLocalSet")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(ID "BaseProxy")
(PUNCT ".")
(ID "_address_to_local")
(PUNCT "[")
(ID "token")
(PUNCT ".")
(ID "address")
(PUNCT "]")
(PUNCT "=")
(ID "tls_idset")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD finally)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "BaseProxy")
(PUNCT ".")
(ID "_mutex")
(PUNCT ".")
(ID "release")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "self")
(PUNCT ".")
(ID "_tls")
(PUNCT "=")
(ID "tls_idset")
(PUNCT "[")
(LIT 0)
(PUNCT "]")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_idset")
(PUNCT "=")
(ID "tls_idset")
(PUNCT "[")
(LIT 1)
(PUNCT "]")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_token")
(PUNCT "=")
(ID "token")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_id")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "_token")
(PUNCT ".")
(ID "id")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_manager")
(PUNCT "=")
(ID "manager")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_serializer")
(PUNCT "=")
(ID "serializer")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_Client")
(PUNCT "=")
(ID "listener_client")
(PUNCT "[")
(ID "serializer")
(PUNCT "]")
(PUNCT "[")
(LIT 1)
(PUNCT "]")
(NEWLINE)
(KEYWORD if)
(ID "authkey")
(KEYWORD is)
(KEYWORD not)
(KEYWORD None)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_authkey")
(PUNCT "=")
(ID "process")
(PUNCT ".")
(ID "AuthenticationString")
(PUNCT "(")
(ID "authkey")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD elif)
(ID "self")
(PUNCT ".")
(ID "_manager")
(KEYWORD is)
(KEYWORD not)
(KEYWORD None)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_authkey")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "_manager")
(PUNCT ".")
(ID "_authkey")
(NEWLINE)
(DEDENT)
(KEYWORD else)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_authkey")
(PUNCT "=")
(ID "process")
(PUNCT ".")
(ID "current_process")
(PUNCT "(")
(PUNCT ")")
(PUNCT ".")
(ID "authkey")
(NEWLINE)
(DEDENT)
(KEYWORD if)
(ID "incref")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_incref")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "util")
(PUNCT ".")
(ID "register_after_fork")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "BaseProxy")
(PUNCT ".")
(ID "_after_fork")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "_connect")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "util")
(PUNCT ".")
(ID "debug")
(PUNCT "(")
(LIT "making connection to manager")
(PUNCT ")")
(NEWLINE)
(ID "name")
(PUNCT "=")
(ID "process")
(PUNCT ".")
(ID "current_process")
(PUNCT "(")
(PUNCT ")")
(PUNCT ".")
(ID "name")
(NEWLINE)
(KEYWORD if)
(ID "threading")
(PUNCT ".")
(ID "current_thread")
(PUNCT "(")
(PUNCT ")")
(PUNCT ".")
(ID "name")
(PUNCT "!=")
(LIT "MainThread")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "name")
(PUNCT "+=")
(LIT "|")
(PUNCT "+")
(ID "threading")
(PUNCT ".")
(ID "current_thread")
(PUNCT "(")
(PUNCT ")")
(PUNCT ".")
(ID "name")
(NEWLINE)
(DEDENT)
(ID "conn")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "_Client")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "_token")
(PUNCT ".")
(ID "address")
(PUNCT ",")
(ID "authkey")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "_authkey")
(PUNCT ")")
(NEWLINE)
(ID "dispatch")
(PUNCT "(")
(ID "conn")
(PUNCT ",")
(KEYWORD None)
(PUNCT ",")
(LIT "accept_connection")
(PUNCT ",")
(PUNCT "(")
(ID "name")
(PUNCT ",")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_tls")
(PUNCT ".")
(ID "connection")
(PUNCT "=")
(ID "conn")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "_callmethod")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "methodname")
(PUNCT ",")
(ID "args")
(PUNCT "=")
(PUNCT "(")
(PUNCT ")")
(PUNCT ",")
(ID "kwds")
(PUNCT "=")
(PUNCT "{")
(PUNCT "}")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(LIT "\n        Try to call a method of the referrent and return a copy of the result\n        ")
(NEWLINE)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "conn")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "_tls")
(PUNCT ".")
(ID "connection")
(NEWLINE)
(DEDENT)
(KEYWORD except)
(ID "AttributeError")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "util")
(PUNCT ".")
(ID "debug")
(PUNCT "(")
(LIT "thread %r does not own a connection")
(PUNCT ",")
(ID "threading")
(PUNCT ".")
(ID "current_thread")
(PUNCT "(")
(PUNCT ")")
(PUNCT ".")
(ID "name")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_connect")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(ID "conn")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "_tls")
(PUNCT ".")
(ID "connection")
(NEWLINE)
(DEDENT)
(ID "conn")
(PUNCT ".")
(ID "send")
(PUNCT "(")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "_id")
(PUNCT ",")
(ID "methodname")
(PUNCT ",")
(ID "args")
(PUNCT ",")
(ID "kwds")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(ID "kind")
(PUNCT ",")
(ID "result")
(PUNCT "=")
(ID "conn")
(PUNCT ".")
(ID "recv")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "kind")
(PUNCT "==")
(LIT "#RETURN")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "result")
(NEWLINE)
(DEDENT)
(KEYWORD elif)
(ID "kind")
(PUNCT "==")
(LIT "#PROXY")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "exposed")
(PUNCT ",")
(ID "token")
(PUNCT "=")
(ID "result")
(NEWLINE)
(ID "proxytype")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "_manager")
(PUNCT ".")
(ID "_registry")
(PUNCT "[")
(ID "token")
(PUNCT ".")
(ID "typeid")
(PUNCT "]")
(PUNCT "[")
(PUNCT "-")
(LIT 1)
(PUNCT "]")
(NEWLINE)
(ID "token")
(PUNCT ".")
(ID "address")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "_token")
(PUNCT ".")
(ID "address")
(NEWLINE)
(ID "proxy")
(PUNCT "=")
(ID "proxytype")
(PUNCT "(")
(ID "token")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_serializer")
(PUNCT ",")
(ID "manager")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "_manager")
(PUNCT ",")
(ID "authkey")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "_authkey")
(PUNCT ",")
(ID "exposed")
(PUNCT "=")
(ID "exposed")
(PUNCT ")")
(NEWLINE)
(ID "conn")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "_Client")
(PUNCT "(")
(ID "token")
(PUNCT ".")
(ID "address")
(PUNCT ",")
(ID "authkey")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "_authkey")
(PUNCT ")")
(NEWLINE)
(ID "dispatch")
(PUNCT "(")
(ID "conn")
(PUNCT ",")
(KEYWORD None)
(PUNCT ",")
(LIT "decref")
(PUNCT ",")
(PUNCT "(")
(ID "token")
(PUNCT ".")
(ID "id")
(PUNCT ",")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(KEYWORD return)
(ID "proxy")
(NEWLINE)
(DEDENT)
(KEYWORD raise)
(ID "convert_to_error")
(PUNCT "(")
(ID "kind")
(PUNCT ",")
(ID "result")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "_getvalue")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(LIT "\n        Get a copy of the value of the referent\n        ")
(NEWLINE)
(KEYWORD return)
(ID "self")
(PUNCT ".")
(ID "_callmethod")
(PUNCT "(")
(LIT "#GETVALUE")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "_incref")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "conn")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "_Client")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "_token")
(PUNCT ".")
(ID "address")
(PUNCT ",")
(ID "authkey")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "_authkey")
(PUNCT ")")
(NEWLINE)
(ID "dispatch")
(PUNCT "(")
(ID "conn")
(PUNCT ",")
(KEYWORD None)
(PUNCT ",")
(LIT "incref")
(PUNCT ",")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "_id")
(PUNCT ",")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(ID "util")
(PUNCT ".")
(ID "debug")
(PUNCT "(")
(LIT "INCREF %r")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_token")
(PUNCT ".")
(ID "id")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_idset")
(PUNCT ".")
(ID "add")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "_id")
(PUNCT ")")
(NEWLINE)
(ID "state")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "_manager")
(KEYWORD and)
(ID "self")
(PUNCT ".")
(ID "_manager")
(PUNCT ".")
(ID "_state")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_close")
(PUNCT "=")
(ID "util")
(PUNCT ".")
(ID "Finalize")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "BaseProxy")
(PUNCT ".")
(ID "_decref")
(PUNCT ",")
(ID "args")
(PUNCT "=")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "_token")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_authkey")
(PUNCT ",")
(ID "state")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_tls")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_idset")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_Client")
(PUNCT ")")
(PUNCT ",")
(ID "exitpriority")
(PUNCT "=")
(LIT 10)
(PUNCT ")")
(NEWLINE)
(DEDENT)
(PUNCT "@")
(ID "staticmethod")
(NEWLINE)
(KEYWORD def)
(ID "_decref")
(PUNCT "(")
(ID "token")
(PUNCT ",")
(ID "authkey")
(PUNCT ",")
(ID "state")
(PUNCT ",")
(ID "tls")
(PUNCT ",")
(ID "idset")
(PUNCT ",")
(ID "_Client")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "idset")
(PUNCT ".")
(ID "discard")
(PUNCT "(")
(ID "token")
(PUNCT ".")
(ID "id")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "state")
(KEYWORD is)
(KEYWORD None)
(KEYWORD or)
(ID "state")
(PUNCT ".")
(ID "value")
(PUNCT "==")
(ID "State")
(PUNCT ".")
(ID "STARTED")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "util")
(PUNCT ".")
(ID "debug")
(PUNCT "(")
(LIT "DECREF %r")
(PUNCT ",")
(ID "token")
(PUNCT ".")
(ID "id")
(PUNCT ")")
(NEWLINE)
(ID "conn")
(PUNCT "=")
(ID "_Client")
(PUNCT "(")
(ID "token")
(PUNCT ".")
(ID "address")
(PUNCT ",")
(ID "authkey")
(PUNCT "=")
(ID "authkey")
(PUNCT ")")
(NEWLINE)
(ID "dispatch")
(PUNCT "(")
(ID "conn")
(PUNCT ",")
(KEYWORD None)
(PUNCT ",")
(LIT "decref")
(PUNCT ",")
(PUNCT "(")
(ID "token")
(PUNCT ".")
(ID "id")
(PUNCT ",")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD except)
(ID "Exception")
(KEYWORD as)
(ID "e")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "util")
(PUNCT ".")
(ID "debug")
(PUNCT "(")
(LIT "... decref failed %s")
(PUNCT ",")
(ID "e")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD else)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "util")
(PUNCT ".")
(ID "debug")
(PUNCT "(")
(LIT "DECREF %r -- manager already shutdown")
(PUNCT ",")
(ID "token")
(PUNCT ".")
(ID "id")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD if)
(KEYWORD not)
(ID "idset")
(KEYWORD and)
(ID "hasattr")
(PUNCT "(")
(ID "tls")
(PUNCT ",")
(LIT "connection")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "util")
(PUNCT ".")
(ID "debug")
(PUNCT "(")
(LIT "thread %r has no more proxies so closing conn")
(PUNCT ",")
(ID "threading")
(PUNCT ".")
(ID "current_thread")
(PUNCT "(")
(PUNCT ")")
(PUNCT ".")
(ID "name")
(PUNCT ")")
(NEWLINE)
(ID "tls")
(PUNCT ".")
(ID "connection")
(PUNCT ".")
(ID "close")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(KEYWORD del)
(ID "tls")
(PUNCT ".")
(ID "connection")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD def)
(ID "_after_fork")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_manager")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_incref")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD except)
(ID "Exception")
(KEYWORD as)
(ID "e")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "util")
(PUNCT ".")
(ID "info")
(PUNCT "(")
(LIT "incref failed: %s")
(PUNCT "%")
(ID "e")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD def)
(ID "__reduce__")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "kwds")
(PUNCT "=")
(PUNCT "{")
(PUNCT "}")
(NEWLINE)
(KEYWORD if)
(ID "context")
(PUNCT ".")
(ID "get_spawning_popen")
(PUNCT "(")
(PUNCT ")")
(KEYWORD is)
(KEYWORD not)
(KEYWORD None)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "kwds")
(PUNCT "[")
(LIT "authkey")
(PUNCT "]")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "_authkey")
(NEWLINE)
(DEDENT)
(KEYWORD if)
(ID "getattr")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(LIT "_isauto")
(PUNCT ",")
(KEYWORD False)
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "kwds")
(PUNCT "[")
(LIT "exposed")
(PUNCT "]")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "_exposed_")
(NEWLINE)
(KEYWORD return)
(PUNCT "(")
(ID "RebuildProxy")
(PUNCT ",")
(PUNCT "(")
(ID "AutoProxy")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_token")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_serializer")
(PUNCT ",")
(ID "kwds")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD else)
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(PUNCT "(")
(ID "RebuildProxy")
(PUNCT ",")
(PUNCT "(")
(ID "type")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_token")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_serializer")
(PUNCT ",")
(ID "kwds")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD def)
(ID "__deepcopy__")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "memo")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "self")
(PUNCT ".")
(ID "_getvalue")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "__repr__")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(LIT "<%s object, typeid %r at %s>")
(PUNCT "%")
(PUNCT "(")
(ID "type")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ".")
(ID "__name__")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_token")
(PUNCT ".")
(ID "typeid")
(PUNCT ",")
(LIT "0x%x")
(PUNCT "%")
(ID "id")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "__str__")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(LIT "\n        Return representation of the referent (or a fall-back if that fails)\n        ")
(NEWLINE)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "self")
(PUNCT ".")
(ID "_callmethod")
(PUNCT "(")
(LIT "__repr__")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD except)
(ID "Exception")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "repr")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT "[")
(PUNCT ":")
(PUNCT "-")
(LIT 1)
(PUNCT "]")
(PUNCT "+")
(LIT "; '__str__()' failed>")
(NEWLINE)
(DEDENT)
(DEDENT)
(DEDENT)
(KEYWORD def)
(ID "RebuildProxy")
(PUNCT "(")
(ID "func")
(PUNCT ",")
(ID "token")
(PUNCT ",")
(ID "serializer")
(PUNCT ",")
(ID "kwds")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(LIT "\n    Function used for unpickling proxy objects.\n\n    If possible the shared object is returned, or otherwise a proxy for it.\n    ")
(NEWLINE)
(ID "server")
(PUNCT "=")
(ID "getattr")
(PUNCT "(")
(ID "process")
(PUNCT ".")
(ID "current_process")
(PUNCT "(")
(PUNCT ")")
(PUNCT ",")
(LIT "_manager_server")
(PUNCT ",")
(KEYWORD None)
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "server")
(KEYWORD and)
(ID "server")
(PUNCT ".")
(ID "address")
(PUNCT "==")
(ID "token")
(PUNCT ".")
(ID "address")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "server")
(PUNCT ".")
(ID "id_to_obj")
(PUNCT "[")
(ID "token")
(PUNCT ".")
(ID "id")
(PUNCT "]")
(PUNCT "[")
(LIT 0)
(PUNCT "]")
(NEWLINE)
(DEDENT)
(KEYWORD else)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "incref")
(PUNCT "=")
(PUNCT "(")
(ID "kwds")
(PUNCT ".")
(ID "pop")
(PUNCT "(")
(LIT "incref")
(PUNCT ",")
(KEYWORD True)
(PUNCT ")")
(KEYWORD and)
(KEYWORD not)
(ID "getattr")
(PUNCT "(")
(ID "process")
(PUNCT ".")
(ID "current_process")
(PUNCT "(")
(PUNCT ")")
(PUNCT ",")
(LIT "_inheriting")
(PUNCT ",")
(KEYWORD False)
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(KEYWORD return)
(ID "func")
(PUNCT "(")
(ID "token")
(PUNCT ",")
(ID "serializer")
(PUNCT ",")
(ID "incref")
(PUNCT "=")
(ID "incref")
(PUNCT ",")
(PUNCT "**")
(ID "kwds")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD def)
(ID "MakeProxyType")
(PUNCT "(")
(ID "name")
(PUNCT ",")
(ID "exposed")
(PUNCT ",")
(ID "_cache")
(PUNCT "=")
(PUNCT "{")
(PUNCT "}")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(LIT "\n    Return an proxy type whose methods are given by `exposed`\n    ")
(NEWLINE)
(ID "exposed")
(PUNCT "=")
(ID "tuple")
(PUNCT "(")
(ID "exposed")
(PUNCT ")")
(NEWLINE)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "_cache")
(PUNCT "[")
(PUNCT "(")
(ID "name")
(PUNCT ",")
(ID "exposed")
(PUNCT ")")
(PUNCT "]")
(NEWLINE)
(DEDENT)
(KEYWORD except)
(ID "KeyError")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD pass)
(NEWLINE)
(DEDENT)
(ID "dic")
(PUNCT "=")
(PUNCT "{")
(PUNCT "}")
(NEWLINE)
(KEYWORD for)
(ID "meth")
(KEYWORD in)
(ID "exposed")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "exec")
(PUNCT "(")
(LIT "def %s(self, *args, **kwds):\n        return self._callmethod(%r, args, kwds)")
(PUNCT "%")
(PUNCT "(")
(ID "meth")
(PUNCT ",")
(ID "meth")
(PUNCT ")")
(PUNCT ",")
(ID "dic")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "ProxyType")
(PUNCT "=")
(ID "type")
(PUNCT "(")
(ID "name")
(PUNCT ",")
(PUNCT "(")
(ID "BaseProxy")
(PUNCT ",")
(PUNCT ")")
(PUNCT ",")
(ID "dic")
(PUNCT ")")
(NEWLINE)
(ID "ProxyType")
(PUNCT ".")
(ID "_exposed_")
(PUNCT "=")
(ID "exposed")
(NEWLINE)
(ID "_cache")
(PUNCT "[")
(PUNCT "(")
(ID "name")
(PUNCT ",")
(ID "exposed")
(PUNCT ")")
(PUNCT "]")
(PUNCT "=")
(ID "ProxyType")
(NEWLINE)
(KEYWORD return)
(ID "ProxyType")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "AutoProxy")
(PUNCT "(")
(ID "token")
(PUNCT ",")
(ID "serializer")
(PUNCT ",")
(ID "manager")
(PUNCT "=")
(KEYWORD None)
(PUNCT ",")
(ID "authkey")
(PUNCT "=")
(KEYWORD None)
(PUNCT ",")
(ID "exposed")
(PUNCT "=")
(KEYWORD None)
(PUNCT ",")
(ID "incref")
(PUNCT "=")
(KEYWORD True)
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(LIT "\n    Return an auto-proxy for `token`\n    ")
(NEWLINE)
(ID "_Client")
(PUNCT "=")
(ID "listener_client")
(PUNCT "[")
(ID "serializer")
(PUNCT "]")
(PUNCT "[")
(LIT 1)
(PUNCT "]")
(NEWLINE)
(KEYWORD if)
(ID "exposed")
(KEYWORD is)
(KEYWORD None)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "conn")
(PUNCT "=")
(ID "_Client")
(PUNCT "(")
(ID "token")
(PUNCT ".")
(ID "address")
(PUNCT ",")
(ID "authkey")
(PUNCT "=")
(ID "authkey")
(PUNCT ")")
(NEWLINE)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "exposed")
(PUNCT "=")
(ID "dispatch")
(PUNCT "(")
(ID "conn")
(PUNCT ",")
(KEYWORD None)
(PUNCT ",")
(LIT "get_methods")
(PUNCT ",")
(PUNCT "(")
(ID "token")
(PUNCT ",")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD finally)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "conn")
(PUNCT ".")
(ID "close")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD if)
(ID "authkey")
(KEYWORD is)
(KEYWORD None)
(KEYWORD and)
(ID "manager")
(KEYWORD is)
(KEYWORD not)
(KEYWORD None)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "authkey")
(PUNCT "=")
(ID "manager")
(PUNCT ".")
(ID "_authkey")
(NEWLINE)
(DEDENT)
(KEYWORD if)
(ID "authkey")
(KEYWORD is)
(KEYWORD None)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "authkey")
(PUNCT "=")
(ID "process")
(PUNCT ".")
(ID "current_process")
(PUNCT "(")
(PUNCT ")")
(PUNCT ".")
(ID "authkey")
(NEWLINE)
(DEDENT)
(ID "ProxyType")
(PUNCT "=")
(ID "MakeProxyType")
(PUNCT "(")
(LIT "AutoProxy[%s]")
(PUNCT "%")
(ID "token")
(PUNCT ".")
(ID "typeid")
(PUNCT ",")
(ID "exposed")
(PUNCT ")")
(NEWLINE)
(ID "proxy")
(PUNCT "=")
(ID "ProxyType")
(PUNCT "(")
(ID "token")
(PUNCT ",")
(ID "serializer")
(PUNCT ",")
(ID "manager")
(PUNCT "=")
(ID "manager")
(PUNCT ",")
(ID "authkey")
(PUNCT "=")
(ID "authkey")
(PUNCT ",")
(ID "incref")
(PUNCT "=")
(ID "incref")
(PUNCT ")")
(NEWLINE)
(ID "proxy")
(PUNCT ".")
(ID "_isauto")
(PUNCT "=")
(KEYWORD True)
(NEWLINE)
(KEYWORD return)
(ID "proxy")
(NEWLINE)
(DEDENT)
(KEYWORD class)
(ID "Namespace")
(PUNCT "(")
(ID "object")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD def)
(ID "__init__")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(PUNCT "**")
(ID "kwds")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "__dict__")
(PUNCT ".")
(ID "update")
(PUNCT "(")
(ID "kwds")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "__repr__")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "items")
(PUNCT "=")
(ID "list")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "__dict__")
(PUNCT ".")
(ID "items")
(PUNCT "(")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(ID "temp")
(PUNCT "=")
(PUNCT "[")
(PUNCT "]")
(NEWLINE)
(KEYWORD for)
(ID "name")
(PUNCT ",")
(ID "value")
(KEYWORD in)
(ID "items")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD if)
(KEYWORD not)
(ID "name")
(PUNCT ".")
(ID "startswith")
(PUNCT "(")
(LIT "_")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "temp")
(PUNCT ".")
(ID "append")
(PUNCT "(")
(LIT "%s=%r")
(PUNCT "%")
(PUNCT "(")
(ID "name")
(PUNCT ",")
(ID "value")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(ID "temp")
(PUNCT ".")
(ID "sort")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(KEYWORD return)
(LIT "Namespace(%s)")
(PUNCT "%")
(ID "str")
(PUNCT ".")
(ID "join")
(PUNCT "(")
(LIT ", ")
(PUNCT ",")
(ID "temp")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD class)
(ID "Value")
(PUNCT "(")
(ID "object")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD def)
(ID "__init__")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "typecode")
(PUNCT ",")
(ID "value")
(PUNCT ",")
(ID "lock")
(PUNCT "=")
(KEYWORD True)
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_typecode")
(PUNCT "=")
(ID "typecode")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_value")
(PUNCT "=")
(ID "value")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "get")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "self")
(PUNCT ".")
(ID "_value")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "set")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "value")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_value")
(PUNCT "=")
(ID "value")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "__repr__")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(LIT "%s(%r, %r)")
(PUNCT "%")
(PUNCT "(")
(ID "type")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ".")
(ID "__name__")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_typecode")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_value")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "value")
(PUNCT "=")
(ID "property")
(PUNCT "(")
(ID "get")
(PUNCT ",")
(ID "set")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "Array")
(PUNCT "(")
(ID "typecode")
(PUNCT ",")
(ID "sequence")
(PUNCT ",")
(ID "lock")
(PUNCT "=")
(KEYWORD True)
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "array")
(PUNCT ".")
(ID "array")
(PUNCT "(")
(ID "typecode")
(PUNCT ",")
(ID "sequence")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD class)
(ID "IteratorProxy")
(PUNCT "(")
(ID "BaseProxy")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "_exposed_")
(PUNCT "=")
(PUNCT "(")
(LIT "__next__")
(PUNCT ",")
(LIT "send")
(PUNCT ",")
(LIT "throw")
(PUNCT ",")
(LIT "close")
(PUNCT ")")
(NEWLINE)
(KEYWORD def)
(ID "__iter__")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "self")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "__next__")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(PUNCT "*")
(ID "args")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "self")
(PUNCT ".")
(ID "_callmethod")
(PUNCT "(")
(LIT "__next__")
(PUNCT ",")
(ID "args")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "send")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(PUNCT "*")
(ID "args")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "self")
(PUNCT ".")
(ID "_callmethod")
(PUNCT "(")
(LIT "send")
(PUNCT ",")
(ID "args")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "throw")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(PUNCT "*")
(ID "args")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "self")
(PUNCT ".")
(ID "_callmethod")
(PUNCT "(")
(LIT "throw")
(PUNCT ",")
(ID "args")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "close")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(PUNCT "*")
(ID "args")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "self")
(PUNCT ".")
(ID "_callmethod")
(PUNCT "(")
(LIT "close")
(PUNCT ",")
(ID "args")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD class)
(ID "AcquirerProxy")
(PUNCT "(")
(ID "BaseProxy")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "_exposed_")
(PUNCT "=")
(PUNCT "(")
(LIT "acquire")
(PUNCT ",")
(LIT "release")
(PUNCT ")")
(NEWLINE)
(KEYWORD def)
(ID "acquire")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "blocking")
(PUNCT "=")
(KEYWORD True)
(PUNCT ",")
(ID "timeout")
(PUNCT "=")
(KEYWORD None)
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "args")
(PUNCT "=")
(PUNCT "(")
(ID "blocking")
(PUNCT ",")
(PUNCT ")")
(KEYWORD if)
(ID "timeout")
(KEYWORD is)
(KEYWORD None)
(KEYWORD else)
(PUNCT "(")
(ID "blocking")
(PUNCT ",")
(ID "timeout")
(PUNCT ")")
(NEWLINE)
(KEYWORD return)
(ID "self")
(PUNCT ".")
(ID "_callmethod")
(PUNCT "(")
(LIT "acquire")
(PUNCT ",")
(ID "args")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "release")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "self")
(PUNCT ".")
(ID "_callmethod")
(PUNCT "(")
(LIT "release")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "__enter__")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "self")
(PUNCT ".")
(ID "_callmethod")
(PUNCT "(")
(LIT "acquire")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "__exit__")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "exc_type")
(PUNCT ",")
(ID "exc_val")
(PUNCT ",")
(ID "exc_tb")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "self")
(PUNCT ".")
(ID "_callmethod")
(PUNCT "(")
(LIT "release")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD class)
(ID "ConditionProxy")
(PUNCT "(")
(ID "AcquirerProxy")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "_exposed_")
(PUNCT "=")
(PUNCT "(")
(LIT "acquire")
(PUNCT ",")
(LIT "release")
(PUNCT ",")
(LIT "wait")
(PUNCT ",")
(LIT "notify")
(PUNCT ",")
(LIT "notify_all")
(PUNCT ")")
(NEWLINE)
(KEYWORD def)
(ID "wait")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "timeout")
(PUNCT "=")
(KEYWORD None)
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "self")
(PUNCT ".")
(ID "_callmethod")
(PUNCT "(")
(LIT "wait")
(PUNCT ",")
(PUNCT "(")
(ID "timeout")
(PUNCT ",")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "notify")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "self")
(PUNCT ".")
(ID "_callmethod")
(PUNCT "(")
(LIT "notify")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "notify_all")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "self")
(PUNCT ".")
(ID "_callmethod")
(PUNCT "(")
(LIT "notify_all")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "wait_for")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "predicate")
(PUNCT ",")
(ID "timeout")
(PUNCT "=")
(KEYWORD None)
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "result")
(PUNCT "=")
(ID "predicate")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "result")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "result")
(NEWLINE)
(DEDENT)
(KEYWORD if)
(ID "timeout")
(KEYWORD is)
(KEYWORD not)
(KEYWORD None)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "endtime")
(PUNCT "=")
(ID "_time")
(PUNCT "(")
(PUNCT ")")
(PUNCT "+")
(ID "timeout")
(NEWLINE)
(DEDENT)
(KEYWORD else)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "endtime")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(ID "waittime")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(DEDENT)
(KEYWORD while)
(KEYWORD not)
(ID "result")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD if)
(ID "endtime")
(KEYWORD is)
(KEYWORD not)
(KEYWORD None)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "waittime")
(PUNCT "=")
(ID "endtime")
(PUNCT "-")
(ID "_time")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "waittime")
(PUNCT "<=")
(LIT 0)
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD break)
(NEWLINE)
(DEDENT)
(DEDENT)
(ID "self")
(PUNCT ".")
(ID "wait")
(PUNCT "(")
(ID "waittime")
(PUNCT ")")
(NEWLINE)
(ID "result")
(PUNCT "=")
(ID "predicate")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD return)
(ID "result")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD class)
(ID "EventProxy")
(PUNCT "(")
(ID "BaseProxy")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "_exposed_")
(PUNCT "=")
(PUNCT "(")
(LIT "is_set")
(PUNCT ",")
(LIT "set")
(PUNCT ",")
(LIT "clear")
(PUNCT ",")
(LIT "wait")
(PUNCT ")")
(NEWLINE)
(KEYWORD def)
(ID "is_set")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "self")
(PUNCT ".")
(ID "_callmethod")
(PUNCT "(")
(LIT "is_set")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "set")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "self")
(PUNCT ".")
(ID "_callmethod")
(PUNCT "(")
(LIT "set")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "clear")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "self")
(PUNCT ".")
(ID "_callmethod")
(PUNCT "(")
(LIT "clear")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "wait")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "timeout")
(PUNCT "=")
(KEYWORD None)
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "self")
(PUNCT ".")
(ID "_callmethod")
(PUNCT "(")
(LIT "wait")
(PUNCT ",")
(PUNCT "(")
(ID "timeout")
(PUNCT ",")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD class)
(ID "BarrierProxy")
(PUNCT "(")
(ID "BaseProxy")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "_exposed_")
(PUNCT "=")
(PUNCT "(")
(LIT "__getattribute__")
(PUNCT ",")
(LIT "wait")
(PUNCT ",")
(LIT "abort")
(PUNCT ",")
(LIT "reset")
(PUNCT ")")
(NEWLINE)
(KEYWORD def)
(ID "wait")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "timeout")
(PUNCT "=")
(KEYWORD None)
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "self")
(PUNCT ".")
(ID "_callmethod")
(PUNCT "(")
(LIT "wait")
(PUNCT ",")
(PUNCT "(")
(ID "timeout")
(PUNCT ",")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "abort")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "self")
(PUNCT ".")
(ID "_callmethod")
(PUNCT "(")
(LIT "abort")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "reset")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "self")
(PUNCT ".")
(ID "_callmethod")
(PUNCT "(")
(LIT "reset")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(PUNCT "@")
(ID "property")
(NEWLINE)
(KEYWORD def)
(ID "parties")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "self")
(PUNCT ".")
(ID "_callmethod")
(PUNCT "(")
(LIT "__getattribute__")
(PUNCT ",")
(PUNCT "(")
(LIT "parties")
(PUNCT ",")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(PUNCT "@")
(ID "property")
(NEWLINE)
(KEYWORD def)
(ID "n_waiting")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "self")
(PUNCT ".")
(ID "_callmethod")
(PUNCT "(")
(LIT "__getattribute__")
(PUNCT ",")
(PUNCT "(")
(LIT "n_waiting")
(PUNCT ",")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(PUNCT "@")
(ID "property")
(NEWLINE)
(KEYWORD def)
(ID "broken")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "self")
(PUNCT ".")
(ID "_callmethod")
(PUNCT "(")
(LIT "__getattribute__")
(PUNCT ",")
(PUNCT "(")
(LIT "broken")
(PUNCT ",")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD class)
(ID "NamespaceProxy")
(PUNCT "(")
(ID "BaseProxy")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "_exposed_")
(PUNCT "=")
(PUNCT "(")
(LIT "__getattribute__")
(PUNCT ",")
(LIT "__setattr__")
(PUNCT ",")
(LIT "__delattr__")
(PUNCT ")")
(NEWLINE)
(KEYWORD def)
(ID "__getattr__")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "key")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD if)
(ID "key")
(PUNCT "[")
(LIT 0)
(PUNCT "]")
(PUNCT "==")
(LIT "_")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "object")
(PUNCT ".")
(ID "__getattribute__")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "key")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "callmethod")
(PUNCT "=")
(ID "object")
(PUNCT ".")
(ID "__getattribute__")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(LIT "_callmethod")
(PUNCT ")")
(NEWLINE)
(KEYWORD return)
(ID "callmethod")
(PUNCT "(")
(LIT "__getattribute__")
(PUNCT ",")
(PUNCT "(")
(ID "key")
(PUNCT ",")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "__setattr__")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "key")
(PUNCT ",")
(ID "value")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD if)
(ID "key")
(PUNCT "[")
(LIT 0)
(PUNCT "]")
(PUNCT "==")
(LIT "_")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "object")
(PUNCT ".")
(ID "__setattr__")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "key")
(PUNCT ",")
(ID "value")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "callmethod")
(PUNCT "=")
(ID "object")
(PUNCT ".")
(ID "__getattribute__")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(LIT "_callmethod")
(PUNCT ")")
(NEWLINE)
(KEYWORD return)
(ID "callmethod")
(PUNCT "(")
(LIT "__setattr__")
(PUNCT ",")
(PUNCT "(")
(ID "key")
(PUNCT ",")
(ID "value")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "__delattr__")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "key")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD if)
(ID "key")
(PUNCT "[")
(LIT 0)
(PUNCT "]")
(PUNCT "==")
(LIT "_")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "object")
(PUNCT ".")
(ID "__delattr__")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "key")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "callmethod")
(PUNCT "=")
(ID "object")
(PUNCT ".")
(ID "__getattribute__")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(LIT "_callmethod")
(PUNCT ")")
(NEWLINE)
(KEYWORD return)
(ID "callmethod")
(PUNCT "(")
(LIT "__delattr__")
(PUNCT ",")
(PUNCT "(")
(ID "key")
(PUNCT ",")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD class)
(ID "ValueProxy")
(PUNCT "(")
(ID "BaseProxy")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "_exposed_")
(PUNCT "=")
(PUNCT "(")
(LIT "get")
(PUNCT ",")
(LIT "set")
(PUNCT ")")
(NEWLINE)
(KEYWORD def)
(ID "get")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "self")
(PUNCT ".")
(ID "_callmethod")
(PUNCT "(")
(LIT "get")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "set")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "value")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "self")
(PUNCT ".")
(ID "_callmethod")
(PUNCT "(")
(LIT "set")
(PUNCT ",")
(PUNCT "(")
(ID "value")
(PUNCT ",")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "value")
(PUNCT "=")
(ID "property")
(PUNCT "(")
(ID "get")
(PUNCT ",")
(ID "set")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "BaseListProxy")
(PUNCT "=")
(ID "MakeProxyType")
(PUNCT "(")
(LIT "BaseListProxy")
(PUNCT ",")
(PUNCT "(")
(LIT "__add__")
(PUNCT ",")
(LIT "__contains__")
(PUNCT ",")
(LIT "__delitem__")
(PUNCT ",")
(LIT "__getitem__")
(PUNCT ",")
(LIT "__len__")
(PUNCT ",")
(LIT "__mul__")
(PUNCT ",")
(LIT "__reversed__")
(PUNCT ",")
(LIT "__rmul__")
(PUNCT ",")
(LIT "__setitem__")
(PUNCT ",")
(LIT "append")
(PUNCT ",")
(LIT "count")
(PUNCT ",")
(LIT "extend")
(PUNCT ",")
(LIT "index")
(PUNCT ",")
(LIT "insert")
(PUNCT ",")
(LIT "pop")
(PUNCT ",")
(LIT "remove")
(PUNCT ",")
(LIT "reverse")
(PUNCT ",")
(LIT "sort")
(PUNCT ",")
(LIT "__imul__")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(KEYWORD class)
(ID "ListProxy")
(PUNCT "(")
(ID "BaseListProxy")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD def)
(ID "__iadd__")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "value")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_callmethod")
(PUNCT "(")
(LIT "extend")
(PUNCT ",")
(PUNCT "(")
(ID "value")
(PUNCT ",")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(KEYWORD return)
(ID "self")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "__imul__")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "value")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_callmethod")
(PUNCT "(")
(LIT "__imul__")
(PUNCT ",")
(PUNCT "(")
(ID "value")
(PUNCT ",")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(KEYWORD return)
(ID "self")
(NEWLINE)
(DEDENT)
(DEDENT)
(ID "DictProxy")
(PUNCT "=")
(ID "MakeProxyType")
(PUNCT "(")
(LIT "DictProxy")
(PUNCT ",")
(PUNCT "(")
(LIT "__contains__")
(PUNCT ",")
(LIT "__delitem__")
(PUNCT ",")
(LIT "__getitem__")
(PUNCT ",")
(LIT "__len__")
(PUNCT ",")
(LIT "__setitem__")
(PUNCT ",")
(LIT "clear")
(PUNCT ",")
(LIT "copy")
(PUNCT ",")
(LIT "get")
(PUNCT ",")
(LIT "has_key")
(PUNCT ",")
(LIT "items")
(PUNCT ",")
(LIT "keys")
(PUNCT ",")
(LIT "pop")
(PUNCT ",")
(LIT "popitem")
(PUNCT ",")
(LIT "setdefault")
(PUNCT ",")
(LIT "update")
(PUNCT ",")
(LIT "values")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(ID "ArrayProxy")
(PUNCT "=")
(ID "MakeProxyType")
(PUNCT "(")
(LIT "ArrayProxy")
(PUNCT ",")
(PUNCT "(")
(LIT "__len__")
(PUNCT ",")
(LIT "__getitem__")
(PUNCT ",")
(LIT "__setitem__")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(ID "BasePoolProxy")
(PUNCT "=")
(ID "MakeProxyType")
(PUNCT "(")
(LIT "PoolProxy")
(PUNCT ",")
(PUNCT "(")
(LIT "apply")
(PUNCT ",")
(LIT "apply_async")
(PUNCT ",")
(LIT "close")
(PUNCT ",")
(LIT "imap")
(PUNCT ",")
(LIT "imap_unordered")
(PUNCT ",")
(LIT "join")
(PUNCT ",")
(LIT "map")
(PUNCT ",")
(LIT "map_async")
(PUNCT ",")
(LIT "starmap")
(PUNCT ",")
(LIT "starmap_async")
(PUNCT ",")
(LIT "terminate")
(PUNCT ",")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(ID "BasePoolProxy")
(PUNCT ".")
(ID "_method_to_typeid_")
(PUNCT "=")
(PUNCT "{")
(LIT "apply_async")
(PUNCT ":")
(LIT "AsyncResult")
(PUNCT ",")
(LIT "map_async")
(PUNCT ":")
(LIT "AsyncResult")
(PUNCT ",")
(LIT "starmap_async")
(PUNCT ":")
(LIT "AsyncResult")
(PUNCT ",")
(LIT "imap")
(PUNCT ":")
(LIT "Iterator")
(PUNCT ",")
(LIT "imap_unordered")
(PUNCT ":")
(LIT "Iterator")
(PUNCT "}")
(NEWLINE)
(KEYWORD class)
(ID "PoolProxy")
(PUNCT "(")
(ID "BasePoolProxy")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD def)
(ID "__enter__")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "self")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "__exit__")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "exc_type")
(PUNCT ",")
(ID "exc_val")
(PUNCT ",")
(ID "exc_tb")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "terminate")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD class)
(ID "SyncManager")
(PUNCT "(")
(ID "BaseManager")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(LIT "\n    Subclass of `BaseManager` which supports a number of shared object types.\n\n    The types registered are those intended for the synchronization\n    of threads, plus `dict`, `list` and `Namespace`.\n\n    The `multiprocessing.Manager()` function creates started instances of\n    this class.\n    ")
(NEWLINE)
(DEDENT)
(ID "SyncManager")
(PUNCT ".")
(ID "register")
(PUNCT "(")
(LIT "Queue")
(PUNCT ",")
(ID "queue")
(PUNCT ".")
(ID "Queue")
(PUNCT ")")
(NEWLINE)
(ID "SyncManager")
(PUNCT ".")
(ID "register")
(PUNCT "(")
(LIT "JoinableQueue")
(PUNCT ",")
(ID "queue")
(PUNCT ".")
(ID "Queue")
(PUNCT ")")
(NEWLINE)
(ID "SyncManager")
(PUNCT ".")
(ID "register")
(PUNCT "(")
(LIT "Event")
(PUNCT ",")
(ID "threading")
(PUNCT ".")
(ID "Event")
(PUNCT ",")
(ID "EventProxy")
(PUNCT ")")
(NEWLINE)
(ID "SyncManager")
(PUNCT ".")
(ID "register")
(PUNCT "(")
(LIT "Lock")
(PUNCT ",")
(ID "threading")
(PUNCT ".")
(ID "Lock")
(PUNCT ",")
(ID "AcquirerProxy")
(PUNCT ")")
(NEWLINE)
(ID "SyncManager")
(PUNCT ".")
(ID "register")
(PUNCT "(")
(LIT "RLock")
(PUNCT ",")
(ID "threading")
(PUNCT ".")
(ID "RLock")
(PUNCT ",")
(ID "AcquirerProxy")
(PUNCT ")")
(NEWLINE)
(ID "SyncManager")
(PUNCT ".")
(ID "register")
(PUNCT "(")
(LIT "Semaphore")
(PUNCT ",")
(ID "threading")
(PUNCT ".")
(ID "Semaphore")
(PUNCT ",")
(ID "AcquirerProxy")
(PUNCT ")")
(NEWLINE)
(ID "SyncManager")
(PUNCT ".")
(ID "register")
(PUNCT "(")
(LIT "BoundedSemaphore")
(PUNCT ",")
(ID "threading")
(PUNCT ".")
(ID "BoundedSemaphore")
(PUNCT ",")
(ID "AcquirerProxy")
(PUNCT ")")
(NEWLINE)
(ID "SyncManager")
(PUNCT ".")
(ID "register")
(PUNCT "(")
(LIT "Condition")
(PUNCT ",")
(ID "threading")
(PUNCT ".")
(ID "Condition")
(PUNCT ",")
(ID "ConditionProxy")
(PUNCT ")")
(NEWLINE)
(ID "SyncManager")
(PUNCT ".")
(ID "register")
(PUNCT "(")
(LIT "Barrier")
(PUNCT ",")
(ID "threading")
(PUNCT ".")
(ID "Barrier")
(PUNCT ",")
(ID "BarrierProxy")
(PUNCT ")")
(NEWLINE)
(ID "SyncManager")
(PUNCT ".")
(ID "register")
(PUNCT "(")
(LIT "Pool")
(PUNCT ",")
(ID "pool")
(PUNCT ".")
(ID "Pool")
(PUNCT ",")
(ID "PoolProxy")
(PUNCT ")")
(NEWLINE)
(ID "SyncManager")
(PUNCT ".")
(ID "register")
(PUNCT "(")
(LIT "list")
(PUNCT ",")
(ID "list")
(PUNCT ",")
(ID "ListProxy")
(PUNCT ")")
(NEWLINE)
(ID "SyncManager")
(PUNCT ".")
(ID "register")
(PUNCT "(")
(LIT "dict")
(PUNCT ",")
(ID "dict")
(PUNCT ",")
(ID "DictProxy")
(PUNCT ")")
(NEWLINE)
(ID "SyncManager")
(PUNCT ".")
(ID "register")
(PUNCT "(")
(LIT "Value")
(PUNCT ",")
(ID "Value")
(PUNCT ",")
(ID "ValueProxy")
(PUNCT ")")
(NEWLINE)
(ID "SyncManager")
(PUNCT ".")
(ID "register")
(PUNCT "(")
(LIT "Array")
(PUNCT ",")
(ID "Array")
(PUNCT ",")
(ID "ArrayProxy")
(PUNCT ")")
(NEWLINE)
(ID "SyncManager")
(PUNCT ".")
(ID "register")
(PUNCT "(")
(LIT "Namespace")
(PUNCT ",")
(ID "Namespace")
(PUNCT ",")
(ID "NamespaceProxy")
(PUNCT ")")
(NEWLINE)
(ID "SyncManager")
(PUNCT ".")
(ID "register")
(PUNCT "(")
(LIT "Iterator")
(PUNCT ",")
(ID "proxytype")
(PUNCT "=")
(ID "IteratorProxy")
(PUNCT ",")
(ID "create_method")
(PUNCT "=")
(KEYWORD False)
(PUNCT ")")
(NEWLINE)
(ID "SyncManager")
(PUNCT ".")
(ID "register")
(PUNCT "(")
(LIT "AsyncResult")
(PUNCT ",")
(ID "create_method")
(PUNCT "=")
(KEYWORD False)
(PUNCT ")")
(NEWLINE)
(ENDMARKER)
