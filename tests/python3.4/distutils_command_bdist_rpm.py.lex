(LIT "distutils.command.bdist_rpm\n\nImplements the Distutils 'bdist_rpm' command (create RPM source and binary\ndistributions).")
(NEWLINE)
(KEYWORD import)
(ID "subprocess")
(PUNCT ",")
(ID "sys")
(PUNCT ",")
(ID "os")
(NEWLINE)
(KEYWORD from)
(ID "distutils")
(PUNCT ".")
(ID "core")
(KEYWORD import)
(ID "Command")
(NEWLINE)
(KEYWORD from)
(ID "distutils")
(PUNCT ".")
(ID "debug")
(KEYWORD import)
(ID "DEBUG")
(NEWLINE)
(KEYWORD from)
(ID "distutils")
(PUNCT ".")
(ID "util")
(KEYWORD import)
(ID "get_platform")
(NEWLINE)
(KEYWORD from)
(ID "distutils")
(PUNCT ".")
(ID "file_util")
(KEYWORD import)
(ID "write_file")
(NEWLINE)
(KEYWORD from)
(ID "distutils")
(PUNCT ".")
(ID "errors")
(KEYWORD import)
(PUNCT "*")
(NEWLINE)
(KEYWORD from)
(ID "distutils")
(PUNCT ".")
(ID "sysconfig")
(KEYWORD import)
(ID "get_python_version")
(NEWLINE)
(KEYWORD from)
(ID "distutils")
(KEYWORD import)
(ID "log")
(NEWLINE)
(KEYWORD class)
(ID "bdist_rpm")
(PUNCT "(")
(ID "Command")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "description")
(PUNCT "=")
(LIT "create an RPM distribution")
(NEWLINE)
(ID "user_options")
(PUNCT "=")
(PUNCT "[")
(PUNCT "(")
(LIT "bdist-base=")
(PUNCT ",")
(KEYWORD None)
(PUNCT ",")
(LIT "base directory for creating built distributions")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "rpm-base=")
(PUNCT ",")
(KEYWORD None)
(PUNCT ",")
(LIT "base directory for creating RPMs (defaults to \"rpm\" under ")
(LIT "--bdist-base; must be specified for RPM 2)")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "dist-dir=")
(PUNCT ",")
(LIT "d")
(PUNCT ",")
(LIT "directory to put final RPM files in ")
(LIT "(and .spec files if --spec-only)")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "python=")
(PUNCT ",")
(KEYWORD None)
(PUNCT ",")
(LIT "path to Python interpreter to hard-code in the .spec file ")
(LIT "(default: \"python\")")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "fix-python")
(PUNCT ",")
(KEYWORD None)
(PUNCT ",")
(LIT "hard-code the exact path to the current Python interpreter in ")
(LIT "the .spec file")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "spec-only")
(PUNCT ",")
(KEYWORD None)
(PUNCT ",")
(LIT "only regenerate spec file")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "source-only")
(PUNCT ",")
(KEYWORD None)
(PUNCT ",")
(LIT "only generate source RPM")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "binary-only")
(PUNCT ",")
(KEYWORD None)
(PUNCT ",")
(LIT "only generate binary RPM")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "use-bzip2")
(PUNCT ",")
(KEYWORD None)
(PUNCT ",")
(LIT "use bzip2 instead of gzip to create source distribution")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "distribution-name=")
(PUNCT ",")
(KEYWORD None)
(PUNCT ",")
(LIT "name of the (Linux) distribution to which this ")
(LIT "RPM applies (*not* the name of the module distribution!)")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "group=")
(PUNCT ",")
(KEYWORD None)
(PUNCT ",")
(LIT "package classification [default: \"Development/Libraries\"]")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "release=")
(PUNCT ",")
(KEYWORD None)
(PUNCT ",")
(LIT "RPM release number")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "serial=")
(PUNCT ",")
(KEYWORD None)
(PUNCT ",")
(LIT "RPM serial number")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "vendor=")
(PUNCT ",")
(KEYWORD None)
(PUNCT ",")
(LIT "RPM \"vendor\" (eg. \"Joe Blow <joe@example.com>\") ")
(LIT "[default: maintainer or author from setup script]")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "packager=")
(PUNCT ",")
(KEYWORD None)
(PUNCT ",")
(LIT "RPM packager (eg. \"Jane Doe <jane@example.net>\")")
(LIT "[default: vendor]")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "doc-files=")
(PUNCT ",")
(KEYWORD None)
(PUNCT ",")
(LIT "list of documentation files (space or comma-separated)")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "changelog=")
(PUNCT ",")
(KEYWORD None)
(PUNCT ",")
(LIT "RPM changelog")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "icon=")
(PUNCT ",")
(KEYWORD None)
(PUNCT ",")
(LIT "name of icon file")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "provides=")
(PUNCT ",")
(KEYWORD None)
(PUNCT ",")
(LIT "capabilities provided by this package")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "requires=")
(PUNCT ",")
(KEYWORD None)
(PUNCT ",")
(LIT "capabilities required by this package")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "conflicts=")
(PUNCT ",")
(KEYWORD None)
(PUNCT ",")
(LIT "capabilities which conflict with this package")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "build-requires=")
(PUNCT ",")
(KEYWORD None)
(PUNCT ",")
(LIT "capabilities required to build this package")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "obsoletes=")
(PUNCT ",")
(KEYWORD None)
(PUNCT ",")
(LIT "capabilities made obsolete by this package")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "no-autoreq")
(PUNCT ",")
(KEYWORD None)
(PUNCT ",")
(LIT "do not automatically calculate dependencies")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "keep-temp")
(PUNCT ",")
(LIT "k")
(PUNCT ",")
(LIT "don't clean up RPM build directory")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "no-keep-temp")
(PUNCT ",")
(KEYWORD None)
(PUNCT ",")
(LIT "clean up RPM build directory [default]")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "use-rpm-opt-flags")
(PUNCT ",")
(KEYWORD None)
(PUNCT ",")
(LIT "compile with RPM_OPT_FLAGS when building from source RPM")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "no-rpm-opt-flags")
(PUNCT ",")
(KEYWORD None)
(PUNCT ",")
(LIT "do not pass any RPM CFLAGS to compiler")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "rpm3-mode")
(PUNCT ",")
(KEYWORD None)
(PUNCT ",")
(LIT "RPM 3 compatibility mode (default)")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "rpm2-mode")
(PUNCT ",")
(KEYWORD None)
(PUNCT ",")
(LIT "RPM 2 compatibility mode")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "prep-script=")
(PUNCT ",")
(KEYWORD None)
(PUNCT ",")
(LIT "Specify a script for the PREP phase of RPM building")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "build-script=")
(PUNCT ",")
(KEYWORD None)
(PUNCT ",")
(LIT "Specify a script for the BUILD phase of RPM building")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "pre-install=")
(PUNCT ",")
(KEYWORD None)
(PUNCT ",")
(LIT "Specify a script for the pre-INSTALL phase of RPM building")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "install-script=")
(PUNCT ",")
(KEYWORD None)
(PUNCT ",")
(LIT "Specify a script for the INSTALL phase of RPM building")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "post-install=")
(PUNCT ",")
(KEYWORD None)
(PUNCT ",")
(LIT "Specify a script for the post-INSTALL phase of RPM building")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "pre-uninstall=")
(PUNCT ",")
(KEYWORD None)
(PUNCT ",")
(LIT "Specify a script for the pre-UNINSTALL phase of RPM building")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "post-uninstall=")
(PUNCT ",")
(KEYWORD None)
(PUNCT ",")
(LIT "Specify a script for the post-UNINSTALL phase of RPM building")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "clean-script=")
(PUNCT ",")
(KEYWORD None)
(PUNCT ",")
(LIT "Specify a script for the CLEAN phase of RPM building")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "verify-script=")
(PUNCT ",")
(KEYWORD None)
(PUNCT ",")
(LIT "Specify a script for the VERIFY phase of the RPM build")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "force-arch=")
(PUNCT ",")
(KEYWORD None)
(PUNCT ",")
(LIT "Force an architecture onto the RPM build process")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "quiet")
(PUNCT ",")
(LIT "q")
(PUNCT ",")
(LIT "Run the INSTALL phase of RPM building in quiet mode")
(PUNCT ")")
(PUNCT ",")
(PUNCT "]")
(NEWLINE)
(ID "boolean_options")
(PUNCT "=")
(PUNCT "[")
(LIT "keep-temp")
(PUNCT ",")
(LIT "use-rpm-opt-flags")
(PUNCT ",")
(LIT "rpm3-mode")
(PUNCT ",")
(LIT "no-autoreq")
(PUNCT ",")
(LIT "quiet")
(PUNCT "]")
(NEWLINE)
(ID "negative_opt")
(PUNCT "=")
(PUNCT "{")
(LIT "no-keep-temp")
(PUNCT ":")
(LIT "keep-temp")
(PUNCT ",")
(LIT "no-rpm-opt-flags")
(PUNCT ":")
(LIT "use-rpm-opt-flags")
(PUNCT ",")
(LIT "rpm2-mode")
(PUNCT ":")
(LIT "rpm3-mode")
(PUNCT "}")
(NEWLINE)
(KEYWORD def)
(ID "initialize_options")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "bdist_base")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "rpm_base")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "dist_dir")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "python")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "fix_python")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "spec_only")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "binary_only")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "source_only")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "use_bzip2")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "distribution_name")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "group")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "release")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "serial")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "vendor")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "packager")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "doc_files")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "changelog")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "icon")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "prep_script")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "build_script")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "install_script")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "clean_script")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "verify_script")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "pre_install")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "post_install")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "pre_uninstall")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "post_uninstall")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "prep")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "provides")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "requires")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "conflicts")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "build_requires")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "obsoletes")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "keep_temp")
(PUNCT "=")
(LIT 0)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "use_rpm_opt_flags")
(PUNCT "=")
(LIT 1)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "rpm3_mode")
(PUNCT "=")
(LIT 1)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "no_autoreq")
(PUNCT "=")
(LIT 0)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "force_arch")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "quiet")
(PUNCT "=")
(LIT 0)
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "finalize_options")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "set_undefined_options")
(PUNCT "(")
(LIT "bdist")
(PUNCT ",")
(PUNCT "(")
(LIT "bdist_base")
(PUNCT ",")
(LIT "bdist_base")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "rpm_base")
(KEYWORD is)
(KEYWORD None)
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD if)
(KEYWORD not)
(ID "self")
(PUNCT ".")
(ID "rpm3_mode")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD raise)
(ID "DistutilsOptionError")
(PUNCT "(")
(LIT "you must specify --rpm-base in RPM 2 mode")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "self")
(PUNCT ".")
(ID "rpm_base")
(PUNCT "=")
(ID "os")
(PUNCT ".")
(ID "path")
(PUNCT ".")
(ID "join")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "bdist_base")
(PUNCT ",")
(LIT "rpm")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "python")
(KEYWORD is)
(KEYWORD None)
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "fix_python")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "python")
(PUNCT "=")
(ID "sys")
(PUNCT ".")
(ID "executable")
(NEWLINE)
(DEDENT)
(KEYWORD else)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "python")
(PUNCT "=")
(LIT "python3")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD elif)
(ID "self")
(PUNCT ".")
(ID "fix_python")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD raise)
(ID "DistutilsOptionError")
(PUNCT "(")
(LIT "--python and --fix-python are mutually exclusive options")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD if)
(ID "os")
(PUNCT ".")
(ID "name")
(PUNCT "!=")
(LIT "posix")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD raise)
(ID "DistutilsPlatformError")
(PUNCT "(")
(LIT "don't know how to create RPM ")
(LIT "distributions on platform %s")
(PUNCT "%")
(ID "os")
(PUNCT ".")
(ID "name")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "binary_only")
(KEYWORD and)
(ID "self")
(PUNCT ".")
(ID "source_only")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD raise)
(ID "DistutilsOptionError")
(PUNCT "(")
(LIT "cannot supply both '--source-only' and '--binary-only'")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD if)
(KEYWORD not)
(ID "self")
(PUNCT ".")
(ID "distribution")
(PUNCT ".")
(ID "has_ext_modules")
(PUNCT "(")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "use_rpm_opt_flags")
(PUNCT "=")
(LIT 0)
(NEWLINE)
(DEDENT)
(ID "self")
(PUNCT ".")
(ID "set_undefined_options")
(PUNCT "(")
(LIT "bdist")
(PUNCT ",")
(PUNCT "(")
(LIT "dist_dir")
(PUNCT ",")
(LIT "dist_dir")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "finalize_package_data")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "finalize_package_data")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "ensure_string")
(PUNCT "(")
(LIT "group")
(PUNCT ",")
(LIT "Development/Libraries")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "ensure_string")
(PUNCT "(")
(LIT "vendor")
(PUNCT ",")
(LIT "%s <%s>")
(PUNCT "%")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "distribution")
(PUNCT ".")
(ID "get_contact")
(PUNCT "(")
(PUNCT ")")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "distribution")
(PUNCT ".")
(ID "get_contact_email")
(PUNCT "(")
(PUNCT ")")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "ensure_string")
(PUNCT "(")
(LIT "packager")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "ensure_string_list")
(PUNCT "(")
(LIT "doc_files")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "isinstance")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "doc_files")
(PUNCT ",")
(ID "list")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD for)
(ID "readme")
(KEYWORD in)
(PUNCT "(")
(LIT "README")
(PUNCT ",")
(LIT "README.txt")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD if)
(ID "os")
(PUNCT ".")
(ID "path")
(PUNCT ".")
(ID "exists")
(PUNCT "(")
(ID "readme")
(PUNCT ")")
(KEYWORD and)
(ID "readme")
(KEYWORD not)
(KEYWORD in)
(ID "self")
(PUNCT ".")
(ID "doc_files")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "doc_files")
(PUNCT ".")
(ID "append")
(PUNCT "(")
(ID "readme")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(DEDENT)
(ID "self")
(PUNCT ".")
(ID "ensure_string")
(PUNCT "(")
(LIT "release")
(PUNCT ",")
(LIT "1")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "ensure_string")
(PUNCT "(")
(LIT "serial")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "ensure_string")
(PUNCT "(")
(LIT "distribution_name")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "ensure_string")
(PUNCT "(")
(LIT "changelog")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "changelog")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "_format_changelog")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "changelog")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "ensure_filename")
(PUNCT "(")
(LIT "icon")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "ensure_filename")
(PUNCT "(")
(LIT "prep_script")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "ensure_filename")
(PUNCT "(")
(LIT "build_script")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "ensure_filename")
(PUNCT "(")
(LIT "install_script")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "ensure_filename")
(PUNCT "(")
(LIT "clean_script")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "ensure_filename")
(PUNCT "(")
(LIT "verify_script")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "ensure_filename")
(PUNCT "(")
(LIT "pre_install")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "ensure_filename")
(PUNCT "(")
(LIT "post_install")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "ensure_filename")
(PUNCT "(")
(LIT "pre_uninstall")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "ensure_filename")
(PUNCT "(")
(LIT "post_uninstall")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "ensure_string_list")
(PUNCT "(")
(LIT "provides")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "ensure_string_list")
(PUNCT "(")
(LIT "requires")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "ensure_string_list")
(PUNCT "(")
(LIT "conflicts")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "ensure_string_list")
(PUNCT "(")
(LIT "build_requires")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "ensure_string_list")
(PUNCT "(")
(LIT "obsoletes")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "ensure_string")
(PUNCT "(")
(LIT "force_arch")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "run")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD if)
(ID "DEBUG")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "print")
(PUNCT "(")
(LIT "before _get_package_data():")
(PUNCT ")")
(NEWLINE)
(ID "print")
(PUNCT "(")
(LIT "vendor =")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "vendor")
(PUNCT ")")
(NEWLINE)
(ID "print")
(PUNCT "(")
(LIT "packager =")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "packager")
(PUNCT ")")
(NEWLINE)
(ID "print")
(PUNCT "(")
(LIT "doc_files =")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "doc_files")
(PUNCT ")")
(NEWLINE)
(ID "print")
(PUNCT "(")
(LIT "changelog =")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "changelog")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "spec_only")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "spec_dir")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "dist_dir")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "mkpath")
(PUNCT "(")
(ID "spec_dir")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD else)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "rpm_dir")
(PUNCT "=")
(PUNCT "{")
(PUNCT "}")
(NEWLINE)
(KEYWORD for)
(ID "d")
(KEYWORD in)
(PUNCT "(")
(LIT "SOURCES")
(PUNCT ",")
(LIT "SPECS")
(PUNCT ",")
(LIT "BUILD")
(PUNCT ",")
(LIT "RPMS")
(PUNCT ",")
(LIT "SRPMS")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "rpm_dir")
(PUNCT "[")
(ID "d")
(PUNCT "]")
(PUNCT "=")
(ID "os")
(PUNCT ".")
(ID "path")
(PUNCT ".")
(ID "join")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "rpm_base")
(PUNCT ",")
(ID "d")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "mkpath")
(PUNCT "(")
(ID "rpm_dir")
(PUNCT "[")
(ID "d")
(PUNCT "]")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "spec_dir")
(PUNCT "=")
(ID "rpm_dir")
(PUNCT "[")
(LIT "SPECS")
(PUNCT "]")
(NEWLINE)
(DEDENT)
(ID "spec_path")
(PUNCT "=")
(ID "os")
(PUNCT ".")
(ID "path")
(PUNCT ".")
(ID "join")
(PUNCT "(")
(ID "spec_dir")
(PUNCT ",")
(LIT "%s.spec")
(PUNCT "%")
(ID "self")
(PUNCT ".")
(ID "distribution")
(PUNCT ".")
(ID "get_name")
(PUNCT "(")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "execute")
(PUNCT "(")
(ID "write_file")
(PUNCT ",")
(PUNCT "(")
(ID "spec_path")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_make_spec_file")
(PUNCT "(")
(PUNCT ")")
(PUNCT ")")
(PUNCT ",")
(LIT "writing '%s'")
(PUNCT "%")
(ID "spec_path")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "spec_only")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(NEWLINE)
(DEDENT)
(ID "saved_dist_files")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "distribution")
(PUNCT ".")
(ID "dist_files")
(PUNCT "[")
(PUNCT ":")
(PUNCT "]")
(NEWLINE)
(ID "sdist")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "reinitialize_command")
(PUNCT "(")
(LIT "sdist")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "use_bzip2")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "sdist")
(PUNCT ".")
(ID "formats")
(PUNCT "=")
(PUNCT "[")
(LIT "bztar")
(PUNCT "]")
(NEWLINE)
(DEDENT)
(KEYWORD else)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "sdist")
(PUNCT ".")
(ID "formats")
(PUNCT "=")
(PUNCT "[")
(LIT "gztar")
(PUNCT "]")
(NEWLINE)
(DEDENT)
(ID "self")
(PUNCT ".")
(ID "run_command")
(PUNCT "(")
(LIT "sdist")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "distribution")
(PUNCT ".")
(ID "dist_files")
(PUNCT "=")
(ID "saved_dist_files")
(NEWLINE)
(ID "source")
(PUNCT "=")
(ID "sdist")
(PUNCT ".")
(ID "get_archive_files")
(PUNCT "(")
(PUNCT ")")
(PUNCT "[")
(LIT 0)
(PUNCT "]")
(NEWLINE)
(ID "source_dir")
(PUNCT "=")
(ID "rpm_dir")
(PUNCT "[")
(LIT "SOURCES")
(PUNCT "]")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "copy_file")
(PUNCT "(")
(ID "source")
(PUNCT ",")
(ID "source_dir")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "icon")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD if)
(ID "os")
(PUNCT ".")
(ID "path")
(PUNCT ".")
(ID "exists")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "icon")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "copy_file")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "icon")
(PUNCT ",")
(ID "source_dir")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD else)
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD raise)
(ID "DistutilsFileError")
(PUNCT "(")
(LIT "icon file '%s' does not exist")
(PUNCT "%")
(ID "self")
(PUNCT ".")
(ID "icon")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(ID "log")
(PUNCT ".")
(ID "info")
(PUNCT "(")
(LIT "building RPMs")
(PUNCT ")")
(NEWLINE)
(ID "rpm_cmd")
(PUNCT "=")
(PUNCT "[")
(LIT "rpm")
(PUNCT "]")
(NEWLINE)
(KEYWORD if)
(ID "os")
(PUNCT ".")
(ID "path")
(PUNCT ".")
(ID "exists")
(PUNCT "(")
(LIT "/usr/bin/rpmbuild")
(PUNCT ")")
(KEYWORD or)
(ID "os")
(PUNCT ".")
(ID "path")
(PUNCT ".")
(ID "exists")
(PUNCT "(")
(LIT "/bin/rpmbuild")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "rpm_cmd")
(PUNCT "=")
(PUNCT "[")
(LIT "rpmbuild")
(PUNCT "]")
(NEWLINE)
(DEDENT)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "source_only")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "rpm_cmd")
(PUNCT ".")
(ID "append")
(PUNCT "(")
(LIT "-bs")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD elif)
(ID "self")
(PUNCT ".")
(ID "binary_only")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "rpm_cmd")
(PUNCT ".")
(ID "append")
(PUNCT "(")
(LIT "-bb")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD else)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "rpm_cmd")
(PUNCT ".")
(ID "append")
(PUNCT "(")
(LIT "-ba")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "rpm_cmd")
(PUNCT ".")
(ID "extend")
(PUNCT "(")
(PUNCT "[")
(LIT "--define")
(PUNCT ",")
(LIT "__python %s")
(PUNCT "%")
(ID "self")
(PUNCT ".")
(ID "python")
(PUNCT "]")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "rpm3_mode")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "rpm_cmd")
(PUNCT ".")
(ID "extend")
(PUNCT "(")
(PUNCT "[")
(LIT "--define")
(PUNCT ",")
(LIT "_topdir %s")
(PUNCT "%")
(ID "os")
(PUNCT ".")
(ID "path")
(PUNCT ".")
(ID "abspath")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "rpm_base")
(PUNCT ")")
(PUNCT "]")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD if)
(KEYWORD not)
(ID "self")
(PUNCT ".")
(ID "keep_temp")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "rpm_cmd")
(PUNCT ".")
(ID "append")
(PUNCT "(")
(LIT "--clean")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "quiet")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "rpm_cmd")
(PUNCT ".")
(ID "append")
(PUNCT "(")
(LIT "--quiet")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "rpm_cmd")
(PUNCT ".")
(ID "append")
(PUNCT "(")
(ID "spec_path")
(PUNCT ")")
(NEWLINE)
(ID "nvr_string")
(PUNCT "=")
(LIT "%{name}-%{version}-%{release}")
(NEWLINE)
(ID "src_rpm")
(PUNCT "=")
(ID "nvr_string")
(PUNCT "+")
(LIT ".src.rpm")
(NEWLINE)
(ID "non_src_rpm")
(PUNCT "=")
(LIT "%{arch}/")
(PUNCT "+")
(ID "nvr_string")
(PUNCT "+")
(LIT ".%{arch}.rpm")
(NEWLINE)
(ID "q_cmd")
(PUNCT "=")
(LIT "rpm -q --qf '%s %s\\n' --specfile '%s'")
(PUNCT "%")
(PUNCT "(")
(ID "src_rpm")
(PUNCT ",")
(ID "non_src_rpm")
(PUNCT ",")
(ID "spec_path")
(PUNCT ")")
(NEWLINE)
(ID "out")
(PUNCT "=")
(ID "os")
(PUNCT ".")
(ID "popen")
(PUNCT "(")
(ID "q_cmd")
(PUNCT ")")
(NEWLINE)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "binary_rpms")
(PUNCT "=")
(PUNCT "[")
(PUNCT "]")
(NEWLINE)
(ID "source_rpm")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(KEYWORD while)
(KEYWORD True)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "line")
(PUNCT "=")
(ID "out")
(PUNCT ".")
(ID "readline")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(KEYWORD not)
(ID "line")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD break)
(NEWLINE)
(DEDENT)
(ID "l")
(PUNCT "=")
(ID "line")
(PUNCT ".")
(ID "strip")
(PUNCT "(")
(PUNCT ")")
(PUNCT ".")
(ID "split")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(KEYWORD assert)
(PUNCT "(")
(ID "len")
(PUNCT "(")
(ID "l")
(PUNCT ")")
(PUNCT "==")
(LIT 2)
(PUNCT ")")
(NEWLINE)
(ID "binary_rpms")
(PUNCT ".")
(ID "append")
(PUNCT "(")
(ID "l")
(PUNCT "[")
(LIT 1)
(PUNCT "]")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "source_rpm")
(KEYWORD is)
(KEYWORD None)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "source_rpm")
(PUNCT "=")
(ID "l")
(PUNCT "[")
(LIT 0)
(PUNCT "]")
(NEWLINE)
(DEDENT)
(DEDENT)
(ID "status")
(PUNCT "=")
(ID "out")
(PUNCT ".")
(ID "close")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "status")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD raise)
(ID "DistutilsExecError")
(PUNCT "(")
(LIT "Failed to execute: %s")
(PUNCT "%")
(ID "repr")
(PUNCT "(")
(ID "q_cmd")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD finally)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "out")
(PUNCT ".")
(ID "close")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "self")
(PUNCT ".")
(ID "spawn")
(PUNCT "(")
(ID "rpm_cmd")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(KEYWORD not)
(ID "self")
(PUNCT ".")
(ID "dry_run")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "distribution")
(PUNCT ".")
(ID "has_ext_modules")
(PUNCT "(")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "pyversion")
(PUNCT "=")
(ID "get_python_version")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD else)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "pyversion")
(PUNCT "=")
(LIT "any")
(NEWLINE)
(DEDENT)
(KEYWORD if)
(KEYWORD not)
(ID "self")
(PUNCT ".")
(ID "binary_only")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "srpm")
(PUNCT "=")
(ID "os")
(PUNCT ".")
(ID "path")
(PUNCT ".")
(ID "join")
(PUNCT "(")
(ID "rpm_dir")
(PUNCT "[")
(LIT "SRPMS")
(PUNCT "]")
(PUNCT ",")
(ID "source_rpm")
(PUNCT ")")
(NEWLINE)
(KEYWORD assert)
(PUNCT "(")
(ID "os")
(PUNCT ".")
(ID "path")
(PUNCT ".")
(ID "exists")
(PUNCT "(")
(ID "srpm")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "move_file")
(PUNCT "(")
(ID "srpm")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "dist_dir")
(PUNCT ")")
(NEWLINE)
(ID "filename")
(PUNCT "=")
(ID "os")
(PUNCT ".")
(ID "path")
(PUNCT ".")
(ID "join")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "dist_dir")
(PUNCT ",")
(ID "source_rpm")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "distribution")
(PUNCT ".")
(ID "dist_files")
(PUNCT ".")
(ID "append")
(PUNCT "(")
(PUNCT "(")
(LIT "bdist_rpm")
(PUNCT ",")
(ID "pyversion")
(PUNCT ",")
(ID "filename")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD if)
(KEYWORD not)
(ID "self")
(PUNCT ".")
(ID "source_only")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD for)
(ID "rpm")
(KEYWORD in)
(ID "binary_rpms")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "rpm")
(PUNCT "=")
(ID "os")
(PUNCT ".")
(ID "path")
(PUNCT ".")
(ID "join")
(PUNCT "(")
(ID "rpm_dir")
(PUNCT "[")
(LIT "RPMS")
(PUNCT "]")
(PUNCT ",")
(ID "rpm")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "os")
(PUNCT ".")
(ID "path")
(PUNCT ".")
(ID "exists")
(PUNCT "(")
(ID "rpm")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "move_file")
(PUNCT "(")
(ID "rpm")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "dist_dir")
(PUNCT ")")
(NEWLINE)
(ID "filename")
(PUNCT "=")
(ID "os")
(PUNCT ".")
(ID "path")
(PUNCT ".")
(ID "join")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "dist_dir")
(PUNCT ",")
(ID "os")
(PUNCT ".")
(ID "path")
(PUNCT ".")
(ID "basename")
(PUNCT "(")
(ID "rpm")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "distribution")
(PUNCT ".")
(ID "dist_files")
(PUNCT ".")
(ID "append")
(PUNCT "(")
(PUNCT "(")
(LIT "bdist_rpm")
(PUNCT ",")
(ID "pyversion")
(PUNCT ",")
(ID "filename")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(DEDENT)
(DEDENT)
(DEDENT)
(KEYWORD def)
(ID "_dist_path")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "path")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "os")
(PUNCT ".")
(ID "path")
(PUNCT ".")
(ID "join")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "dist_dir")
(PUNCT ",")
(ID "os")
(PUNCT ".")
(ID "path")
(PUNCT ".")
(ID "basename")
(PUNCT "(")
(ID "path")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "_make_spec_file")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(LIT "Generate the text of an RPM spec file and return it as a\n        list of strings (one per line).\n        ")
(NEWLINE)
(ID "spec_file")
(PUNCT "=")
(PUNCT "[")
(LIT "%define name ")
(PUNCT "+")
(ID "self")
(PUNCT ".")
(ID "distribution")
(PUNCT ".")
(ID "get_name")
(PUNCT "(")
(PUNCT ")")
(PUNCT ",")
(LIT "%define version ")
(PUNCT "+")
(ID "self")
(PUNCT ".")
(ID "distribution")
(PUNCT ".")
(ID "get_version")
(PUNCT "(")
(PUNCT ")")
(PUNCT ".")
(ID "replace")
(PUNCT "(")
(LIT "-")
(PUNCT ",")
(LIT "_")
(PUNCT ")")
(PUNCT ",")
(LIT "%define unmangled_version ")
(PUNCT "+")
(ID "self")
(PUNCT ".")
(ID "distribution")
(PUNCT ".")
(ID "get_version")
(PUNCT "(")
(PUNCT ")")
(PUNCT ",")
(LIT "%define release ")
(PUNCT "+")
(ID "self")
(PUNCT ".")
(ID "release")
(PUNCT ".")
(ID "replace")
(PUNCT "(")
(LIT "-")
(PUNCT ",")
(LIT "_")
(PUNCT ")")
(PUNCT ",")
(LIT "")
(PUNCT ",")
(LIT "Summary: ")
(PUNCT "+")
(ID "self")
(PUNCT ".")
(ID "distribution")
(PUNCT ".")
(ID "get_description")
(PUNCT "(")
(PUNCT ")")
(PUNCT ",")
(PUNCT "]")
(NEWLINE)
(ID "vendor_hook")
(PUNCT "=")
(ID "subprocess")
(PUNCT ".")
(ID "getoutput")
(PUNCT "(")
(LIT "rpm --eval %{__os_install_post}")
(PUNCT ")")
(NEWLINE)
(ID "vendor_hook")
(PUNCT "=")
(LIT "\n")
(PUNCT ".")
(ID "join")
(PUNCT "(")
(PUNCT "[")
(LIT "  %s \\")
(PUNCT "%")
(ID "line")
(PUNCT ".")
(ID "strip")
(PUNCT "(")
(PUNCT ")")
(KEYWORD for)
(ID "line")
(KEYWORD in)
(ID "vendor_hook")
(PUNCT ".")
(ID "splitlines")
(PUNCT "(")
(PUNCT ")")
(PUNCT "]")
(PUNCT ")")
(NEWLINE)
(ID "problem")
(PUNCT "=")
(LIT "brp-python-bytecompile \\\n")
(NEWLINE)
(ID "fixed")
(PUNCT "=")
(LIT "brp-python-bytecompile %{__python} \\\n")
(NEWLINE)
(ID "fixed_hook")
(PUNCT "=")
(ID "vendor_hook")
(PUNCT ".")
(ID "replace")
(PUNCT "(")
(ID "problem")
(PUNCT ",")
(ID "fixed")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "fixed_hook")
(PUNCT "!=")
(ID "vendor_hook")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "spec_file")
(PUNCT ".")
(ID "append")
(PUNCT "(")
(LIT "# Workaround for http://bugs.python.org/issue14443")
(PUNCT ")")
(NEWLINE)
(ID "spec_file")
(PUNCT ".")
(ID "append")
(PUNCT "(")
(LIT "%define __os_install_post ")
(PUNCT "+")
(ID "fixed_hook")
(PUNCT "+")
(LIT "\n")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "spec_file")
(PUNCT ".")
(ID "extend")
(PUNCT "(")
(PUNCT "[")
(LIT "Name: %{name}")
(PUNCT ",")
(LIT "Version: %{version}")
(PUNCT ",")
(LIT "Release: %{release}")
(PUNCT ",")
(PUNCT "]")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "use_bzip2")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "spec_file")
(PUNCT ".")
(ID "append")
(PUNCT "(")
(LIT "Source0: %{name}-%{unmangled_version}.tar.bz2")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD else)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "spec_file")
(PUNCT ".")
(ID "append")
(PUNCT "(")
(LIT "Source0: %{name}-%{unmangled_version}.tar.gz")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "spec_file")
(PUNCT ".")
(ID "extend")
(PUNCT "(")
(PUNCT "[")
(LIT "License: ")
(PUNCT "+")
(ID "self")
(PUNCT ".")
(ID "distribution")
(PUNCT ".")
(ID "get_license")
(PUNCT "(")
(PUNCT ")")
(PUNCT ",")
(LIT "Group: ")
(PUNCT "+")
(ID "self")
(PUNCT ".")
(ID "group")
(PUNCT ",")
(LIT "BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-buildroot")
(PUNCT ",")
(LIT "Prefix: %{_prefix}")
(PUNCT ",")
(PUNCT "]")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(KEYWORD not)
(ID "self")
(PUNCT ".")
(ID "force_arch")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD if)
(KEYWORD not)
(ID "self")
(PUNCT ".")
(ID "distribution")
(PUNCT ".")
(ID "has_ext_modules")
(PUNCT "(")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "spec_file")
(PUNCT ".")
(ID "append")
(PUNCT "(")
(LIT "BuildArch: noarch")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD else)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "spec_file")
(PUNCT ".")
(ID "append")
(PUNCT "(")
(LIT "BuildArch: %s")
(PUNCT "%")
(ID "self")
(PUNCT ".")
(ID "force_arch")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD for)
(ID "field")
(KEYWORD in)
(PUNCT "(")
(LIT "Vendor")
(PUNCT ",")
(LIT "Packager")
(PUNCT ",")
(LIT "Provides")
(PUNCT ",")
(LIT "Requires")
(PUNCT ",")
(LIT "Conflicts")
(PUNCT ",")
(LIT "Obsoletes")
(PUNCT ",")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "val")
(PUNCT "=")
(ID "getattr")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "field")
(PUNCT ".")
(ID "lower")
(PUNCT "(")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "isinstance")
(PUNCT "(")
(ID "val")
(PUNCT ",")
(ID "list")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "spec_file")
(PUNCT ".")
(ID "append")
(PUNCT "(")
(LIT "%s: %s")
(PUNCT "%")
(PUNCT "(")
(ID "field")
(PUNCT ",")
(LIT " ")
(PUNCT ".")
(ID "join")
(PUNCT "(")
(ID "val")
(PUNCT ")")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD elif)
(ID "val")
(KEYWORD is)
(KEYWORD not)
(KEYWORD None)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "spec_file")
(PUNCT ".")
(ID "append")
(PUNCT "(")
(LIT "%s: %s")
(PUNCT "%")
(PUNCT "(")
(ID "field")
(PUNCT ",")
(ID "val")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "distribution")
(PUNCT ".")
(ID "get_url")
(PUNCT "(")
(PUNCT ")")
(PUNCT "!=")
(LIT "UNKNOWN")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "spec_file")
(PUNCT ".")
(ID "append")
(PUNCT "(")
(LIT "Url: ")
(PUNCT "+")
(ID "self")
(PUNCT ".")
(ID "distribution")
(PUNCT ".")
(ID "get_url")
(PUNCT "(")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "distribution_name")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "spec_file")
(PUNCT ".")
(ID "append")
(PUNCT "(")
(LIT "Distribution: ")
(PUNCT "+")
(ID "self")
(PUNCT ".")
(ID "distribution_name")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "build_requires")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "spec_file")
(PUNCT ".")
(ID "append")
(PUNCT "(")
(LIT "BuildRequires: ")
(PUNCT "+")
(LIT " ")
(PUNCT ".")
(ID "join")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "build_requires")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "icon")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "spec_file")
(PUNCT ".")
(ID "append")
(PUNCT "(")
(LIT "Icon: ")
(PUNCT "+")
(ID "os")
(PUNCT ".")
(ID "path")
(PUNCT ".")
(ID "basename")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "icon")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "no_autoreq")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "spec_file")
(PUNCT ".")
(ID "append")
(PUNCT "(")
(LIT "AutoReq: 0")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "spec_file")
(PUNCT ".")
(ID "extend")
(PUNCT "(")
(PUNCT "[")
(LIT "")
(PUNCT ",")
(LIT "%description")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "distribution")
(PUNCT ".")
(ID "get_long_description")
(PUNCT "(")
(PUNCT ")")
(PUNCT "]")
(PUNCT ")")
(NEWLINE)
(ID "def_setup_call")
(PUNCT "=")
(LIT "%s %s")
(PUNCT "%")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "python")
(PUNCT ",")
(ID "os")
(PUNCT ".")
(ID "path")
(PUNCT ".")
(ID "basename")
(PUNCT "(")
(ID "sys")
(PUNCT ".")
(ID "argv")
(PUNCT "[")
(LIT 0)
(PUNCT "]")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(ID "def_build")
(PUNCT "=")
(LIT "%s build")
(PUNCT "%")
(ID "def_setup_call")
(NEWLINE)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "use_rpm_opt_flags")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "def_build")
(PUNCT "=")
(LIT "env CFLAGS=\"$RPM_OPT_FLAGS\" ")
(PUNCT "+")
(ID "def_build")
(NEWLINE)
(DEDENT)
(ID "install_cmd")
(PUNCT "=")
(PUNCT "(")
(LIT "%s install -O1 --root=$RPM_BUILD_ROOT ")
(LIT "--record=INSTALLED_FILES")
(PUNCT ")")
(PUNCT "%")
(ID "def_setup_call")
(NEWLINE)
(ID "script_options")
(PUNCT "=")
(PUNCT "[")
(PUNCT "(")
(LIT "prep")
(PUNCT ",")
(LIT "prep_script")
(PUNCT ",")
(LIT "%setup -n %{name}-%{unmangled_version}")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "build")
(PUNCT ",")
(LIT "build_script")
(PUNCT ",")
(ID "def_build")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "install")
(PUNCT ",")
(LIT "install_script")
(PUNCT ",")
(ID "install_cmd")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "clean")
(PUNCT ",")
(LIT "clean_script")
(PUNCT ",")
(LIT "rm -rf $RPM_BUILD_ROOT")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "verifyscript")
(PUNCT ",")
(LIT "verify_script")
(PUNCT ",")
(KEYWORD None)
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "pre")
(PUNCT ",")
(LIT "pre_install")
(PUNCT ",")
(KEYWORD None)
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "post")
(PUNCT ",")
(LIT "post_install")
(PUNCT ",")
(KEYWORD None)
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "preun")
(PUNCT ",")
(LIT "pre_uninstall")
(PUNCT ",")
(KEYWORD None)
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "postun")
(PUNCT ",")
(LIT "post_uninstall")
(PUNCT ",")
(KEYWORD None)
(PUNCT ")")
(PUNCT ",")
(PUNCT "]")
(NEWLINE)
(KEYWORD for)
(PUNCT "(")
(ID "rpm_opt")
(PUNCT ",")
(ID "attr")
(PUNCT ",")
(ID "default")
(PUNCT ")")
(KEYWORD in)
(ID "script_options")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "val")
(PUNCT "=")
(ID "getattr")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "attr")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "val")
(KEYWORD or)
(ID "default")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "spec_file")
(PUNCT ".")
(ID "extend")
(PUNCT "(")
(PUNCT "[")
(LIT "")
(PUNCT ",")
(LIT "%")
(PUNCT "+")
(ID "rpm_opt")
(PUNCT ",")
(PUNCT "]")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "val")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "spec_file")
(PUNCT ".")
(ID "extend")
(PUNCT "(")
(ID "open")
(PUNCT "(")
(ID "val")
(PUNCT ",")
(LIT "r")
(PUNCT ")")
(PUNCT ".")
(ID "read")
(PUNCT "(")
(PUNCT ")")
(PUNCT ".")
(ID "split")
(PUNCT "(")
(LIT "\n")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD else)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "spec_file")
(PUNCT ".")
(ID "append")
(PUNCT "(")
(ID "default")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(DEDENT)
(ID "spec_file")
(PUNCT ".")
(ID "extend")
(PUNCT "(")
(PUNCT "[")
(LIT "")
(PUNCT ",")
(LIT "%files -f INSTALLED_FILES")
(PUNCT ",")
(LIT "%defattr(-,root,root)")
(PUNCT ",")
(PUNCT "]")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "doc_files")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "spec_file")
(PUNCT ".")
(ID "append")
(PUNCT "(")
(LIT "%doc ")
(PUNCT "+")
(LIT " ")
(PUNCT ".")
(ID "join")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "doc_files")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "changelog")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "spec_file")
(PUNCT ".")
(ID "extend")
(PUNCT "(")
(PUNCT "[")
(LIT "")
(PUNCT ",")
(LIT "%changelog")
(PUNCT ",")
(PUNCT "]")
(PUNCT ")")
(NEWLINE)
(ID "spec_file")
(PUNCT ".")
(ID "extend")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "changelog")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD return)
(ID "spec_file")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "_format_changelog")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "changelog")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(LIT "Format the changelog correctly and convert it to a list of strings\n        ")
(NEWLINE)
(KEYWORD if)
(KEYWORD not)
(ID "changelog")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "changelog")
(NEWLINE)
(DEDENT)
(ID "new_changelog")
(PUNCT "=")
(PUNCT "[")
(PUNCT "]")
(NEWLINE)
(KEYWORD for)
(ID "line")
(KEYWORD in)
(ID "changelog")
(PUNCT ".")
(ID "strip")
(PUNCT "(")
(PUNCT ")")
(PUNCT ".")
(ID "split")
(PUNCT "(")
(LIT "\n")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "line")
(PUNCT "=")
(ID "line")
(PUNCT ".")
(ID "strip")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "line")
(PUNCT "[")
(LIT 0)
(PUNCT "]")
(PUNCT "==")
(LIT "*")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "new_changelog")
(PUNCT ".")
(ID "extend")
(PUNCT "(")
(PUNCT "[")
(LIT "")
(PUNCT ",")
(ID "line")
(PUNCT "]")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD elif)
(ID "line")
(PUNCT "[")
(LIT 0)
(PUNCT "]")
(PUNCT "==")
(LIT "-")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "new_changelog")
(PUNCT ".")
(ID "append")
(PUNCT "(")
(ID "line")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD else)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "new_changelog")
(PUNCT ".")
(ID "append")
(PUNCT "(")
(LIT "  ")
(PUNCT "+")
(ID "line")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD if)
(KEYWORD not)
(ID "new_changelog")
(PUNCT "[")
(LIT 0)
(PUNCT "]")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD del)
(ID "new_changelog")
(PUNCT "[")
(LIT 0)
(PUNCT "]")
(NEWLINE)
(DEDENT)
(KEYWORD return)
(ID "new_changelog")
(NEWLINE)
(DEDENT)
(DEDENT)
(ENDMARKER)
