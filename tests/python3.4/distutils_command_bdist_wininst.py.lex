(LIT "distutils.command.bdist_wininst\n\nImplements the Distutils 'bdist_wininst' command: create a windows installer\nexe-program.")
(NEWLINE)
(KEYWORD import)
(ID "sys")
(PUNCT ",")
(ID "os")
(NEWLINE)
(KEYWORD from)
(ID "distutils")
(PUNCT ".")
(ID "core")
(KEYWORD import)
(ID "Command")
(NEWLINE)
(KEYWORD from)
(ID "distutils")
(PUNCT ".")
(ID "util")
(KEYWORD import)
(ID "get_platform")
(NEWLINE)
(KEYWORD from)
(ID "distutils")
(PUNCT ".")
(ID "dir_util")
(KEYWORD import)
(ID "create_tree")
(PUNCT ",")
(ID "remove_tree")
(NEWLINE)
(KEYWORD from)
(ID "distutils")
(PUNCT ".")
(ID "errors")
(KEYWORD import)
(PUNCT "*")
(NEWLINE)
(KEYWORD from)
(ID "distutils")
(PUNCT ".")
(ID "sysconfig")
(KEYWORD import)
(ID "get_python_version")
(NEWLINE)
(KEYWORD from)
(ID "distutils")
(KEYWORD import)
(ID "log")
(NEWLINE)
(KEYWORD class)
(ID "bdist_wininst")
(PUNCT "(")
(ID "Command")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "description")
(PUNCT "=")
(LIT "create an executable installer for MS Windows")
(NEWLINE)
(ID "user_options")
(PUNCT "=")
(PUNCT "[")
(PUNCT "(")
(LIT "bdist-dir=")
(PUNCT ",")
(KEYWORD None)
(PUNCT ",")
(LIT "temporary directory for creating the distribution")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "plat-name=")
(PUNCT ",")
(LIT "p")
(PUNCT ",")
(LIT "platform name to embed in generated filenames ")
(LIT "(default: %s)")
(PUNCT "%")
(ID "get_platform")
(PUNCT "(")
(PUNCT ")")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "keep-temp")
(PUNCT ",")
(LIT "k")
(PUNCT ",")
(LIT "keep the pseudo-installation tree around after ")
(PUNCT "+")
(LIT "creating the distribution archive")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "target-version=")
(PUNCT ",")
(KEYWORD None)
(PUNCT ",")
(LIT "require a specific python version")
(PUNCT "+")
(LIT " on the target system")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "no-target-compile")
(PUNCT ",")
(LIT "c")
(PUNCT ",")
(LIT "do not compile .py to .pyc on the target system")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "no-target-optimize")
(PUNCT ",")
(LIT "o")
(PUNCT ",")
(LIT "do not compile .py to .pyo (optimized)")
(LIT "on the target system")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "dist-dir=")
(PUNCT ",")
(LIT "d")
(PUNCT ",")
(LIT "directory to put final built distributions in")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "bitmap=")
(PUNCT ",")
(LIT "b")
(PUNCT ",")
(LIT "bitmap to use for the installer instead of python-powered logo")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "title=")
(PUNCT ",")
(LIT "t")
(PUNCT ",")
(LIT "title to display on the installer background instead of default")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "skip-build")
(PUNCT ",")
(KEYWORD None)
(PUNCT ",")
(LIT "skip rebuilding everything (for testing/debugging)")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "install-script=")
(PUNCT ",")
(KEYWORD None)
(PUNCT ",")
(LIT "basename of installation script to be run after")
(LIT "installation or before deinstallation")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "pre-install-script=")
(PUNCT ",")
(KEYWORD None)
(PUNCT ",")
(LIT "Fully qualified filename of a script to be run before ")
(LIT "any files are installed.  This script need not be in the ")
(LIT "distribution")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "user-access-control=")
(PUNCT ",")
(KEYWORD None)
(PUNCT ",")
(LIT "specify Vista's UAC handling - 'none'/default=no ")
(LIT "handling, 'auto'=use UAC if target Python installed for ")
(LIT "all users, 'force'=always use UAC")
(PUNCT ")")
(PUNCT ",")
(PUNCT "]")
(NEWLINE)
(ID "boolean_options")
(PUNCT "=")
(PUNCT "[")
(LIT "keep-temp")
(PUNCT ",")
(LIT "no-target-compile")
(PUNCT ",")
(LIT "no-target-optimize")
(PUNCT ",")
(LIT "skip-build")
(PUNCT "]")
(NEWLINE)
(KEYWORD def)
(ID "initialize_options")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "bdist_dir")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "plat_name")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "keep_temp")
(PUNCT "=")
(LIT 0)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "no_target_compile")
(PUNCT "=")
(LIT 0)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "no_target_optimize")
(PUNCT "=")
(LIT 0)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "target_version")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "dist_dir")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "bitmap")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "title")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "skip_build")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "install_script")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "pre_install_script")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "user_access_control")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "finalize_options")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "set_undefined_options")
(PUNCT "(")
(LIT "bdist")
(PUNCT ",")
(PUNCT "(")
(LIT "skip_build")
(PUNCT ",")
(LIT "skip_build")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "bdist_dir")
(KEYWORD is)
(KEYWORD None)
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "skip_build")
(KEYWORD and)
(ID "self")
(PUNCT ".")
(ID "plat_name")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "bdist")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "distribution")
(PUNCT ".")
(ID "get_command_obj")
(PUNCT "(")
(LIT "bdist")
(PUNCT ")")
(NEWLINE)
(ID "bdist")
(PUNCT ".")
(ID "plat_name")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "plat_name")
(NEWLINE)
(DEDENT)
(ID "bdist_base")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "get_finalized_command")
(PUNCT "(")
(LIT "bdist")
(PUNCT ")")
(PUNCT ".")
(ID "bdist_base")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "bdist_dir")
(PUNCT "=")
(ID "os")
(PUNCT ".")
(ID "path")
(PUNCT ".")
(ID "join")
(PUNCT "(")
(ID "bdist_base")
(PUNCT ",")
(LIT "wininst")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD if)
(KEYWORD not)
(ID "self")
(PUNCT ".")
(ID "target_version")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "target_version")
(PUNCT "=")
(LIT "")
(NEWLINE)
(DEDENT)
(KEYWORD if)
(KEYWORD not)
(ID "self")
(PUNCT ".")
(ID "skip_build")
(KEYWORD and)
(ID "self")
(PUNCT ".")
(ID "distribution")
(PUNCT ".")
(ID "has_ext_modules")
(PUNCT "(")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "short_version")
(PUNCT "=")
(ID "get_python_version")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "target_version")
(KEYWORD and)
(ID "self")
(PUNCT ".")
(ID "target_version")
(PUNCT "!=")
(ID "short_version")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD raise)
(ID "DistutilsOptionError")
(PUNCT "(")
(LIT "target version can only be %s, or the '--skip-build'")
(LIT " option must be specified")
(PUNCT "%")
(PUNCT "(")
(ID "short_version")
(PUNCT ",")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "self")
(PUNCT ".")
(ID "target_version")
(PUNCT "=")
(ID "short_version")
(NEWLINE)
(DEDENT)
(ID "self")
(PUNCT ".")
(ID "set_undefined_options")
(PUNCT "(")
(LIT "bdist")
(PUNCT ",")
(PUNCT "(")
(LIT "dist_dir")
(PUNCT ",")
(LIT "dist_dir")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "plat_name")
(PUNCT ",")
(LIT "plat_name")
(PUNCT ")")
(PUNCT ",")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "install_script")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD for)
(ID "script")
(KEYWORD in)
(ID "self")
(PUNCT ".")
(ID "distribution")
(PUNCT ".")
(ID "scripts")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "install_script")
(PUNCT "==")
(ID "os")
(PUNCT ".")
(ID "path")
(PUNCT ".")
(ID "basename")
(PUNCT "(")
(ID "script")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD break)
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD else)
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD raise)
(ID "DistutilsOptionError")
(PUNCT "(")
(LIT "install_script '%s' not found in scripts")
(PUNCT "%")
(ID "self")
(PUNCT ".")
(ID "install_script")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(DEDENT)
(KEYWORD def)
(ID "run")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD if)
(PUNCT "(")
(ID "sys")
(PUNCT ".")
(ID "platform")
(PUNCT "!=")
(LIT "win32")
(KEYWORD and)
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "distribution")
(PUNCT ".")
(ID "has_ext_modules")
(PUNCT "(")
(PUNCT ")")
(KEYWORD or)
(ID "self")
(PUNCT ".")
(ID "distribution")
(PUNCT ".")
(ID "has_c_libraries")
(PUNCT "(")
(PUNCT ")")
(PUNCT ")")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD raise)
(ID "DistutilsPlatformError")
(PUNCT "(")
(LIT "distribution contains extensions and/or C libraries; ")
(LIT "must be compiled on a Windows 32 platform")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD if)
(KEYWORD not)
(ID "self")
(PUNCT ".")
(ID "skip_build")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "run_command")
(PUNCT "(")
(LIT "build")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "install")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "reinitialize_command")
(PUNCT "(")
(LIT "install")
(PUNCT ",")
(ID "reinit_subcommands")
(PUNCT "=")
(LIT 1)
(PUNCT ")")
(NEWLINE)
(ID "install")
(PUNCT ".")
(ID "root")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "bdist_dir")
(NEWLINE)
(ID "install")
(PUNCT ".")
(ID "skip_build")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "skip_build")
(NEWLINE)
(ID "install")
(PUNCT ".")
(ID "warn_dir")
(PUNCT "=")
(LIT 0)
(NEWLINE)
(ID "install")
(PUNCT ".")
(ID "plat_name")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "plat_name")
(NEWLINE)
(ID "install_lib")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "reinitialize_command")
(PUNCT "(")
(LIT "install_lib")
(PUNCT ")")
(NEWLINE)
(ID "install_lib")
(PUNCT ".")
(ID "compile")
(PUNCT "=")
(LIT 0)
(NEWLINE)
(ID "install_lib")
(PUNCT ".")
(ID "optimize")
(PUNCT "=")
(LIT 0)
(NEWLINE)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "distribution")
(PUNCT ".")
(ID "has_ext_modules")
(PUNCT "(")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "target_version")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "target_version")
(NEWLINE)
(KEYWORD if)
(KEYWORD not)
(ID "target_version")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD assert)
(ID "self")
(PUNCT ".")
(ID "skip_build")
(PUNCT ",")
(LIT "Should have already checked this")
(NEWLINE)
(ID "target_version")
(PUNCT "=")
(ID "sys")
(PUNCT ".")
(ID "version")
(PUNCT "[")
(LIT 0)
(PUNCT ":")
(LIT 3)
(PUNCT "]")
(NEWLINE)
(DEDENT)
(ID "plat_specifier")
(PUNCT "=")
(LIT ".%s-%s")
(PUNCT "%")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "plat_name")
(PUNCT ",")
(ID "target_version")
(PUNCT ")")
(NEWLINE)
(ID "build")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "get_finalized_command")
(PUNCT "(")
(LIT "build")
(PUNCT ")")
(NEWLINE)
(ID "build")
(PUNCT ".")
(ID "build_lib")
(PUNCT "=")
(ID "os")
(PUNCT ".")
(ID "path")
(PUNCT ".")
(ID "join")
(PUNCT "(")
(ID "build")
(PUNCT ".")
(ID "build_base")
(PUNCT ",")
(LIT "lib")
(PUNCT "+")
(ID "plat_specifier")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD for)
(ID "key")
(KEYWORD in)
(PUNCT "(")
(LIT "purelib")
(PUNCT ",")
(LIT "platlib")
(PUNCT ",")
(LIT "headers")
(PUNCT ",")
(LIT "scripts")
(PUNCT ",")
(LIT "data")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "value")
(PUNCT "=")
(ID "key")
(PUNCT ".")
(ID "upper")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "key")
(PUNCT "==")
(LIT "headers")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "value")
(PUNCT "=")
(ID "value")
(PUNCT "+")
(LIT "/Include/$dist_name")
(NEWLINE)
(DEDENT)
(ID "setattr")
(PUNCT "(")
(ID "install")
(PUNCT ",")
(LIT "install_")
(PUNCT "+")
(ID "key")
(PUNCT ",")
(ID "value")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "log")
(PUNCT ".")
(ID "info")
(PUNCT "(")
(LIT "installing to %s")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "bdist_dir")
(PUNCT ")")
(NEWLINE)
(ID "install")
(PUNCT ".")
(ID "ensure_finalized")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(ID "sys")
(PUNCT ".")
(ID "path")
(PUNCT ".")
(ID "insert")
(PUNCT "(")
(LIT 0)
(PUNCT ",")
(ID "os")
(PUNCT ".")
(ID "path")
(PUNCT ".")
(ID "join")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "bdist_dir")
(PUNCT ",")
(LIT "PURELIB")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(ID "install")
(PUNCT ".")
(ID "run")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(KEYWORD del)
(ID "sys")
(PUNCT ".")
(ID "path")
(PUNCT "[")
(LIT 0)
(PUNCT "]")
(NEWLINE)
(KEYWORD from)
(ID "tempfile")
(KEYWORD import)
(ID "mktemp")
(NEWLINE)
(ID "archive_basename")
(PUNCT "=")
(ID "mktemp")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(ID "fullname")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "distribution")
(PUNCT ".")
(ID "get_fullname")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(ID "arcname")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "make_archive")
(PUNCT "(")
(ID "archive_basename")
(PUNCT ",")
(LIT "zip")
(PUNCT ",")
(ID "root_dir")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "bdist_dir")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "create_exe")
(PUNCT "(")
(ID "arcname")
(PUNCT ",")
(ID "fullname")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "bitmap")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "distribution")
(PUNCT ".")
(ID "has_ext_modules")
(PUNCT "(")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "pyversion")
(PUNCT "=")
(ID "get_python_version")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD else)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "pyversion")
(PUNCT "=")
(LIT "any")
(NEWLINE)
(DEDENT)
(ID "self")
(PUNCT ".")
(ID "distribution")
(PUNCT ".")
(ID "dist_files")
(PUNCT ".")
(ID "append")
(PUNCT "(")
(PUNCT "(")
(LIT "bdist_wininst")
(PUNCT ",")
(ID "pyversion")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "get_installer_filename")
(PUNCT "(")
(ID "fullname")
(PUNCT ")")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(ID "log")
(PUNCT ".")
(ID "debug")
(PUNCT "(")
(LIT "removing temporary file '%s'")
(PUNCT ",")
(ID "arcname")
(PUNCT ")")
(NEWLINE)
(ID "os")
(PUNCT ".")
(ID "remove")
(PUNCT "(")
(ID "arcname")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(KEYWORD not)
(ID "self")
(PUNCT ".")
(ID "keep_temp")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "remove_tree")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "bdist_dir")
(PUNCT ",")
(ID "dry_run")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "dry_run")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD def)
(ID "get_inidata")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "lines")
(PUNCT "=")
(PUNCT "[")
(PUNCT "]")
(NEWLINE)
(ID "metadata")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "distribution")
(PUNCT ".")
(ID "metadata")
(NEWLINE)
(ID "lines")
(PUNCT ".")
(ID "append")
(PUNCT "(")
(LIT "[metadata]")
(PUNCT ")")
(NEWLINE)
(ID "info")
(PUNCT "=")
(PUNCT "(")
(ID "metadata")
(PUNCT ".")
(ID "long_description")
(KEYWORD or)
(LIT "")
(PUNCT ")")
(PUNCT "+")
(LIT "\n")
(NEWLINE)
(KEYWORD def)
(ID "escape")
(PUNCT "(")
(ID "s")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "s")
(PUNCT ".")
(ID "replace")
(PUNCT "(")
(LIT "\n")
(PUNCT ",")
(LIT "\\n")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD for)
(ID "name")
(KEYWORD in)
(PUNCT "[")
(LIT "author")
(PUNCT ",")
(LIT "author_email")
(PUNCT ",")
(LIT "description")
(PUNCT ",")
(LIT "maintainer")
(PUNCT ",")
(LIT "maintainer_email")
(PUNCT ",")
(LIT "name")
(PUNCT ",")
(LIT "url")
(PUNCT ",")
(LIT "version")
(PUNCT "]")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "data")
(PUNCT "=")
(ID "getattr")
(PUNCT "(")
(ID "metadata")
(PUNCT ",")
(ID "name")
(PUNCT ",")
(LIT "")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "data")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "info")
(PUNCT "=")
(ID "info")
(PUNCT "+")
(PUNCT "(")
(LIT "\n    %s: %s")
(PUNCT "%")
(PUNCT "(")
(ID "name")
(PUNCT ".")
(ID "capitalize")
(PUNCT "(")
(PUNCT ")")
(PUNCT ",")
(ID "escape")
(PUNCT "(")
(ID "data")
(PUNCT ")")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(ID "lines")
(PUNCT ".")
(ID "append")
(PUNCT "(")
(LIT "%s=%s")
(PUNCT "%")
(PUNCT "(")
(ID "name")
(PUNCT ",")
(ID "escape")
(PUNCT "(")
(ID "data")
(PUNCT ")")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(ID "lines")
(PUNCT ".")
(ID "append")
(PUNCT "(")
(LIT "\n[Setup]")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "install_script")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "lines")
(PUNCT ".")
(ID "append")
(PUNCT "(")
(LIT "install_script=%s")
(PUNCT "%")
(ID "self")
(PUNCT ".")
(ID "install_script")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "lines")
(PUNCT ".")
(ID "append")
(PUNCT "(")
(LIT "info=%s")
(PUNCT "%")
(ID "escape")
(PUNCT "(")
(ID "info")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(ID "lines")
(PUNCT ".")
(ID "append")
(PUNCT "(")
(LIT "target_compile=%d")
(PUNCT "%")
(PUNCT "(")
(KEYWORD not)
(ID "self")
(PUNCT ".")
(ID "no_target_compile")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(ID "lines")
(PUNCT ".")
(ID "append")
(PUNCT "(")
(LIT "target_optimize=%d")
(PUNCT "%")
(PUNCT "(")
(KEYWORD not)
(ID "self")
(PUNCT ".")
(ID "no_target_optimize")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "target_version")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "lines")
(PUNCT ".")
(ID "append")
(PUNCT "(")
(LIT "target_version=%s")
(PUNCT "%")
(ID "self")
(PUNCT ".")
(ID "target_version")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "user_access_control")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "lines")
(PUNCT ".")
(ID "append")
(PUNCT "(")
(LIT "user_access_control=%s")
(PUNCT "%")
(ID "self")
(PUNCT ".")
(ID "user_access_control")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "title")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "title")
(KEYWORD or)
(ID "self")
(PUNCT ".")
(ID "distribution")
(PUNCT ".")
(ID "get_fullname")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(ID "lines")
(PUNCT ".")
(ID "append")
(PUNCT "(")
(LIT "title=%s")
(PUNCT "%")
(ID "escape")
(PUNCT "(")
(ID "title")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(KEYWORD import)
(ID "time")
(NEWLINE)
(KEYWORD import)
(ID "distutils")
(NEWLINE)
(ID "build_info")
(PUNCT "=")
(LIT "Built %s with distutils-%s")
(PUNCT "%")
(PUNCT "(")
(ID "time")
(PUNCT ".")
(ID "ctime")
(PUNCT "(")
(ID "time")
(PUNCT ".")
(ID "time")
(PUNCT "(")
(PUNCT ")")
(PUNCT ")")
(PUNCT ",")
(ID "distutils")
(PUNCT ".")
(ID "__version__")
(PUNCT ")")
(NEWLINE)
(ID "lines")
(PUNCT ".")
(ID "append")
(PUNCT "(")
(LIT "build_info=%s")
(PUNCT "%")
(ID "build_info")
(PUNCT ")")
(NEWLINE)
(KEYWORD return)
(LIT "\n")
(PUNCT ".")
(ID "join")
(PUNCT "(")
(ID "lines")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "create_exe")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "arcname")
(PUNCT ",")
(ID "fullname")
(PUNCT ",")
(ID "bitmap")
(PUNCT "=")
(KEYWORD None)
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD import)
(ID "struct")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "mkpath")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "dist_dir")
(PUNCT ")")
(NEWLINE)
(ID "cfgdata")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "get_inidata")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(ID "installer_name")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "get_installer_filename")
(PUNCT "(")
(ID "fullname")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "announce")
(PUNCT "(")
(LIT "creating %s")
(PUNCT "%")
(ID "installer_name")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "bitmap")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "bitmapdata")
(PUNCT "=")
(ID "open")
(PUNCT "(")
(ID "bitmap")
(PUNCT ",")
(LIT "rb")
(PUNCT ")")
(PUNCT ".")
(ID "read")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(ID "bitmaplen")
(PUNCT "=")
(ID "len")
(PUNCT "(")
(ID "bitmapdata")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD else)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "bitmaplen")
(PUNCT "=")
(LIT 0)
(NEWLINE)
(DEDENT)
(ID "file")
(PUNCT "=")
(ID "open")
(PUNCT "(")
(ID "installer_name")
(PUNCT ",")
(LIT "wb")
(PUNCT ")")
(NEWLINE)
(ID "file")
(PUNCT ".")
(ID "write")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "get_exe_bytes")
(PUNCT "(")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "bitmap")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "file")
(PUNCT ".")
(ID "write")
(PUNCT "(")
(ID "bitmapdata")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD if)
(ID "isinstance")
(PUNCT "(")
(ID "cfgdata")
(PUNCT ",")
(ID "str")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "cfgdata")
(PUNCT "=")
(ID "cfgdata")
(PUNCT ".")
(ID "encode")
(PUNCT "(")
(LIT "mbcs")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "cfgdata")
(PUNCT "=")
(ID "cfgdata")
(PUNCT "+")
(LIT #"\0")
(NEWLINE)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "pre_install_script")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD with)
(ID "open")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "pre_install_script")
(PUNCT ",")
(LIT "r")
(PUNCT ",")
(ID "encoding")
(PUNCT "=")
(LIT "latin-1")
(PUNCT ")")
(KEYWORD as)
(ID "script")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "script_data")
(PUNCT "=")
(ID "script")
(PUNCT ".")
(ID "read")
(PUNCT "(")
(PUNCT ")")
(PUNCT ".")
(ID "encode")
(PUNCT "(")
(LIT "latin-1")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "cfgdata")
(PUNCT "=")
(ID "cfgdata")
(PUNCT "+")
(ID "script_data")
(PUNCT "+")
(LIT #"\n\0")
(NEWLINE)
(DEDENT)
(KEYWORD else)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "cfgdata")
(PUNCT "=")
(ID "cfgdata")
(PUNCT "+")
(LIT #"\0")
(NEWLINE)
(DEDENT)
(ID "file")
(PUNCT ".")
(ID "write")
(PUNCT "(")
(ID "cfgdata")
(PUNCT ")")
(NEWLINE)
(ID "header")
(PUNCT "=")
(ID "struct")
(PUNCT ".")
(ID "pack")
(PUNCT "(")
(LIT "<iii")
(PUNCT ",")
(LIT 305419899)
(PUNCT ",")
(ID "len")
(PUNCT "(")
(ID "cfgdata")
(PUNCT ")")
(PUNCT ",")
(ID "bitmaplen")
(PUNCT ",")
(PUNCT ")")
(NEWLINE)
(ID "file")
(PUNCT ".")
(ID "write")
(PUNCT "(")
(ID "header")
(PUNCT ")")
(NEWLINE)
(ID "file")
(PUNCT ".")
(ID "write")
(PUNCT "(")
(ID "open")
(PUNCT "(")
(ID "arcname")
(PUNCT ",")
(LIT "rb")
(PUNCT ")")
(PUNCT ".")
(ID "read")
(PUNCT "(")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "get_installer_filename")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "fullname")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "target_version")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "installer_name")
(PUNCT "=")
(ID "os")
(PUNCT ".")
(ID "path")
(PUNCT ".")
(ID "join")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "dist_dir")
(PUNCT ",")
(LIT "%s.%s-py%s.exe")
(PUNCT "%")
(PUNCT "(")
(ID "fullname")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "plat_name")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "target_version")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD else)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "installer_name")
(PUNCT "=")
(ID "os")
(PUNCT ".")
(ID "path")
(PUNCT ".")
(ID "join")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "dist_dir")
(PUNCT ",")
(LIT "%s.%s.exe")
(PUNCT "%")
(PUNCT "(")
(ID "fullname")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "plat_name")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD return)
(ID "installer_name")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "get_exe_bytes")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD from)
(ID "distutils")
(PUNCT ".")
(ID "msvccompiler")
(KEYWORD import)
(ID "get_build_version")
(NEWLINE)
(ID "cur_version")
(PUNCT "=")
(ID "get_python_version")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "target_version")
(KEYWORD and)
(ID "self")
(PUNCT ".")
(ID "target_version")
(PUNCT "!=")
(ID "cur_version")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "target_version")
(PUNCT ">")
(ID "cur_version")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "bv")
(PUNCT "=")
(ID "get_build_version")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD else)
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "target_version")
(PUNCT "<")
(LIT "2.4")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "bv")
(PUNCT "=")
(LIT 6.0)
(NEWLINE)
(DEDENT)
(KEYWORD else)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "bv")
(PUNCT "=")
(LIT 7.1)
(NEWLINE)
(DEDENT)
(DEDENT)
(DEDENT)
(KEYWORD else)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "bv")
(PUNCT "=")
(ID "get_build_version")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "directory")
(PUNCT "=")
(ID "os")
(PUNCT ".")
(ID "path")
(PUNCT ".")
(ID "dirname")
(PUNCT "(")
(ID "__file__")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "plat_name")
(PUNCT "!=")
(LIT "win32")
(KEYWORD and)
(ID "self")
(PUNCT ".")
(ID "plat_name")
(PUNCT "[")
(PUNCT ":")
(LIT 3)
(PUNCT "]")
(PUNCT "==")
(LIT "win")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "sfix")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "plat_name")
(PUNCT "[")
(LIT 3)
(PUNCT ":")
(PUNCT "]")
(NEWLINE)
(DEDENT)
(KEYWORD else)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "sfix")
(PUNCT "=")
(LIT "")
(NEWLINE)
(DEDENT)
(ID "filename")
(PUNCT "=")
(ID "os")
(PUNCT ".")
(ID "path")
(PUNCT ".")
(ID "join")
(PUNCT "(")
(ID "directory")
(PUNCT ",")
(LIT "wininst-%.1f%s.exe")
(PUNCT "%")
(PUNCT "(")
(ID "bv")
(PUNCT ",")
(ID "sfix")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "f")
(PUNCT "=")
(ID "open")
(PUNCT "(")
(ID "filename")
(PUNCT ",")
(LIT "rb")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD except)
(ID "IOError")
(KEYWORD as)
(ID "e")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD raise)
(ID "DistutilsFileError")
(PUNCT "(")
(ID "str")
(PUNCT "(")
(ID "e")
(PUNCT ")")
(PUNCT "+")
(LIT ", %s not included in the Debian packages.")
(PUNCT "%")
(ID "filename")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "f")
(PUNCT ".")
(ID "read")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD finally)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "f")
(PUNCT ".")
(ID "close")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(DEDENT)
(ENDMARKER)
