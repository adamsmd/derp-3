(ID "__all__")
(PUNCT "=")
(PUNCT "[")
(LIT "Queue")
(PUNCT ",")
(LIT "SimpleQueue")
(PUNCT ",")
(LIT "JoinableQueue")
(PUNCT "]")
(NEWLINE)
(KEYWORD import)
(ID "sys")
(NEWLINE)
(KEYWORD import)
(ID "os")
(NEWLINE)
(KEYWORD import)
(ID "threading")
(NEWLINE)
(KEYWORD import)
(ID "collections")
(NEWLINE)
(KEYWORD import)
(ID "time")
(NEWLINE)
(KEYWORD import)
(ID "weakref")
(NEWLINE)
(KEYWORD import)
(ID "errno")
(NEWLINE)
(KEYWORD from)
(ID "queue")
(KEYWORD import)
(ID "Empty")
(PUNCT ",")
(ID "Full")
(NEWLINE)
(KEYWORD import)
(ID "_multiprocessing")
(NEWLINE)
(KEYWORD from)
(PUNCT ".")
(KEYWORD import)
(ID "connection")
(NEWLINE)
(KEYWORD from)
(PUNCT ".")
(KEYWORD import)
(ID "context")
(NEWLINE)
(KEYWORD from)
(PUNCT ".")
(ID "util")
(KEYWORD import)
(ID "debug")
(PUNCT ",")
(ID "info")
(PUNCT ",")
(ID "Finalize")
(PUNCT ",")
(ID "register_after_fork")
(PUNCT ",")
(ID "is_exiting")
(NEWLINE)
(KEYWORD from)
(PUNCT ".")
(ID "reduction")
(KEYWORD import)
(ID "ForkingPickler")
(NEWLINE)
(KEYWORD class)
(ID "Queue")
(PUNCT "(")
(ID "object")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD def)
(ID "__init__")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "maxsize")
(PUNCT "=")
(LIT 0)
(PUNCT ",")
(PUNCT "*")
(PUNCT ",")
(ID "ctx")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD if)
(ID "maxsize")
(PUNCT "<=")
(LIT 0)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "maxsize")
(PUNCT "=")
(ID "_multiprocessing")
(PUNCT ".")
(ID "SemLock")
(PUNCT ".")
(ID "SEM_VALUE_MAX")
(NEWLINE)
(DEDENT)
(ID "self")
(PUNCT ".")
(ID "_maxsize")
(PUNCT "=")
(ID "maxsize")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_reader")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_writer")
(PUNCT "=")
(ID "connection")
(PUNCT ".")
(ID "Pipe")
(PUNCT "(")
(ID "duplex")
(PUNCT "=")
(KEYWORD False)
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_rlock")
(PUNCT "=")
(ID "ctx")
(PUNCT ".")
(ID "Lock")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_opid")
(PUNCT "=")
(ID "os")
(PUNCT ".")
(ID "getpid")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "sys")
(PUNCT ".")
(ID "platform")
(PUNCT "==")
(LIT "win32")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_wlock")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(DEDENT)
(KEYWORD else)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_wlock")
(PUNCT "=")
(ID "ctx")
(PUNCT ".")
(ID "Lock")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "self")
(PUNCT ".")
(ID "_sem")
(PUNCT "=")
(ID "ctx")
(PUNCT ".")
(ID "BoundedSemaphore")
(PUNCT "(")
(ID "maxsize")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_ignore_epipe")
(PUNCT "=")
(KEYWORD False)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_after_fork")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "sys")
(PUNCT ".")
(ID "platform")
(PUNCT "!=")
(LIT "win32")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "register_after_fork")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "Queue")
(PUNCT ".")
(ID "_after_fork")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD def)
(ID "__getstate__")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "context")
(PUNCT ".")
(ID "assert_spawning")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(NEWLINE)
(KEYWORD return)
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "_ignore_epipe")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_maxsize")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_reader")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_writer")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_rlock")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_wlock")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_sem")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_opid")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "__setstate__")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "state")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "_ignore_epipe")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_maxsize")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_reader")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_writer")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_rlock")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_wlock")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_sem")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_opid")
(PUNCT ")")
(PUNCT "=")
(ID "state")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_after_fork")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "_after_fork")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "debug")
(PUNCT "(")
(LIT "Queue._after_fork()")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_notempty")
(PUNCT "=")
(ID "threading")
(PUNCT ".")
(ID "Condition")
(PUNCT "(")
(ID "threading")
(PUNCT ".")
(ID "Lock")
(PUNCT "(")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_buffer")
(PUNCT "=")
(ID "collections")
(PUNCT ".")
(ID "deque")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_thread")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_jointhread")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_joincancelled")
(PUNCT "=")
(KEYWORD False)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_closed")
(PUNCT "=")
(KEYWORD False)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_close")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_send_bytes")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "_writer")
(PUNCT ".")
(ID "send_bytes")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_recv_bytes")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "_reader")
(PUNCT ".")
(ID "recv_bytes")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_poll")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "_reader")
(PUNCT ".")
(ID "poll")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "put")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "obj")
(PUNCT ",")
(ID "block")
(PUNCT "=")
(KEYWORD True)
(PUNCT ",")
(ID "timeout")
(PUNCT "=")
(KEYWORD None)
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD assert)
(KEYWORD not)
(ID "self")
(PUNCT ".")
(ID "_closed")
(NEWLINE)
(KEYWORD if)
(KEYWORD not)
(ID "self")
(PUNCT ".")
(ID "_sem")
(PUNCT ".")
(ID "acquire")
(PUNCT "(")
(ID "block")
(PUNCT ",")
(ID "timeout")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD raise)
(ID "Full")
(NEWLINE)
(DEDENT)
(ID "self")
(PUNCT ".")
(ID "_notempty")
(PUNCT ".")
(ID "acquire")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "_thread")
(KEYWORD is)
(KEYWORD None)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_start_thread")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "self")
(PUNCT ".")
(ID "_buffer")
(PUNCT ".")
(ID "append")
(PUNCT "(")
(ID "obj")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_notempty")
(PUNCT ".")
(ID "notify")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD finally)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_notempty")
(PUNCT ".")
(ID "release")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD def)
(ID "get")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "block")
(PUNCT "=")
(KEYWORD True)
(PUNCT ",")
(ID "timeout")
(PUNCT "=")
(KEYWORD None)
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD if)
(ID "block")
(KEYWORD and)
(ID "timeout")
(KEYWORD is)
(KEYWORD None)
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD with)
(ID "self")
(PUNCT ".")
(ID "_rlock")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "res")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "_recv_bytes")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "self")
(PUNCT ".")
(ID "_sem")
(PUNCT ".")
(ID "release")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD else)
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD if)
(ID "block")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "deadline")
(PUNCT "=")
(ID "time")
(PUNCT ".")
(ID "time")
(PUNCT "(")
(PUNCT ")")
(PUNCT "+")
(ID "timeout")
(NEWLINE)
(DEDENT)
(KEYWORD if)
(KEYWORD not)
(ID "self")
(PUNCT ".")
(ID "_rlock")
(PUNCT ".")
(ID "acquire")
(PUNCT "(")
(ID "block")
(PUNCT ",")
(ID "timeout")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD raise)
(ID "Empty")
(NEWLINE)
(DEDENT)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD if)
(ID "block")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "timeout")
(PUNCT "=")
(ID "deadline")
(PUNCT "-")
(ID "time")
(PUNCT ".")
(ID "time")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "timeout")
(PUNCT "<")
(LIT 0)
(KEYWORD or)
(KEYWORD not)
(ID "self")
(PUNCT ".")
(ID "_poll")
(PUNCT "(")
(ID "timeout")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD raise)
(ID "Empty")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD elif)
(KEYWORD not)
(ID "self")
(PUNCT ".")
(ID "_poll")
(PUNCT "(")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD raise)
(ID "Empty")
(NEWLINE)
(DEDENT)
(ID "res")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "_recv_bytes")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_sem")
(PUNCT ".")
(ID "release")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD finally)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_rlock")
(PUNCT ".")
(ID "release")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD return)
(ID "ForkingPickler")
(PUNCT ".")
(ID "loads")
(PUNCT "(")
(ID "res")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "qsize")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "self")
(PUNCT ".")
(ID "_maxsize")
(PUNCT "-")
(ID "self")
(PUNCT ".")
(ID "_sem")
(PUNCT ".")
(ID "_semlock")
(PUNCT ".")
(ID "_get_value")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "empty")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(KEYWORD not)
(ID "self")
(PUNCT ".")
(ID "_poll")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "full")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "self")
(PUNCT ".")
(ID "_sem")
(PUNCT ".")
(ID "_semlock")
(PUNCT ".")
(ID "_is_zero")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "get_nowait")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "self")
(PUNCT ".")
(ID "get")
(PUNCT "(")
(KEYWORD False)
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "put_nowait")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "obj")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "self")
(PUNCT ".")
(ID "put")
(PUNCT "(")
(ID "obj")
(PUNCT ",")
(KEYWORD False)
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "close")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_closed")
(PUNCT "=")
(KEYWORD True)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_reader")
(PUNCT ".")
(ID "close")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "_close")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_close")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD def)
(ID "join_thread")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "debug")
(PUNCT "(")
(LIT "Queue.join_thread()")
(PUNCT ")")
(NEWLINE)
(KEYWORD assert)
(ID "self")
(PUNCT ".")
(ID "_closed")
(NEWLINE)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "_jointhread")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_jointhread")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD def)
(ID "cancel_join_thread")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "debug")
(PUNCT "(")
(LIT "Queue.cancel_join_thread()")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_joincancelled")
(PUNCT "=")
(KEYWORD True)
(NEWLINE)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_jointhread")
(PUNCT ".")
(ID "cancel")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD except)
(ID "AttributeError")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD pass)
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD def)
(ID "_start_thread")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "debug")
(PUNCT "(")
(LIT "Queue._start_thread()")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_buffer")
(PUNCT ".")
(ID "clear")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_thread")
(PUNCT "=")
(ID "threading")
(PUNCT ".")
(ID "Thread")
(PUNCT "(")
(ID "target")
(PUNCT "=")
(ID "Queue")
(PUNCT ".")
(ID "_feed")
(PUNCT ",")
(ID "args")
(PUNCT "=")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "_buffer")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_notempty")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_send_bytes")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_wlock")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_writer")
(PUNCT ".")
(ID "close")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_ignore_epipe")
(PUNCT ")")
(PUNCT ",")
(ID "name")
(PUNCT "=")
(LIT "QueueFeederThread")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_thread")
(PUNCT ".")
(ID "daemon")
(PUNCT "=")
(KEYWORD True)
(NEWLINE)
(ID "debug")
(PUNCT "(")
(LIT "doing self._thread.start()")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_thread")
(PUNCT ".")
(ID "start")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(ID "debug")
(PUNCT "(")
(LIT "... done self._thread.start()")
(PUNCT ")")
(NEWLINE)
(ID "created_by_this_process")
(PUNCT "=")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "_opid")
(PUNCT "==")
(ID "os")
(PUNCT ".")
(ID "getpid")
(PUNCT "(")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(KEYWORD not)
(ID "self")
(PUNCT ".")
(ID "_joincancelled")
(KEYWORD and)
(KEYWORD not)
(ID "created_by_this_process")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_jointhread")
(PUNCT "=")
(ID "Finalize")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "_thread")
(PUNCT ",")
(ID "Queue")
(PUNCT ".")
(ID "_finalize_join")
(PUNCT ",")
(PUNCT "[")
(ID "weakref")
(PUNCT ".")
(ID "ref")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "_thread")
(PUNCT ")")
(PUNCT "]")
(PUNCT ",")
(ID "exitpriority")
(PUNCT "=")
(PUNCT "-")
(LIT 5)
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "self")
(PUNCT ".")
(ID "_close")
(PUNCT "=")
(ID "Finalize")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "Queue")
(PUNCT ".")
(ID "_finalize_close")
(PUNCT ",")
(PUNCT "[")
(ID "self")
(PUNCT ".")
(ID "_buffer")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_notempty")
(PUNCT "]")
(PUNCT ",")
(ID "exitpriority")
(PUNCT "=")
(LIT 10)
(PUNCT ")")
(NEWLINE)
(DEDENT)
(PUNCT "@")
(ID "staticmethod")
(NEWLINE)
(KEYWORD def)
(ID "_finalize_join")
(PUNCT "(")
(ID "twr")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "debug")
(PUNCT "(")
(LIT "joining queue thread")
(PUNCT ")")
(NEWLINE)
(ID "thread")
(PUNCT "=")
(ID "twr")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "thread")
(KEYWORD is)
(KEYWORD not)
(KEYWORD None)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "thread")
(PUNCT ".")
(ID "join")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(ID "debug")
(PUNCT "(")
(LIT "... queue thread joined")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD else)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "debug")
(PUNCT "(")
(LIT "... queue thread already dead")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(PUNCT "@")
(ID "staticmethod")
(NEWLINE)
(KEYWORD def)
(ID "_finalize_close")
(PUNCT "(")
(ID "buffer")
(PUNCT ",")
(ID "notempty")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "debug")
(PUNCT "(")
(LIT "telling queue thread to quit")
(PUNCT ")")
(NEWLINE)
(ID "notempty")
(PUNCT ".")
(ID "acquire")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "buffer")
(PUNCT ".")
(ID "append")
(PUNCT "(")
(ID "_sentinel")
(PUNCT ")")
(NEWLINE)
(ID "notempty")
(PUNCT ".")
(ID "notify")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD finally)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "notempty")
(PUNCT ".")
(ID "release")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(PUNCT "@")
(ID "staticmethod")
(NEWLINE)
(KEYWORD def)
(ID "_feed")
(PUNCT "(")
(ID "buffer")
(PUNCT ",")
(ID "notempty")
(PUNCT ",")
(ID "send_bytes")
(PUNCT ",")
(ID "writelock")
(PUNCT ",")
(ID "close")
(PUNCT ",")
(ID "ignore_epipe")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "debug")
(PUNCT "(")
(LIT "starting thread to feed data to pipe")
(PUNCT ")")
(NEWLINE)
(ID "nacquire")
(PUNCT "=")
(ID "notempty")
(PUNCT ".")
(ID "acquire")
(NEWLINE)
(ID "nrelease")
(PUNCT "=")
(ID "notempty")
(PUNCT ".")
(ID "release")
(NEWLINE)
(ID "nwait")
(PUNCT "=")
(ID "notempty")
(PUNCT ".")
(ID "wait")
(NEWLINE)
(ID "bpopleft")
(PUNCT "=")
(ID "buffer")
(PUNCT ".")
(ID "popleft")
(NEWLINE)
(ID "sentinel")
(PUNCT "=")
(ID "_sentinel")
(NEWLINE)
(KEYWORD if)
(ID "sys")
(PUNCT ".")
(ID "platform")
(PUNCT "!=")
(LIT "win32")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "wacquire")
(PUNCT "=")
(ID "writelock")
(PUNCT ".")
(ID "acquire")
(NEWLINE)
(ID "wrelease")
(PUNCT "=")
(ID "writelock")
(PUNCT ".")
(ID "release")
(NEWLINE)
(DEDENT)
(KEYWORD else)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "wacquire")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(DEDENT)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD while)
(LIT 1)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "nacquire")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD if)
(KEYWORD not)
(ID "buffer")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "nwait")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD finally)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "nrelease")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD while)
(LIT 1)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "obj")
(PUNCT "=")
(ID "bpopleft")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "obj")
(KEYWORD is)
(ID "sentinel")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "debug")
(PUNCT "(")
(LIT "feeder thread got sentinel -- exiting")
(PUNCT ")")
(NEWLINE)
(ID "close")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(KEYWORD return)
(NEWLINE)
(DEDENT)
(ID "obj")
(PUNCT "=")
(ID "ForkingPickler")
(PUNCT ".")
(ID "dumps")
(PUNCT "(")
(ID "obj")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "wacquire")
(KEYWORD is)
(KEYWORD None)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "send_bytes")
(PUNCT "(")
(ID "obj")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD else)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "wacquire")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "send_bytes")
(PUNCT "(")
(ID "obj")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD finally)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "wrelease")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(DEDENT)
(DEDENT)
(KEYWORD except)
(ID "IndexError")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD pass)
(NEWLINE)
(DEDENT)
(DEDENT)
(DEDENT)
(KEYWORD except)
(ID "Exception")
(KEYWORD as)
(ID "e")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD if)
(ID "ignore_epipe")
(KEYWORD and)
(ID "getattr")
(PUNCT "(")
(ID "e")
(PUNCT ",")
(LIT "errno")
(PUNCT ",")
(LIT 0)
(PUNCT ")")
(PUNCT "==")
(ID "errno")
(PUNCT ".")
(ID "EPIPE")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(NEWLINE)
(DEDENT)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD if)
(ID "is_exiting")
(PUNCT "(")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "info")
(PUNCT "(")
(LIT "error in queue thread: %s")
(PUNCT ",")
(ID "e")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD else)
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD import)
(ID "traceback")
(NEWLINE)
(ID "traceback")
(PUNCT ".")
(ID "print_exc")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD except)
(ID "Exception")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD pass)
(NEWLINE)
(DEDENT)
(DEDENT)
(DEDENT)
(DEDENT)
(ID "_sentinel")
(PUNCT "=")
(ID "object")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(KEYWORD class)
(ID "JoinableQueue")
(PUNCT "(")
(ID "Queue")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD def)
(ID "__init__")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "maxsize")
(PUNCT "=")
(LIT 0)
(PUNCT ",")
(PUNCT "*")
(PUNCT ",")
(ID "ctx")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "Queue")
(PUNCT ".")
(ID "__init__")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "maxsize")
(PUNCT ",")
(ID "ctx")
(PUNCT "=")
(ID "ctx")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_unfinished_tasks")
(PUNCT "=")
(ID "ctx")
(PUNCT ".")
(ID "Semaphore")
(PUNCT "(")
(LIT 0)
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_cond")
(PUNCT "=")
(ID "ctx")
(PUNCT ".")
(ID "Condition")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "__getstate__")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(ID "Queue")
(PUNCT ".")
(ID "__getstate__")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT "+")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "_cond")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_unfinished_tasks")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "__setstate__")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "state")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "Queue")
(PUNCT ".")
(ID "__setstate__")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "state")
(PUNCT "[")
(PUNCT ":")
(PUNCT "-")
(LIT 2)
(PUNCT "]")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_cond")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_unfinished_tasks")
(PUNCT "=")
(ID "state")
(PUNCT "[")
(PUNCT "-")
(LIT 2)
(PUNCT ":")
(PUNCT "]")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "put")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "obj")
(PUNCT ",")
(ID "block")
(PUNCT "=")
(KEYWORD True)
(PUNCT ",")
(ID "timeout")
(PUNCT "=")
(KEYWORD None)
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD assert)
(KEYWORD not)
(ID "self")
(PUNCT ".")
(ID "_closed")
(NEWLINE)
(KEYWORD if)
(KEYWORD not)
(ID "self")
(PUNCT ".")
(ID "_sem")
(PUNCT ".")
(ID "acquire")
(PUNCT "(")
(ID "block")
(PUNCT ",")
(ID "timeout")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD raise)
(ID "Full")
(NEWLINE)
(DEDENT)
(ID "self")
(PUNCT ".")
(ID "_notempty")
(PUNCT ".")
(ID "acquire")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_cond")
(PUNCT ".")
(ID "acquire")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "_thread")
(KEYWORD is)
(KEYWORD None)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_start_thread")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "self")
(PUNCT ".")
(ID "_buffer")
(PUNCT ".")
(ID "append")
(PUNCT "(")
(ID "obj")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_unfinished_tasks")
(PUNCT ".")
(ID "release")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_notempty")
(PUNCT ".")
(ID "notify")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD finally)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_cond")
(PUNCT ".")
(ID "release")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_notempty")
(PUNCT ".")
(ID "release")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD def)
(ID "task_done")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_cond")
(PUNCT ".")
(ID "acquire")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD if)
(KEYWORD not)
(ID "self")
(PUNCT ".")
(ID "_unfinished_tasks")
(PUNCT ".")
(ID "acquire")
(PUNCT "(")
(KEYWORD False)
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD raise)
(ID "ValueError")
(PUNCT "(")
(LIT "task_done() called too many times")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "_unfinished_tasks")
(PUNCT ".")
(ID "_semlock")
(PUNCT ".")
(ID "_is_zero")
(PUNCT "(")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_cond")
(PUNCT ".")
(ID "notify_all")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD finally)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_cond")
(PUNCT ".")
(ID "release")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD def)
(ID "join")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_cond")
(PUNCT ".")
(ID "acquire")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD if)
(KEYWORD not)
(ID "self")
(PUNCT ".")
(ID "_unfinished_tasks")
(PUNCT ".")
(ID "_semlock")
(PUNCT ".")
(ID "_is_zero")
(PUNCT "(")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_cond")
(PUNCT ".")
(ID "wait")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD finally)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_cond")
(PUNCT ".")
(ID "release")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(DEDENT)
(KEYWORD class)
(ID "SimpleQueue")
(PUNCT "(")
(ID "object")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD def)
(ID "__init__")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(PUNCT "*")
(PUNCT ",")
(ID "ctx")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_reader")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_writer")
(PUNCT "=")
(ID "connection")
(PUNCT ".")
(ID "Pipe")
(PUNCT "(")
(ID "duplex")
(PUNCT "=")
(KEYWORD False)
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_rlock")
(PUNCT "=")
(ID "ctx")
(PUNCT ".")
(ID "Lock")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "_poll")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "_reader")
(PUNCT ".")
(ID "poll")
(NEWLINE)
(KEYWORD if)
(ID "sys")
(PUNCT ".")
(ID "platform")
(PUNCT "==")
(LIT "win32")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_wlock")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(DEDENT)
(KEYWORD else)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_wlock")
(PUNCT "=")
(ID "ctx")
(PUNCT ".")
(ID "Lock")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD def)
(ID "empty")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD return)
(KEYWORD not)
(ID "self")
(PUNCT ".")
(ID "_poll")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "__getstate__")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "context")
(PUNCT ".")
(ID "assert_spawning")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(NEWLINE)
(KEYWORD return)
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "_reader")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_writer")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_rlock")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_wlock")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "__setstate__")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "state")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "_reader")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_writer")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_rlock")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "_wlock")
(PUNCT ")")
(PUNCT "=")
(ID "state")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "get")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD with)
(ID "self")
(PUNCT ".")
(ID "_rlock")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "res")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "_reader")
(PUNCT ".")
(ID "recv_bytes")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD return)
(ID "ForkingPickler")
(PUNCT ".")
(ID "loads")
(PUNCT "(")
(ID "res")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "put")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "obj")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "obj")
(PUNCT "=")
(ID "ForkingPickler")
(PUNCT ".")
(ID "dumps")
(PUNCT "(")
(ID "obj")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "_wlock")
(KEYWORD is)
(KEYWORD None)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_writer")
(PUNCT ".")
(ID "send_bytes")
(PUNCT "(")
(ID "obj")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD else)
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD with)
(ID "self")
(PUNCT ".")
(ID "_wlock")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "_writer")
(PUNCT ".")
(ID "send_bytes")
(PUNCT "(")
(ID "obj")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(DEDENT)
(DEDENT)
(ENDMARKER)
