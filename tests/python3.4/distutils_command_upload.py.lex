(LIT "distutils.command.upload\n\nImplements the Distutils 'upload' subcommand (upload package to PyPI).")
(NEWLINE)
(KEYWORD import)
(ID "sys")
(NEWLINE)
(KEYWORD import)
(ID "os")
(PUNCT ",")
(ID "io")
(NEWLINE)
(KEYWORD import)
(ID "socket")
(NEWLINE)
(KEYWORD import)
(ID "platform")
(NEWLINE)
(KEYWORD from)
(ID "base64")
(KEYWORD import)
(ID "standard_b64encode")
(NEWLINE)
(KEYWORD from)
(ID "urllib")
(PUNCT ".")
(ID "request")
(KEYWORD import)
(ID "urlopen")
(PUNCT ",")
(ID "Request")
(PUNCT ",")
(ID "HTTPError")
(NEWLINE)
(KEYWORD from)
(ID "urllib")
(PUNCT ".")
(ID "parse")
(KEYWORD import)
(ID "urlparse")
(NEWLINE)
(KEYWORD from)
(ID "distutils")
(PUNCT ".")
(ID "errors")
(KEYWORD import)
(ID "DistutilsError")
(PUNCT ",")
(ID "DistutilsOptionError")
(NEWLINE)
(KEYWORD from)
(ID "distutils")
(PUNCT ".")
(ID "core")
(KEYWORD import)
(ID "PyPIRCCommand")
(NEWLINE)
(KEYWORD from)
(ID "distutils")
(PUNCT ".")
(ID "spawn")
(KEYWORD import)
(ID "spawn")
(NEWLINE)
(KEYWORD from)
(ID "distutils")
(KEYWORD import)
(ID "log")
(NEWLINE)
(KEYWORD if)
(ID "sys")
(PUNCT ".")
(ID "version")
(PUNCT "<")
(LIT "2.5")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD from)
(ID "md5")
(KEYWORD import)
(ID "md5")
(NEWLINE)
(DEDENT)
(KEYWORD else)
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD from)
(ID "hashlib")
(KEYWORD import)
(ID "md5")
(NEWLINE)
(DEDENT)
(KEYWORD class)
(ID "upload")
(PUNCT "(")
(ID "PyPIRCCommand")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "description")
(PUNCT "=")
(LIT "upload binary package to PyPI")
(NEWLINE)
(ID "user_options")
(PUNCT "=")
(ID "PyPIRCCommand")
(PUNCT ".")
(ID "user_options")
(PUNCT "+")
(PUNCT "[")
(PUNCT "(")
(LIT "sign")
(PUNCT ",")
(LIT "s")
(PUNCT ",")
(LIT "sign files to upload using gpg")
(PUNCT ")")
(PUNCT ",")
(PUNCT "(")
(LIT "identity=")
(PUNCT ",")
(LIT "i")
(PUNCT ",")
(LIT "GPG identity used to sign files")
(PUNCT ")")
(PUNCT ",")
(PUNCT "]")
(NEWLINE)
(ID "boolean_options")
(PUNCT "=")
(ID "PyPIRCCommand")
(PUNCT ".")
(ID "boolean_options")
(PUNCT "+")
(PUNCT "[")
(LIT "sign")
(PUNCT "]")
(NEWLINE)
(KEYWORD def)
(ID "initialize_options")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "PyPIRCCommand")
(PUNCT ".")
(ID "initialize_options")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "username")
(PUNCT "=")
(LIT "")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "password")
(PUNCT "=")
(LIT "")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "show_response")
(PUNCT "=")
(LIT 0)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "sign")
(PUNCT "=")
(KEYWORD False)
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "identity")
(PUNCT "=")
(KEYWORD None)
(NEWLINE)
(DEDENT)
(KEYWORD def)
(ID "finalize_options")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "PyPIRCCommand")
(PUNCT ".")
(ID "finalize_options")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "identity")
(KEYWORD and)
(KEYWORD not)
(ID "self")
(PUNCT ".")
(ID "sign")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD raise)
(ID "DistutilsOptionError")
(PUNCT "(")
(LIT "Must use --sign for --identity to have meaning")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "config")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "_read_pypirc")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "config")
(PUNCT "!=")
(PUNCT "{")
(PUNCT "}")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "username")
(PUNCT "=")
(ID "config")
(PUNCT "[")
(LIT "username")
(PUNCT "]")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "password")
(PUNCT "=")
(ID "config")
(PUNCT "[")
(LIT "password")
(PUNCT "]")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "repository")
(PUNCT "=")
(ID "config")
(PUNCT "[")
(LIT "repository")
(PUNCT "]")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "realm")
(PUNCT "=")
(ID "config")
(PUNCT "[")
(LIT "realm")
(PUNCT "]")
(NEWLINE)
(DEDENT)
(KEYWORD if)
(KEYWORD not)
(ID "self")
(PUNCT ".")
(ID "password")
(KEYWORD and)
(ID "self")
(PUNCT ".")
(ID "distribution")
(PUNCT ".")
(ID "password")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "password")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "distribution")
(PUNCT ".")
(ID "password")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD def)
(ID "run")
(PUNCT "(")
(ID "self")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD if)
(KEYWORD not)
(ID "self")
(PUNCT ".")
(ID "distribution")
(PUNCT ".")
(ID "dist_files")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD raise)
(ID "DistutilsOptionError")
(PUNCT "(")
(LIT "No dist file created in earlier command")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD for)
(ID "command")
(PUNCT ",")
(ID "pyversion")
(PUNCT ",")
(ID "filename")
(KEYWORD in)
(ID "self")
(PUNCT ".")
(ID "distribution")
(PUNCT ".")
(ID "dist_files")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "upload_file")
(PUNCT "(")
(ID "command")
(PUNCT ",")
(ID "pyversion")
(PUNCT ",")
(ID "filename")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD def)
(ID "upload_file")
(PUNCT "(")
(ID "self")
(PUNCT ",")
(ID "command")
(PUNCT ",")
(ID "pyversion")
(PUNCT ",")
(ID "filename")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "schema")
(PUNCT ",")
(ID "netloc")
(PUNCT ",")
(ID "url")
(PUNCT ",")
(ID "params")
(PUNCT ",")
(ID "query")
(PUNCT ",")
(ID "fragments")
(PUNCT "=")
(ID "urlparse")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "repository")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "params")
(KEYWORD or)
(ID "query")
(KEYWORD or)
(ID "fragments")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD raise)
(ID "AssertionError")
(PUNCT "(")
(LIT "Incompatible url %s")
(PUNCT "%")
(ID "self")
(PUNCT ".")
(ID "repository")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD if)
(ID "schema")
(KEYWORD not)
(KEYWORD in)
(PUNCT "(")
(LIT "http")
(PUNCT ",")
(LIT "https")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD raise)
(ID "AssertionError")
(PUNCT "(")
(LIT "unsupported schema ")
(PUNCT "+")
(ID "schema")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "sign")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "gpg_args")
(PUNCT "=")
(PUNCT "[")
(LIT "gpg")
(PUNCT ",")
(LIT "--detach-sign")
(PUNCT ",")
(LIT "-a")
(PUNCT ",")
(ID "filename")
(PUNCT "]")
(NEWLINE)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "identity")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "gpg_args")
(PUNCT "[")
(LIT 2)
(PUNCT ":")
(LIT 2)
(PUNCT "]")
(PUNCT "=")
(PUNCT "[")
(LIT "--local-user")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "identity")
(PUNCT "]")
(NEWLINE)
(DEDENT)
(ID "spawn")
(PUNCT "(")
(ID "gpg_args")
(PUNCT ",")
(ID "dry_run")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "dry_run")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "f")
(PUNCT "=")
(ID "open")
(PUNCT "(")
(ID "filename")
(PUNCT ",")
(LIT "rb")
(PUNCT ")")
(NEWLINE)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "content")
(PUNCT "=")
(ID "f")
(PUNCT ".")
(ID "read")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD finally)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "f")
(PUNCT ".")
(ID "close")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "meta")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "distribution")
(PUNCT ".")
(ID "metadata")
(NEWLINE)
(ID "data")
(PUNCT "=")
(PUNCT "{")
(LIT ":action")
(PUNCT ":")
(LIT "file_upload")
(PUNCT ",")
(LIT "protcol_version")
(PUNCT ":")
(LIT "1")
(PUNCT ",")
(LIT "name")
(PUNCT ":")
(ID "meta")
(PUNCT ".")
(ID "get_name")
(PUNCT "(")
(PUNCT ")")
(PUNCT ",")
(LIT "version")
(PUNCT ":")
(ID "meta")
(PUNCT ".")
(ID "get_version")
(PUNCT "(")
(PUNCT ")")
(PUNCT ",")
(LIT "content")
(PUNCT ":")
(PUNCT "(")
(ID "os")
(PUNCT ".")
(ID "path")
(PUNCT ".")
(ID "basename")
(PUNCT "(")
(ID "filename")
(PUNCT ")")
(PUNCT ",")
(ID "content")
(PUNCT ")")
(PUNCT ",")
(LIT "filetype")
(PUNCT ":")
(ID "command")
(PUNCT ",")
(LIT "pyversion")
(PUNCT ":")
(ID "pyversion")
(PUNCT ",")
(LIT "md5_digest")
(PUNCT ":")
(ID "md5")
(PUNCT "(")
(ID "content")
(PUNCT ")")
(PUNCT ".")
(ID "hexdigest")
(PUNCT "(")
(PUNCT ")")
(PUNCT ",")
(LIT "metadata_version")
(PUNCT ":")
(LIT "1.0")
(PUNCT ",")
(LIT "summary")
(PUNCT ":")
(ID "meta")
(PUNCT ".")
(ID "get_description")
(PUNCT "(")
(PUNCT ")")
(PUNCT ",")
(LIT "home_page")
(PUNCT ":")
(ID "meta")
(PUNCT ".")
(ID "get_url")
(PUNCT "(")
(PUNCT ")")
(PUNCT ",")
(LIT "author")
(PUNCT ":")
(ID "meta")
(PUNCT ".")
(ID "get_contact")
(PUNCT "(")
(PUNCT ")")
(PUNCT ",")
(LIT "author_email")
(PUNCT ":")
(ID "meta")
(PUNCT ".")
(ID "get_contact_email")
(PUNCT "(")
(PUNCT ")")
(PUNCT ",")
(LIT "license")
(PUNCT ":")
(ID "meta")
(PUNCT ".")
(ID "get_licence")
(PUNCT "(")
(PUNCT ")")
(PUNCT ",")
(LIT "description")
(PUNCT ":")
(ID "meta")
(PUNCT ".")
(ID "get_long_description")
(PUNCT "(")
(PUNCT ")")
(PUNCT ",")
(LIT "keywords")
(PUNCT ":")
(ID "meta")
(PUNCT ".")
(ID "get_keywords")
(PUNCT "(")
(PUNCT ")")
(PUNCT ",")
(LIT "platform")
(PUNCT ":")
(ID "meta")
(PUNCT ".")
(ID "get_platforms")
(PUNCT "(")
(PUNCT ")")
(PUNCT ",")
(LIT "classifiers")
(PUNCT ":")
(ID "meta")
(PUNCT ".")
(ID "get_classifiers")
(PUNCT "(")
(PUNCT ")")
(PUNCT ",")
(LIT "download_url")
(PUNCT ":")
(ID "meta")
(PUNCT ".")
(ID "get_download_url")
(PUNCT "(")
(PUNCT ")")
(PUNCT ",")
(LIT "provides")
(PUNCT ":")
(ID "meta")
(PUNCT ".")
(ID "get_provides")
(PUNCT "(")
(PUNCT ")")
(PUNCT ",")
(LIT "requires")
(PUNCT ":")
(ID "meta")
(PUNCT ".")
(ID "get_requires")
(PUNCT "(")
(PUNCT ")")
(PUNCT ",")
(LIT "obsoletes")
(PUNCT ":")
(ID "meta")
(PUNCT ".")
(ID "get_obsoletes")
(PUNCT "(")
(PUNCT ")")
(PUNCT ",")
(PUNCT "}")
(NEWLINE)
(ID "comment")
(PUNCT "=")
(LIT "")
(NEWLINE)
(KEYWORD if)
(ID "command")
(PUNCT "==")
(LIT "bdist_rpm")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "dist")
(PUNCT ",")
(ID "version")
(PUNCT ",")
(ID "id")
(PUNCT "=")
(ID "platform")
(PUNCT ".")
(ID "dist")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "dist")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "comment")
(PUNCT "=")
(LIT "built for %s %s")
(PUNCT "%")
(PUNCT "(")
(ID "dist")
(PUNCT ",")
(ID "version")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(KEYWORD elif)
(ID "command")
(PUNCT "==")
(LIT "bdist_dumb")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "comment")
(PUNCT "=")
(LIT "built for %s")
(PUNCT "%")
(ID "platform")
(PUNCT ".")
(ID "platform")
(PUNCT "(")
(ID "terse")
(PUNCT "=")
(LIT 1)
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "data")
(PUNCT "[")
(LIT "comment")
(PUNCT "]")
(PUNCT "=")
(ID "comment")
(NEWLINE)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "sign")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "data")
(PUNCT "[")
(LIT "gpg_signature")
(PUNCT "]")
(PUNCT "=")
(PUNCT "(")
(ID "os")
(PUNCT ".")
(ID "path")
(PUNCT ".")
(ID "basename")
(PUNCT "(")
(ID "filename")
(PUNCT ")")
(PUNCT "+")
(LIT ".asc")
(PUNCT ",")
(ID "open")
(PUNCT "(")
(ID "filename")
(PUNCT "+")
(LIT ".asc")
(PUNCT ",")
(LIT "rb")
(PUNCT ")")
(PUNCT ".")
(ID "read")
(PUNCT "(")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "user_pass")
(PUNCT "=")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "username")
(PUNCT "+")
(LIT ":")
(PUNCT "+")
(ID "self")
(PUNCT ".")
(ID "password")
(PUNCT ")")
(PUNCT ".")
(ID "encode")
(PUNCT "(")
(LIT "ascii")
(PUNCT ")")
(NEWLINE)
(ID "auth")
(PUNCT "=")
(LIT "Basic ")
(PUNCT "+")
(ID "standard_b64encode")
(PUNCT "(")
(ID "user_pass")
(PUNCT ")")
(PUNCT ".")
(ID "decode")
(PUNCT "(")
(LIT "ascii")
(PUNCT ")")
(NEWLINE)
(ID "boundary")
(PUNCT "=")
(LIT "--------------GHSKFJDLGDS7543FJKLFHRE75642756743254")
(NEWLINE)
(ID "sep_boundary")
(PUNCT "=")
(LIT #"\r\n--")
(PUNCT "+")
(ID "boundary")
(PUNCT ".")
(ID "encode")
(PUNCT "(")
(LIT "ascii")
(PUNCT ")")
(NEWLINE)
(ID "end_boundary")
(PUNCT "=")
(ID "sep_boundary")
(PUNCT "+")
(LIT #"--\r\n")
(NEWLINE)
(ID "body")
(PUNCT "=")
(ID "io")
(PUNCT ".")
(ID "BytesIO")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(KEYWORD for)
(ID "key")
(PUNCT ",")
(ID "value")
(KEYWORD in)
(ID "data")
(PUNCT ".")
(ID "items")
(PUNCT "(")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "title")
(PUNCT "=")
(LIT "\r\nContent-Disposition: form-data; name=\"%s\"")
(PUNCT "%")
(ID "key")
(NEWLINE)
(KEYWORD if)
(ID "type")
(PUNCT "(")
(ID "value")
(PUNCT ")")
(PUNCT "!=")
(ID "type")
(PUNCT "(")
(PUNCT "[")
(PUNCT "]")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "value")
(PUNCT "=")
(PUNCT "[")
(ID "value")
(PUNCT "]")
(NEWLINE)
(DEDENT)
(KEYWORD for)
(ID "value")
(KEYWORD in)
(ID "value")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD if)
(ID "type")
(PUNCT "(")
(ID "value")
(PUNCT ")")
(KEYWORD is)
(ID "tuple")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "title")
(PUNCT "+=")
(LIT "; filename=\"%s\"")
(PUNCT "%")
(ID "value")
(PUNCT "[")
(LIT 0)
(PUNCT "]")
(NEWLINE)
(ID "value")
(PUNCT "=")
(ID "value")
(PUNCT "[")
(LIT 1)
(PUNCT "]")
(NEWLINE)
(DEDENT)
(KEYWORD else)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "value")
(PUNCT "=")
(ID "str")
(PUNCT "(")
(ID "value")
(PUNCT ")")
(PUNCT ".")
(ID "encode")
(PUNCT "(")
(LIT "utf-8")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "body")
(PUNCT ".")
(ID "write")
(PUNCT "(")
(ID "sep_boundary")
(PUNCT ")")
(NEWLINE)
(ID "body")
(PUNCT ".")
(ID "write")
(PUNCT "(")
(ID "title")
(PUNCT ".")
(ID "encode")
(PUNCT "(")
(LIT "utf-8")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(ID "body")
(PUNCT ".")
(ID "write")
(PUNCT "(")
(LIT #"\r\n\r\n")
(PUNCT ")")
(NEWLINE)
(ID "body")
(PUNCT ".")
(ID "write")
(PUNCT "(")
(ID "value")
(PUNCT ")")
(NEWLINE)
(KEYWORD if)
(ID "value")
(KEYWORD and)
(ID "value")
(PUNCT "[")
(PUNCT "-")
(LIT 1)
(PUNCT ":")
(PUNCT "]")
(PUNCT "==")
(LIT #"\r")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "body")
(PUNCT ".")
(ID "write")
(PUNCT "(")
(LIT #"\n")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(DEDENT)
(ID "body")
(PUNCT ".")
(ID "write")
(PUNCT "(")
(ID "end_boundary")
(PUNCT ")")
(NEWLINE)
(ID "body")
(PUNCT "=")
(ID "body")
(PUNCT ".")
(ID "getvalue")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "announce")
(PUNCT "(")
(LIT "Submitting %s to %s")
(PUNCT "%")
(PUNCT "(")
(ID "filename")
(PUNCT ",")
(ID "self")
(PUNCT ".")
(ID "repository")
(PUNCT ")")
(PUNCT ",")
(ID "log")
(PUNCT ".")
(ID "INFO")
(PUNCT ")")
(NEWLINE)
(ID "headers")
(PUNCT "=")
(PUNCT "{")
(LIT "Content-type")
(PUNCT ":")
(LIT "multipart/form-data; boundary=%s")
(PUNCT "%")
(ID "boundary")
(PUNCT ",")
(LIT "Content-length")
(PUNCT ":")
(ID "str")
(PUNCT "(")
(ID "len")
(PUNCT "(")
(ID "body")
(PUNCT ")")
(PUNCT ")")
(PUNCT ",")
(LIT "Authorization")
(PUNCT ":")
(ID "auth")
(PUNCT "}")
(NEWLINE)
(ID "request")
(PUNCT "=")
(ID "Request")
(PUNCT "(")
(ID "self")
(PUNCT ".")
(ID "repository")
(PUNCT ",")
(ID "data")
(PUNCT "=")
(ID "body")
(PUNCT ",")
(ID "headers")
(PUNCT "=")
(ID "headers")
(PUNCT ")")
(NEWLINE)
(KEYWORD try)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "result")
(PUNCT "=")
(ID "urlopen")
(PUNCT "(")
(ID "request")
(PUNCT ")")
(NEWLINE)
(ID "status")
(PUNCT "=")
(ID "result")
(PUNCT ".")
(ID "getcode")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(ID "reason")
(PUNCT "=")
(ID "result")
(PUNCT ".")
(ID "msg")
(NEWLINE)
(DEDENT)
(KEYWORD except)
(ID "OSError")
(KEYWORD as)
(ID "e")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "announce")
(PUNCT "(")
(ID "str")
(PUNCT "(")
(ID "e")
(PUNCT ")")
(PUNCT ",")
(ID "log")
(PUNCT ".")
(ID "ERROR")
(PUNCT ")")
(NEWLINE)
(KEYWORD raise)
(NEWLINE)
(DEDENT)
(KEYWORD except)
(ID "HTTPError")
(KEYWORD as)
(ID "e")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "status")
(PUNCT "=")
(ID "e")
(PUNCT ".")
(ID "code")
(NEWLINE)
(ID "reason")
(PUNCT "=")
(ID "e")
(PUNCT ".")
(ID "msg")
(NEWLINE)
(DEDENT)
(KEYWORD if)
(ID "status")
(PUNCT "==")
(LIT 200)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "self")
(PUNCT ".")
(ID "announce")
(PUNCT "(")
(LIT "Server response (%s): %s")
(PUNCT "%")
(PUNCT "(")
(ID "status")
(PUNCT ",")
(ID "reason")
(PUNCT ")")
(PUNCT ",")
(ID "log")
(PUNCT ".")
(ID "INFO")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD else)
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "msg")
(PUNCT "=")
(LIT "Upload failed (%s): %s")
(PUNCT "%")
(PUNCT "(")
(ID "status")
(PUNCT ",")
(ID "reason")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "announce")
(PUNCT "(")
(ID "msg")
(PUNCT ",")
(ID "log")
(PUNCT ".")
(ID "ERROR")
(PUNCT ")")
(NEWLINE)
(KEYWORD raise)
(ID "DistutilsError")
(PUNCT "(")
(ID "msg")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD if)
(ID "self")
(PUNCT ".")
(ID "show_response")
(PUNCT ":")
(NEWLINE)
(INDENT)
(ID "text")
(PUNCT "=")
(ID "self")
(PUNCT ".")
(ID "_read_pypi_response")
(PUNCT "(")
(ID "result")
(PUNCT ")")
(NEWLINE)
(ID "msg")
(PUNCT "=")
(LIT "\n")
(PUNCT ".")
(ID "join")
(PUNCT "(")
(PUNCT "(")
(LIT "-")
(PUNCT "*")
(LIT 75)
(PUNCT ",")
(ID "text")
(PUNCT ",")
(LIT "-")
(PUNCT "*")
(LIT 75)
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(ID "self")
(PUNCT ".")
(ID "announce")
(PUNCT "(")
(ID "msg")
(PUNCT ",")
(ID "log")
(PUNCT ".")
(ID "INFO")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(DEDENT)
(ENDMARKER)
