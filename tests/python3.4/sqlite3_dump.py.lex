(KEYWORD def)
(ID "_iterdump")
(PUNCT "(")
(ID "connection")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(LIT "\n    Returns an iterator to the dump of the database in an SQL text format.\n\n    Used to produce an SQL dump of the database.  Useful to save an in-memory\n    database for later restoration.  This function should not be called\n    directly but instead called from the Connection method, iterdump().\n    ")
(NEWLINE)
(ID "cu")
(PUNCT "=")
(ID "connection")
(PUNCT ".")
(ID "cursor")
(PUNCT "(")
(PUNCT ")")
(NEWLINE)
(KEYWORD yield)
(PUNCT "(")
(LIT "BEGIN TRANSACTION;")
(PUNCT ")")
(NEWLINE)
(ID "q")
(PUNCT "=")
(LIT "\n        SELECT \"name\", \"type\", \"sql\"\n        FROM \"sqlite_master\"\n            WHERE \"sql\" NOT NULL AND\n            \"type\" == 'table'\n            ORDER BY \"name\"\n        ")
(NEWLINE)
(ID "schema_res")
(PUNCT "=")
(ID "cu")
(PUNCT ".")
(ID "execute")
(PUNCT "(")
(ID "q")
(PUNCT ")")
(NEWLINE)
(KEYWORD for)
(ID "table_name")
(PUNCT ",")
(ID "type")
(PUNCT ",")
(ID "sql")
(KEYWORD in)
(ID "schema_res")
(PUNCT ".")
(ID "fetchall")
(PUNCT "(")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD if)
(ID "table_name")
(PUNCT "==")
(LIT "sqlite_sequence")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD yield)
(PUNCT "(")
(LIT "DELETE FROM \"sqlite_sequence\";")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD elif)
(ID "table_name")
(PUNCT "==")
(LIT "sqlite_stat1")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD yield)
(PUNCT "(")
(LIT "ANALYZE \"sqlite_master\";")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD elif)
(ID "table_name")
(PUNCT ".")
(ID "startswith")
(PUNCT "(")
(LIT "sqlite_")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD continue)
(NEWLINE)
(DEDENT)
(KEYWORD else)
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD yield)
(PUNCT "(")
(LIT "{0};")
(PUNCT ".")
(ID "format")
(PUNCT "(")
(ID "sql")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ID "table_name_ident")
(PUNCT "=")
(ID "table_name")
(PUNCT ".")
(ID "replace")
(PUNCT "(")
(LIT "\"")
(PUNCT ",")
(LIT "\"\"")
(PUNCT ")")
(NEWLINE)
(ID "res")
(PUNCT "=")
(ID "cu")
(PUNCT ".")
(ID "execute")
(PUNCT "(")
(LIT "PRAGMA table_info(\"{0}\")")
(PUNCT ".")
(ID "format")
(PUNCT "(")
(ID "table_name_ident")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(ID "column_names")
(PUNCT "=")
(PUNCT "[")
(ID "str")
(PUNCT "(")
(ID "table_info")
(PUNCT "[")
(LIT 1)
(PUNCT "]")
(PUNCT ")")
(KEYWORD for)
(ID "table_info")
(KEYWORD in)
(ID "res")
(PUNCT ".")
(ID "fetchall")
(PUNCT "(")
(PUNCT ")")
(PUNCT "]")
(NEWLINE)
(ID "q")
(PUNCT "=")
(LIT "SELECT 'INSERT INTO \"{0}\" VALUES({1})' FROM \"{0}\";")
(PUNCT ".")
(ID "format")
(PUNCT "(")
(ID "table_name_ident")
(PUNCT ",")
(LIT ",")
(PUNCT ".")
(ID "join")
(PUNCT "(")
(LIT "'||quote(\"{0}\")||'")
(PUNCT ".")
(ID "format")
(PUNCT "(")
(ID "col")
(PUNCT ".")
(ID "replace")
(PUNCT "(")
(LIT "\"")
(PUNCT ",")
(LIT "\"\"")
(PUNCT ")")
(PUNCT ")")
(KEYWORD for)
(ID "col")
(KEYWORD in)
(ID "column_names")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(ID "query_res")
(PUNCT "=")
(ID "cu")
(PUNCT ".")
(ID "execute")
(PUNCT "(")
(ID "q")
(PUNCT ")")
(NEWLINE)
(KEYWORD for)
(ID "row")
(KEYWORD in)
(ID "query_res")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD yield)
(PUNCT "(")
(LIT "{0};")
(PUNCT ".")
(ID "format")
(PUNCT "(")
(ID "row")
(PUNCT "[")
(LIT 0)
(PUNCT "]")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(DEDENT)
(ID "q")
(PUNCT "=")
(LIT "\n        SELECT \"name\", \"type\", \"sql\"\n        FROM \"sqlite_master\"\n            WHERE \"sql\" NOT NULL AND\n            \"type\" IN ('index', 'trigger', 'view')\n        ")
(NEWLINE)
(ID "schema_res")
(PUNCT "=")
(ID "cu")
(PUNCT ".")
(ID "execute")
(PUNCT "(")
(ID "q")
(PUNCT ")")
(NEWLINE)
(KEYWORD for)
(ID "name")
(PUNCT ",")
(ID "type")
(PUNCT ",")
(ID "sql")
(KEYWORD in)
(ID "schema_res")
(PUNCT ".")
(ID "fetchall")
(PUNCT "(")
(PUNCT ")")
(PUNCT ":")
(NEWLINE)
(INDENT)
(KEYWORD yield)
(PUNCT "(")
(LIT "{0};")
(PUNCT ".")
(ID "format")
(PUNCT "(")
(ID "sql")
(PUNCT ")")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(KEYWORD yield)
(PUNCT "(")
(LIT "COMMIT;")
(PUNCT ")")
(NEWLINE)
(DEDENT)
(ENDMARKER)
